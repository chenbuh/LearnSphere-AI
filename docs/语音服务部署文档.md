# Edge TTS éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç®€ä»‹

Edge TTS æ˜¯å¾®è½¯æä¾›çš„å…è´¹é«˜è´¨é‡è¯­éŸ³åˆæˆæœåŠ¡ï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œè‡ªç„¶çš„è¯­éŸ³ã€‚

å½“å‰é¡¹ç›®å·²é›†æˆ **Edge TTS**ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
- âœ… å¤šç§å£éŸ³ï¼ˆç¾éŸ³/è‹±éŸ³/æ¾³éŸ³ï¼‰
- âœ… ç”·å£°/å¥³å£°é€‰æ‹©
- âœ… è¯­é€Ÿè°ƒèŠ‚
- âœ… è‡ªåŠ¨é™çº§æœºåˆ¶ï¼ˆEdge â†’ æœ‰é“ â†’ ç³»ç»ŸTTSï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å…è´¹APIï¼ˆä¸ç¨³å®šï¼Œä»…æµ‹è¯•ç”¨ï¼‰

æ— éœ€éƒ¨ç½²ï¼Œç›´æ¥ä½¿ç”¨ï¼å‰ç«¯ä¼šè‡ªåŠ¨è°ƒç”¨ç¬¬ä¸‰æ–¹APIã€‚

**ä¼˜ç‚¹**ï¼š
- é›¶é…ç½®
- ç«‹å³å¯ç”¨

**ç¼ºç‚¹**ï¼š
- ä¸ç¨³å®šï¼Œå¯èƒ½éšæ—¶å¤±æ•ˆ
- æœ‰è¯·æ±‚é™åˆ¶

---

### æ–¹æ¡ˆäºŒï¼šéƒ¨ç½²æœ¬åœ°Edge TTSæœåŠ¡ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£… Python ä¾èµ–
pip install edge-tts flask flask-cors
```

#### æ­¥éª¤2ï¼šå¯åŠ¨Edge TTSæœåŠ¡

```bash
python edge_tts_server.py
```

è¾“å‡ºï¼š
```
==================================================
Edge TTS Server Starting...
API Endpoint: http://localhost:5010/api/tts
Health Check: http://localhost:5010/health
==================================================
 * Running on http://0.0.0.0:5010
```

#### æ­¥éª¤3ï¼šéªŒè¯æœåŠ¡

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:5010/health
```

åº”è¯¥è¿”å›ï¼š
```json
{
  "status": "ok",
  "service": "Edge TTS"
}
```

#### æ­¥éª¤4ï¼šæµ‹è¯•è¯­éŸ³åˆæˆ

```bash
curl -X POST http://localhost:5010/api/tts \
  -H "Content-Type: application/json" \
  -d '{"text":"Hello World","voice":"en-US-JennyNeural"}' \
  --output test.mp3
```

#### æ­¥éª¤5ï¼šå¯åŠ¨åç«¯æœåŠ¡

ç¡®ä¿ Spring Boot åç«¯åœ¨è¿è¡Œï¼š
```bash
# åœ¨ IntelliJ IDEA ä¸­è¿è¡Œ
# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
cd backend
mvn spring-boot:run
```

#### æ­¥éª¤6ï¼šå‰ç«¯è°ƒç”¨

å‰ç«¯ä¼šè‡ªåŠ¨ä½¿ç”¨ `/api/tts/edge` æ¥å£ï¼š

```javascript
import { speak } from '@/utils/tts'

// ä½¿ç”¨ Edge TTSï¼ˆé»˜è®¤ï¼‰
await speak("Hello, how are you?")

// æŒ‡å®šå£éŸ³å’Œæ€§åˆ«
await speak("Hello, how are you?", {
  accent: 'en-GB',  // è‹±éŸ³
  gender: 'male'     // ç”·å£°
})

// è°ƒæ•´è¯­é€Ÿ
await speak("Hello, how are you?", {
  rate: 1.2  // 1.2å€é€Ÿ
})
```

---

## ğŸµ å¯ç”¨è¯­éŸ³åˆ—è¡¨

### è‹±è¯­ï¼ˆç¾éŸ³ï¼‰
- `en-US-JennyNeural` - Jennyï¼ˆå¥³å£°ï¼‰â­ æ¨è
- `en-US-GuyNeural` - Guyï¼ˆç”·å£°ï¼‰

### è‹±è¯­ï¼ˆè‹±éŸ³ï¼‰
- `en-GB-SoniaNeural` - Soniaï¼ˆå¥³å£°ï¼‰
- `en-GB-RyanNeural` - Ryanï¼ˆç”·å£°ï¼‰

### è‹±è¯­ï¼ˆæ¾³éŸ³ï¼‰
- `en-AU-NatashaNeural` - Natashaï¼ˆå¥³å£°ï¼‰

### ä¸­æ–‡
- `zh-CN-XiaoxiaoNeural` - æ™“æ™“ï¼ˆå¥³å£°ï¼‰
- `zh-CN-YunxiNeural` - äº‘å¸Œï¼ˆç”·å£°ï¼‰

æŸ¥çœ‹æ‰€æœ‰å¯ç”¨è¯­éŸ³ï¼š
```
GET http://localhost:5010/api/voices
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
LearnSphere AI/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ edge_tts_server.py          # Python Edge TTS æœåŠ¡
â”‚   â””â”€â”€ src/main/java/com/learnsphere/controller/
â”‚       â””â”€â”€ EdgeTTSController.java  # Spring Boot ä»£ç†æ¥å£
â”‚
â””â”€â”€ frontend-vue/
    â””â”€â”€ src/utils/
        â””â”€â”€ tts.js                   # å‰ç«¯ TTS å·¥å…·ï¼ˆå·²é›†æˆï¼‰
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

```
å‰ç«¯è°ƒç”¨
  â†“
speak("Hello") 
  â†“
å°è¯• Edge TTS (ä¼˜å…ˆ)
  â†“
è°ƒç”¨ /api/tts/edge (Spring Boot)
  â†“
ä»£ç†åˆ° http://localhost:5010/api/tts (Python)
  â†“
è°ƒç”¨ Microsoft Edge TTS
  â†“
è¿”å› MP3 éŸ³é¢‘
  â†“
å‰ç«¯æ’­æ”¾

å¤±è´¥æ—¶è‡ªåŠ¨é™çº§ï¼š
Edge TTS â†’ æœ‰é“TTS â†’ ç³»ç»ŸTTS
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### å‰ç«¯é…ç½®

```javascript
// è®¾ç½®é»˜è®¤ TTS æä¾›å•†
import { setTTSPreferences } from '@/utils/tts'

setTTSPreferences({
  provider: 'edge',      // ä½¿ç”¨ Edge TTS
  accent: 'en-US',       // ç¾éŸ³
  gender: 'female',      // å¥³å£°
  rate: 1.0              // æ­£å¸¸è¯­é€Ÿ
})
```

### åç«¯é…ç½®

ä¿®æ”¹ `EdgeTTSController.java`ï¼š

```java
// æœ¬åœ° Python æœåŠ¡åœ°å€ï¼ˆé»˜è®¤ï¼‰
String apiUrl = "http://localhost:5010/api/tts";

// å¦‚æœéƒ¨ç½²åœ¨å…¶ä»–æœåŠ¡å™¨
String apiUrl = "http://192.168.1.100:5010/api/tts";

// å¦‚æœä½¿ç”¨ Docker
String apiUrl = "http://edge-tts:5010/api/tts";
```

---

## ğŸ³ Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

### Dockerfile for Edge TTS

```dockerfile
FROM python:3.9-slim

WORKDIR /app

RUN pip install --no-cache-dir edge-tts flask flask-cors

COPY edge_tts_server.py .

EXPOSE 5010

CMD ["python", "edge_tts_server.py"]
```

### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t edge-tts . 

# è¿è¡Œå®¹å™¨
docker run -d -p 5010:5010 --name edge-tts edge-tts

# æŸ¥çœ‹æ—¥å¿—
docker logs edge-tts
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šEdge TTSæœåŠ¡å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**ï¼š`ModuleNotFoundError: No module named 'edge_tts'`

**è§£å†³**ï¼š
```bash
pip install edge-tts
```

---

### é—®é¢˜2ï¼šå‰ç«¯æ— æ³•è®¿é—® Edge TTS

**ç—‡çŠ¶**ï¼šæµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º `Failed to fetch`

**æ£€æŸ¥**ï¼š
1. Edge TTS æœåŠ¡æ˜¯å¦è¿è¡Œï¼Ÿ
   ```bash
   curl http://localhost:5010/health
   ```

2. Spring Boot æ˜¯å¦è¿è¡Œï¼Ÿ
   ```bash
   curl http://localhost:8080/api/tts/voices
   ```

3. æ£€æŸ¥CORSé…ç½®ï¼ˆå·²åœ¨`edge_tts_server.py`ä¸­å¯ç”¨ï¼‰

---

### é—®é¢˜3ï¼šè¯­éŸ³åˆæˆé€Ÿåº¦æ…¢

**åŸå› **ï¼šEdge TTS é¦–æ¬¡åˆæˆè¾ƒæ…¢

**ä¼˜åŒ–**ï¼š
1. å¯ç”¨ç¼“å­˜ï¼ˆå·²å®ç°ï¼‰
2. é¢„åŠ è½½å¸¸ç”¨è¯­éŸ³
3. è€ƒè™‘ä½¿ç”¨ CDN ç¼“å­˜éŸ³é¢‘æ–‡ä»¶

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| TTS æä¾›å•† | éŸ³è´¨ | é€Ÿåº¦ | æˆæœ¬ | ç¨³å®šæ€§ |
|-----------|------|------|------|--------|
| Edge TTS | â­â­â­â­â­ | â­â­â­â­ | å…è´¹ | â­â­â­â­ |
| æœ‰é“TTS | â­â­â­ | â­â­â­â­â­ | å…è´¹ | â­â­â­ |
| ç³»ç»ŸTTS | â­â­ | â­â­â­â­â­ | å…è´¹ | â­â­â­â­â­ |
| Azure TTS | â­â­â­â­â­ | â­â­â­â­ | ä»˜è´¹ | â­â­â­â­â­ |

**æ¨èæ–¹æ¡ˆ**ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼šEdge TTSï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰
- æµ‹è¯•ç¯å¢ƒï¼šæœ‰é“ TTS + ç³»ç»Ÿ TTS

---

## âœ… éªŒè¯éƒ¨ç½²

å®Œæ•´æµ‹è¯•æµç¨‹ï¼š

```bash
# 1. å¯åŠ¨ Edge TTS æœåŠ¡
python backend/edge_tts_server.py

# 2. å¯åŠ¨ Spring Bootï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd backend
mvn spring-boot:run

# 3. å¯åŠ¨å‰ç«¯ï¼ˆç¬¬ä¸‰ä¸ªç»ˆç«¯ï¼‰
cd frontend-vue
npm run dev

# 4. æ‰“å¼€æµè§ˆå™¨æµ‹è¯•
# http://localhost:5173
# è¿›å…¥è¯æ±‡å­¦ä¹ é¡µé¢ï¼Œç‚¹å‡»æ’­æ”¾æŒ‰é’®
# æ§åˆ¶å°åº”æ˜¾ç¤ºï¼š[TTS] Speaking: "..." with edge
```

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åœ¨è¯æ±‡å­¦ä¹ ä¸­ä½¿ç”¨

```vue
<script setup>
import { speak } from '@/utils/tts'

const playWord = (word) => {
  speak(word.word)
}

const playExample = (example) => {
  speak(example.en, {
    rate: 0.9  // ç¨æ…¢ä¸€ç‚¹
  })
}
</script>

<template>
  <div @click="playWord(currentWord)">
    <h3>{{ currentWord.word }}</h3>
    <button @click.stop="playExample(currentWord.examples[0])">
      æ’­æ”¾ä¾‹å¥
    </button>
  </div>
</template>
```

### åœ¨å£è¯­ç»ƒä¹ ä¸­ä½¿ç”¨

```javascript
// æ’­æ”¾é¢˜ç›®
const playQuestion = async () => {
  await speak(topicData.value.question, {
    accent: 'en-US',
    gender: 'female',
    rate: 0.85  // æ…¢é€Ÿï¼Œä¾¿äºç†è§£
  })
}
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¦æ±‚**ï¼šEdge TTS éœ€è¦ç½‘ç»œè¿æ¥ï¼ˆè°ƒç”¨å¾®è½¯æœåŠ¡ï¼‰
2. **è¯·æ±‚é™åˆ¶**ï¼šå»ºè®®æ·»åŠ é¢‘ç‡é™åˆ¶ï¼Œé¿å…æ»¥ç”¨
3. **ç¼“å­˜ç­–ç•¥**ï¼šå·²å®ç°å‰ç«¯ç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚
4. **é”™è¯¯å¤„ç†**ï¼šå·²å®ç°è‡ªåŠ¨é™çº§ï¼Œç¡®ä¿å¯ç”¨æ€§

---

## ğŸš€ ä¸‹ä¸€æ­¥

- [ ] æ·»åŠ è¯­éŸ³ç¼“å­˜åˆ°æœåŠ¡å™¨ï¼ˆå‡å°‘APIè°ƒç”¨ï¼‰
- [ ] æ”¯æŒæ›´å¤šè¯­è¨€ï¼ˆæ—¥è¯­ã€æ³•è¯­ç­‰ï¼‰
- [ ] æ·»åŠ å‘éŸ³è¯„æµ‹åŠŸèƒ½
- [ ] é›†æˆåˆ°ç§»åŠ¨ç«¯åº”ç”¨

---

éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹æ—¥å¿—ï¼š
```bash
# Python æœåŠ¡æ—¥å¿—
tail -f edge_tts_server.log

# Spring Boot æ—¥å¿—
tail -f backend/logs/spring.log
```
