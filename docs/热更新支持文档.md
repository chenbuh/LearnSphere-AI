# 🔥 LearnSphere AI - 热更新支持文档

本文档介绍如何在开发环境下启用和使用热更新（Hot Update）功能，以提高开发效率。

## 1. 前端热更新 (Vite HMR)

项目前端（`frontend-vue` 和 `admin-vue`）基于 **Vite** 构建，原生支持模块热替换 (HMR)。

### 使用方法
1. 在前端目录下运行 `npm run dev`：
   ```bash
   cd frontend-vue
   npm run dev
   ```
2. 修改 `.vue`、`.js` 或 `.css` 文件。
3. 浏览器会自动应用更改，无需手动刷新页面，且能保持当前的页面状态。

---

## 2. 后端热更新 (Spring Boot DevTools)

后端已集成 **Spring Boot DevTools**，支持类路径下的代码变更自动重启。

### 配置说明
在 `backend/src/main/resources/application-dev.yml` 中已配置：
```yaml
spring:
  devtools:
    restart:
      enabled: true
      additional-paths: src/main/java
      exclude: static/**,public/**,templates/**
    livereload:
      enabled: true
```

### 使用方法

#### 场景 A：使用 IntelliJ IDEA
1. **自动编译配置**：
   - 打开 `Settings` -> `Build, Execution, Deployment` -> `Compiler`。
   - 勾选 `Build project automatically`。
2. **运行时自动编译**：
   - 按下 `Ctrl + Shift + Alt + /` 并选择 `Registry`。
   - 找到并勾选 `compiler.automake.allow.when.app.running` (在新版本 IDEA 中，该选项已移动到 `Settings` -> `Advanced Settings` -> `Compiler`)。
3. **完成**：修改 Java 代码后，稍等几秒，Spring Boot 会自动重启。

#### 场景 B：使用 VS Code
1. 安装 **Spring Boot Extension Pack** 插件。
2. 正常通过调试模式启动应用。
3. 修改代码并保存后，DevTools 会监听到编译后的文件变化并重启。

#### 场景 C：手动触发
如果你不希望配置自动编译，可以在修改代码后，手动点击 IDE 的 **Build** (或按下 `Ctrl + F9`)，DevTools 感知到 `target/classes` 下的文件变化仍会自动重启。

---

## 3. 常见问题 (FAQ)

### Q: 修改了代码但没有重启？
**A**: Spring Boot DevTools 是监听编译后的 `.class` 文件变化。如果你没有开启 "自动编译"，你需要手动 Build 项目才能触发重启。

### Q: 热更新会不会导致内存溢出？
**A**: DevTools 使用两个类加载器（Base 和 Restart）。虽然它比冷启动快，但频繁重启仍会消耗内存。建议在进行大规模重构时暂时关闭此功能，或者定期手动重启应用。

### Q: 我可以增加不触发重启的路径吗？
**A**: 可以在 `application-dev.yml` 的 `spring.devtools.restart.exclude` 中添加路径，例如：
```yaml
spring:
  devtools:
    restart:
      exclude: custom-assets/**,*.txt
```
