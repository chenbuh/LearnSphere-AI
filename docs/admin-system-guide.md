# LearnSphere AI 管理员系统使用指南

## 📋 目录
- [系统概述](#系统概述)
- [访问方式](#访问方式)
- [功能模块](#功能模块)
- [操作指南](#操作指南)
- [API接口](#api接口)
- [安全说明](#安全说明)

---

## 系统概述

LearnSphere AI 管理员系统是一个功能完善的后台管理控制台，专为系统管理员设计，提供用户管理、数据分析、系统配置等核心功能。

### 主要特性
- 🎨 现代化响应式UI设计
- 👥 完整的用户管理（CRUD）
- 📊 实时数据统计和可视化
- 📈 学习数据分析
- ⚙️ 系统配置管理
- 📋 操作日志记录
- 🔒 基于JWT的权限验证

---

## 访问方式

### 1. 登录要求
- **角色**: 必须具有管理员（admin）权限
- **账户**: 使用您的管理员账号登录主应用
- **管理员账号**: 已在系统中配置（用户名: chen）

### 2. 进入控制台
登录后，导航栏会显示 **👑 管理控制台** 按钮，点击即可在新窗口打开管理后台。

或直接访问: `http://localhost:3000/src/html/admin.html`

---

## 功能模块

### 📊 数据概览 (Dashboard)
实时展示系统核心数据：
- **总用户数**: 系统注册用户总量
- **学习会话**: 所有学习记录数
- **学习时长**: 累计学习时间统计
- **活跃用户**: 7天内活跃用户数

**功能**:
- 用户增长趋势图表
- 学习活动分布图表
- 最近活动列表（最多显示10条）

### 👥 用户管理 (Users)
完整的用户CRUD操作：

#### 查看用户列表
- 展示所有用户信息
- 列包括：ID、用户名、角色、注册时间、最后登录、学习进度

#### 搜索用户
- 实时搜索框
- 支持按用户名或ID搜索

#### 添加用户
1. 点击 **➕ 添加用户** 按钮
2. 填写表单:
   - 用户名（必填）
   - 密码（必填）
   - 角色（普通用户/管理员）
3. 点击 **保存**

#### 编辑用户
1. 点击用户行的 **编辑** 按钮
2. 修改信息（密码可留空）
3. 点击 **保存**

#### 删除用户
1. 点击用户行的 **删除** 按钮
2. 确认删除操作

### 📚 内容管理 (Content)
管理学习内容资源：
- 词汇库管理
- 语法练习管理
- 阅读材料管理
- 听力资源管理

**操作**:
- 添加新内容
- 编辑现有内容
- 删除内容
- 内容分类管理

### 📈 学习分析 (Analytics)
深度分析学习数据：

#### 筛选条件
- **时间范围**: 最近7天/30天/3个月/1年
- **模块**: 全部/词汇/语法/阅读/听力

#### 分析指标
- **平均学习时长**: 用户每次学习的平均时间
- **平均准确率**: 用户答题的平均正确率
- **完成率**: 学习任务完成百分比

#### 可视化图表
- 学习数据趋势图
- 多维度数据对比

### ⚙️ 系统设置 (System)

#### 基本设置
- **站点名称**: 自定义应用名称
- **允许注册**: 开启/关闭用户自主注册
- **默认语言**: 设置系统默认语言

#### 学习设置
- **每日默认词汇目标**: 10-200个
- **考试模式时间限制**: 30-300分钟
- **启用AI推荐**: 开启/关闭AI功能

#### 数据管理
- **导出所有数据**: 导出JSON格式的系统数据
- **导入数据**: 从JSON文件导入数据
- **清空数据库**: ⚠️ 危险操作，会删除所有数据

### 📋 操作日志 (Logs)
记录所有重要操作：

#### 日志类型
- **登录**: 用户登录记录
- **用户**: 用户管理操作
- **内容**: 内容管理操作
- **系统**: 系统设置更改

#### 功能
- 实时日志记录
- 按类型筛选
- 显示操作时间、类型、内容和操作人
- 清空日志功能

---

## 操作指南

### 日常管理流程

1. **每日检查**:
   - 查看数据概览，了解系统运行状态
   - 检查活跃用户数和学习时长
   - 查看最近活动列表

2. **用户管理**:
   - 定期审查用户列表
   - 处理用户问题和请求
   - 管理用户权限

3. **数据分析**:
   - 定期查看学习分析报告
   - 根据数据调整内容策略
   - 优化学习体验

4. **系统维护**:
   - 定期导出数据备份
   - 检查操作日志
   - 更新系统设置

### 最佳实践

#### 安全建议
- ✅ 定期修改管理员密码
- ✅ 谨慎分配管理员权限
- ✅ 定期审查操作日志
- ✅ 定期备份数据
- ❌ 不要在公共网络使用管理控制台
- ❌ 不要分享管理员凭证

#### 数据管理
- 每周导出一次数据备份
- 重要操作前先备份
- 谨慎使用清空数据功能
- 导入数据前验证文件格式

---

## API接口

### 权限验证
所有管理员API都需要在请求头中携带JWT Token:
```
Authorization: Bearer <your-token>
```

### 用户管理API

#### 获取所有用户
```http
GET /api/admin/users
```
**响应**:
```json
[
  {
    "id": 1727884800000,
    "username": "chen",
    "role": "admin",
    "createdAt": "2024-10-02T12:00:00.000Z",
    "lastLogin": "2024-10-06T08:00:00.000Z"
  }
]
```

#### 创建用户
```http
POST /api/admin/users
Content-Type: application/json

{
  "username": "newuser",
  "password": "password123",
  "role": "user"
}
```

#### 更新用户
```http
PUT /api/admin/users/:id
Content-Type: application/json

{
  "username": "updatedname",
  "role": "admin"
}
```

#### 删除用户
```http
DELETE /api/admin/users/:id
```

### 系统统计API

#### 获取系统统计
```http
GET /api/admin/stats
```
**响应**:
```json
{
  "totalUsers": 10,
  "adminUsers": 1,
  "regularUsers": 9,
  "recentUsers": 3
}
```

---

## 安全说明

### 权限控制
- 所有管理员API都经过 `verifyAdmin` 中间件验证
- 只有 `role === 'admin'` 的用户可以访问
- Token过期时间为1小时，需重新登录

### 数据安全
- 用户密码使用bcrypt加密存储
- API响应中不包含密码字段
- 所有敏感操作都记录日志

### 建议措施
1. **定期更换密码**: 建议每月更换一次管理员密码
2. **限制访问**: 仅在可信网络环境下访问管理控制台
3. **监控日志**: 定期检查操作日志，发现异常及时处理
4. **备份数据**: 重要操作前务必备份数据
5. **更新系统**: 保持系统和依赖包最新版本

---

## 技术架构

### 前端
- **HTML5 + CSS3**: 现代响应式设计
- **Vanilla JavaScript**: 无框架依赖
- **模块化设计**: 清晰的代码结构

### 后端
- **Node.js + Express**: RESTful API
- **JWT**: 身份验证
- **bcrypt**: 密码加密
- **文件系统**: JSON文件存储

### 存储
- **用户数据**: `/data/users.json`
- **本地存储**: localStorage用于前端数据缓存
- **日志记录**: localStorage存储操作日志

---

## 常见问题

### Q: 忘记管理员密码怎么办？
**A**: 可以通过以下方式重置：
1. 停止服务器
2. 编辑 `data/users.json` 文件
3. 使用bcrypt工具生成新密码的哈希值
4. 替换管理员记录中的password字段
5. 重启服务器

### Q: 如何备份数据？
**A**: 
1. 进入 **系统设置** 面板
2. 点击 **导出所有数据** 按钮
3. 保存下载的JSON文件到安全位置

### Q: 如何恢复数据？
**A**:
1. 进入 **系统设置** 面板
2. 点击 **导入数据** 按钮
3. 选择之前导出的JSON备份文件
4. 确认导入操作

### Q: 管理控制台打不开？
**A**: 检查以下几点：
1. 确认已使用管理员账号登录
2. 检查浏览器控制台是否有错误
3. 确认服务器正在运行
4. 清除浏览器缓存后重试

---

## 更新日志

### v1.0.0 (2025-10-06)
- ✨ 初始版本发布
- 👥 实现完整用户管理功能
- 📊 添加数据概览和统计
- 📈 实现学习数据分析
- ⚙️ 添加系统设置功能
- 📋 实现操作日志记录
- 🔒 集成JWT权限验证

---

## 支持与反馈

如有问题或建议，请联系开发团队。

**开发团队**: LearnSphere AI Team  
**版本**: 1.0.0  
**更新时间**: 2025年10月6日

