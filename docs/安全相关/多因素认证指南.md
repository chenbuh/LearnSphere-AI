# Multi-Factor Authentication (MFA) 用户指南 & 优化日志

## 🌟 功能简介

多因子认证 (MFA) 是 LearnSphere AI 为了保障用户账户安全而引入的高级防护机制。通过绑定虚拟令牌（如 Google Authenticator），用户可以显著提升账户的安全性。

### 核心应用场景
1. **安全登录**：通过二次验证防止密码泄露导致的账户被盗。
2. **风险自助解除**：当系统检测到异常登录或违规操作（如高频敏感词触发）导致账户被临时锁定时，用户可以通过输入 6 位 MFA 动态码**自助解除锁定**，实现无感恢复学习。

---

## 🛠️ 如何开启 MFA

1. **进入个人中心**：点击侧边栏的“个人中心”。
2. **安全设置**：切换到“安全设置”选项卡。
3. **绑定设备**：
   - 找到“多因子认证 (MFA)”卡片。
   - 点击“立即绑定 Google Authenticator”。
   - 使用手机上的验证器 App（如 Microsoft Authenticator, Google Authenticator 或华为/小米自带验证器）扫描弹出的二维码。
   - 输入 App 生成的 6 位动态验证码，点击“立即开启验证”。
4. **完成**：绑定成功后，状态将显示为“已开启”。

---

## 🔄 界面显示优化 (2026-02-11)

针对用户反馈的 MFA 显示问题，我们进行了以下深度优化：

### 1. 布局灵活性优化
- **Header 响应式调整**：将 MFA 卡片的头部布局从固定排列改为 `flex-wrap`，解决了在窄屏幕或平板模式下标题与状态标签重叠的问题。
- **间距调整**：增加了左右两栏（修改密码 vs 安全监测）之间的垂直间距 (`space-y-8`)，使界面层次感更强，不再显得拥挤。

### 2. 视觉体验升级
- **图标统一化**：使用 `n-icon` 统一渲染所有安全相关的图标，解决了部分浏览器下 SVG 图标渲染比例失调或出现伪字符的问题。
- **微交互增强**：为 MFA 卡片添加了悬浮发光边框效果 (`hover:border-indigo-500/30`)，提升了界面的高级感和可交互性。
- **状态更醒目**：优化了标签颜色的对比度，并引入了 `CheckCircle` 动画图标指示“高级风控保护”状态。

### 3. 内容与引导
- **提示词修正**：完善了关于 MFA 如何帮助“自助解除锁定”的文字描述，使其更加通俗易懂。
- **操作引导**：加大了“立即绑定”按钮的高度，并增加了加粗提示，引导新用户快速完成安全加固。

---

## 🆘 常见问题 (FAQ)

**Q: 扫描二维码失败怎么办？**
A: 请点击弹窗中的“手动添加密钥”，在验证器 App 中选择手动输入，录入显示的 16 位字符即可。

**Q: 手机丢失了，无法获取验证码怎么办？**
A: 目前系统采用的是标准 TOTP 协议。建议在绑定时备份 16 位密钥。若无备份，请通过系统底部的“技术支持”联系人工客服进行人工核验解密。

---

## 📅 更新记录
- **2026-02-11**: 修复了窄屏下标题重叠、图标渲染异常等 UI Bug。
- **2026-02-03**: 初始化 MFA 功能，实现客户端 QR Code 生成。
- **2023-XX-XX**: 后端 TOTP 核心逻辑上线。
