# ğŸ“¡ LearnSphere AI - API æ¥å£æ–‡æ¡£

> RESTful API å®Œæ•´æ–‡æ¡£

## ğŸ“‘ ç›®å½•

- [åŸºç¡€ä¿¡æ¯](#åŸºç¡€ä¿¡æ¯)
- [è®¤è¯æˆæƒ](#è®¤è¯æˆæƒ)
- [ç”¨æˆ·ç®¡ç†](#ç”¨æˆ·ç®¡ç†)
- [è¯æ±‡å­¦ä¹ ](#è¯æ±‡å­¦ä¹ )
- [è¯­æ³•ç»ƒä¹ ](#è¯­æ³•ç»ƒä¹ )
- [å­¦ä¹ è®°å½•](#å­¦ä¹ è®°å½•)

---

## åŸºç¡€ä¿¡æ¯

### æ¥å£åœ°å€

```
å¼€å‘ç¯å¢ƒ: http://localhost:8080/api
ç”Ÿäº§ç¯å¢ƒ: http://api.learnsphere.ai/api (ç›®å‰ç»Ÿä¸€ä½¿ç”¨ http)
```

### è®¤è¯æ–¹å¼

æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token:

```http
Headers:
  satoken: {tokenå€¼}
```

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

### çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ/æœªç™»å½• |
| 403 | ç¦æ­¢è®¿é—®/æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

---

## è®¤è¯æˆæƒ

### ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**: `POST /api/auth/login`

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "string",
  "password": "string"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "satoken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "admin",
      "email": "admin@learnsphere.ai",
      "nickname": "ç®¡ç†å‘˜",
      "avatar": null,
      "examType": "CET-6",
      "targetScore": null,
      "currentLevel": null,
      "status": 1
    }
  }
}
```

### ç”¨æˆ·æ³¨å†Œ

**æ¥å£åœ°å€**: `POST /api/auth/register`

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "string",
  "password": "string",
  "email": "string",
  "nickname": "string"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": null
}
```

### ç”¨æˆ·ç™»å‡º

**æ¥å£åœ°å€**: `POST /api/auth/logout`

**è®¤è¯**: éœ€è¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å‡ºæˆåŠŸ",
  "data": null
}
```

### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/auth/info`

**è®¤è¯**: éœ€è¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "username": "admin",
    "email": "admin@learnsphere.ai",
    "nickname": "ç®¡ç†å‘˜",
    "avatar": null,
    "phone": null,
    "examType": "CET-6",
    "targetScore": null,
    "currentLevel": null,
    "status": 1,
    "createTime": "2026-01-09T22:00:00"
  }
}
```

### æ£€æŸ¥ç™»å½•çŠ¶æ€

**æ¥å£åœ°å€**: `GET /api/auth/check`

**è®¤è¯**: éœ€è¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "isLogin": true,
    "userId": 1
  }
}
```

---

## ç”¨æˆ·ç®¡ç†

### æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**: `PUT /api/user/profile`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```json
{
  "nickname": "string",
  "avatar": "string",
  "email": "string",
  "phone": "string",
  "examType": "string",
  "targetScore": 550,
  "currentLevel": "intermediate"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### ä¿®æ”¹å¯†ç 

**æ¥å£åœ°å€**: `PUT /api/user/password`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```json
{
  "oldPassword": "string",
  "newPassword": "string"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": null
}
```

---

## è¯æ±‡å­¦ä¹ 

### è·å–è¯æ±‡åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/vocabulary`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```
Query Parameters:
  examType: string  // è€ƒè¯•ç±»å‹ (cet4, cet6, ielts, toefl, gre)
  page: number      // é¡µç ï¼Œé»˜è®¤1
  size: number      // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20
  difficulty: number // éš¾åº¦ç­‰çº§ 1-5
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "size": 20,
    "records": [
      {
        "id": 1,
        "word": "hello",
        "phonetic": "hÉ™ËˆlÉ™ÊŠ",
        "definition": "used as a greeting",
        "translation": "ä½ å¥½",
        "example": "Hello, how are you?",
        "exampleTranslation": "ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿ",
        "examType": "cet4",
        "difficulty": 1,
        "tags": ["basic", "greeting"]
      }
    ]
  }
}
```

### è·å–å•ä¸ªè¯æ±‡è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/vocabulary/{id}`

**è®¤è¯**: éœ€è¦

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "word": "hello",
    "phonetic": "hÉ™ËˆlÉ™ÊŠ",
    "definition": "used as a greeting",
    "translation": "ä½ å¥½",
    "example": "Hello, how are you?",
    "exampleTranslation": "ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿ",
    "examType": "cet4",
    "difficulty": 1,
    "frequency": 100,
    "tags": ["basic", "greeting"]
  }
}
```

### éšæœºè·å–è¯æ±‡ï¼ˆæµ‹è¯•ç”¨ï¼‰

**æ¥å£åœ°å€**: `GET /api/vocabulary/random`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```
Query Parameters:
  examType: string  // è€ƒè¯•ç±»å‹
  count: number     // æ•°é‡ï¼Œé»˜è®¤10
  difficulty: number // éš¾åº¦ç­‰çº§
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "word": "hello",
      "translation": "ä½ å¥½"
    }
  ]
}
```

---

## è¯­æ³•ç»ƒä¹ 

### è·å–è¯­æ³•ç»ƒä¹ åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/grammar`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```
Query Parameters:
  examType: string   // è€ƒè¯•ç±»å‹
  category: string   // åˆ†ç±»ï¼ˆæ—¶æ€ã€è¯­æ€ç­‰ï¼‰
  page: number       // é¡µç 
  size: number       // æ¯é¡µæ•°é‡
  difficulty: number // éš¾åº¦ç­‰çº§
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 50,
    "page": 1,
    "size": 10,
    "records": [
      {
        "id": 1,
        "title": "ä¸€èˆ¬ç°åœ¨æ—¶ç»ƒä¹ ",
        "question": "é€‰æ‹©æ­£ç¡®çš„åŠ¨è¯å½¢å¼",
        "options": ["go", "goes", "going", "went"],
        "answer": "goes",
        "explanation": "ç¬¬ä¸‰äººç§°å•æ•°ç”¨goes",
        "difficulty": 2,
        "category": "æ—¶æ€"
      }
    ]
  }
}
```

### æäº¤è¯­æ³•ç»ƒä¹ ç­”æ¡ˆ

**æ¥å£åœ°å€**: `POST /api/grammar/{id}/submit`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```json
{
  "answer": "string",
  "timeSpent": 30  // ç§’
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "isCorrect": true,
    "correctAnswer": "goes",
    "explanation": "ç¬¬ä¸‰äººç§°å•æ•°ç”¨goes",
    "score": 10
  }
}
```

---

## å­¦ä¹ è®°å½•

### æ·»åŠ å­¦ä¹ è®°å½•

**æ¥å£åœ°å€**: `POST /api/learning/record`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```json
{
  "contentId": 1,
  "contentType": "vocabulary",  // vocabulary/grammar/reading/listening
  "isCorrect": true,
  "timeSpent": 30,
  "score": 10,
  "answer": "string",
  "correctAnswer": "string"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è®°å½•æˆåŠŸ",
  "data": null
}
```

### è·å–å­¦ä¹ è®°å½•

**æ¥å£åœ°å€**: `GET /api/learning/records`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```
Query Parameters:
  contentType: string // å†…å®¹ç±»å‹
  startDate: string   // å¼€å§‹æ—¥æœŸ YYYY-MM-DD
  endDate: string     // ç»“æŸæ—¥æœŸ YYYY-MM-DD
  page: number
  size: number
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "size": 20,
    "records": [
      {
        "id": 1,
        "contentId": 1,
        "contentType": "vocabulary",
        "isCorrect": true,
        "timeSpent": 30,
        "score": 10,
        "masteryLevel": 3,
        "createTime": "2026-01-09T22:00:00"
      }
    ]
  }
}
```

### è·å–å­¦ä¹ ç»Ÿè®¡

**æ¥å£åœ°å€**: `GET /api/learning/statistics`

**è®¤è¯**: éœ€è¦

**è¯·æ±‚å‚æ•°**:
```
Query Parameters:
  dateRange: string  // æ—¶é—´èŒƒå›´: today/week/month/year
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "totalTime": 3600,        // æ€»å­¦ä¹ æ—¶é—´ï¼ˆç§’ï¼‰
    "totalCount": 100,        // æ€»å­¦ä¹ æ•°é‡
    "correctRate": 85.5,      // æ­£ç¡®ç‡
    "averageScore": 8.5,      // å¹³å‡åˆ†æ•°
    "distribution": {         // åˆ†å¸ƒæƒ…å†µ
      "vocabulary": 40,
      "grammar": 30,
      "reading": 20,
      "listening": 10
    },
    "dailyData": [            // æ¯æ—¥æ•°æ®
      {
        "date": "2026-01-09",
        "count": 10,
        "time": 360
      }
    ]
  }
}
```

---

## é”™è¯¯ç¤ºä¾‹

### æœªç™»å½•

```json
{
  "code": 401,
  "message": "æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

### å‚æ•°é”™è¯¯

```json
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯ï¼šç”¨æˆ·åä¸èƒ½ä¸ºç©º",
  "data": null
}
```

### ä¸šåŠ¡é”™è¯¯

```json
{
  "code": 500,
  "message": "ç”¨æˆ·åå·²å­˜åœ¨",
  "data": null
}
```

---

## è°ƒç”¨ç¤ºä¾‹

### JavaScript (Axios)

```javascript
// ç™»å½•
axios.post('http://localhost:8080/api/auth/login', {
  username: 'admin',
  password: '123456'
})
.then(response => {
  const { satoken, user } = response.data.data
  // ä¿å­˜token
  localStorage.setItem('satoken', satoken)
})

// è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦tokenï¼‰
axios.get('http://localhost:8080/api/auth/info', {
  headers: {
    'satoken': localStorage.getItem('satoken')
  }
})
.then(response => {
  console.log(response.data.data)
})
```

### cURL

```bash
# ç™»å½•
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"123456"}'

# è·å–ç”¨æˆ·ä¿¡æ¯
curl -X GET http://localhost:8080/api/auth/info \
  -H "satoken: your_token_here"
```

---

**æœ€åæ›´æ–°æ—¶é—´**: 2026-02-23
