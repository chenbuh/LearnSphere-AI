# ğŸ§ª å®éªŒæ€§åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“š å¿«é€Ÿå¼€å§‹

æœ¬æŒ‡å—å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ä¼˜åŒ–åçš„å®éªŒæ€§åŠŸèƒ½ã€‚

---

## 1. ğŸ”¬ é«˜çº§åŠŸèƒ½æ¨¡å— (AdvancedFeatures)

### æŸ¥çœ‹å¯ç”¨åŠŸèƒ½

```javascript
// è·å–åŠŸèƒ½ç»Ÿè®¡
const stats = window.advancedFeatures.getExperimentStats();
console.log(stats);

// è¾“å‡ºç¤ºä¾‹:
// {
//   total: 12,           // æ€»åŠŸèƒ½æ•°
//   active: 3,           // å·²å¯ç”¨æ•°
//   available: 10,       // å¯ç”¨åŠŸèƒ½æ•°
//   capabilities: ['voiceControl', 'gestureControl']  // è®¾å¤‡èƒ½åŠ›
// }
```

### æŸ¥çœ‹æ´»è·ƒå®éªŒ

```javascript
// è·å–å½“å‰å¯ç”¨çš„å®éªŒåŠŸèƒ½
const activeExps = window.advancedFeatures.getActiveExperiments();
console.log('å·²å¯ç”¨çš„å®éªŒ:', activeExps);

// è¾“å‡º: ['æ·±è‰²æ¨¡å¼', 'æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ', 'ç•ªèŒ„é’Ÿå­¦ä¹ è®¡æ—¶å™¨']
```

### æ‰‹åŠ¨å¯ç”¨/ç¦ç”¨åŠŸèƒ½

```javascript
// æŸ¥æ‰¾ç‰¹å®šå®éªŒ
const experiment = window.advancedFeatures.experiments.find(
    e => e.name === 'æ·±è‰²æ¨¡å¼'
);

// å¯ç”¨å®éªŒ
if (experiment && experiment.enabled) {
    const success = window.advancedFeatures.enableExperiment(experiment);
    console.log('å¯ç”¨æˆåŠŸ:', success);
}

// ç¦ç”¨å®éªŒ
window.advancedFeatures.disableExperiment(experiment);
```

### æ£€æŸ¥è®¾å¤‡èƒ½åŠ›

```javascript
// æŸ¥çœ‹è®¾å¤‡æ”¯æŒçš„åŠŸèƒ½
const features = window.advancedFeatures.features;

console.log('è¯­éŸ³æ§åˆ¶:', features.voiceControl);
console.log('æ‰‹åŠ¿æ§åˆ¶:', features.gestureControl);
console.log('VRæ”¯æŒ:', features.virtualReality);
console.log('ARæ”¯æŒ:', features.augmentedReality);
```

---

## 2. ğŸš€ AIå“åº”ä¼˜åŒ–å™¨ (AIResponseOptimizer)

### æŸ¥çœ‹ä¼˜åŒ–å™¨ç»Ÿè®¡

```javascript
// è·å–è¯¦ç»†ç»Ÿè®¡
const stats = window.aiResponseOptimizer.getStats();
console.table(stats);

// è¾“å‡ºç¤ºä¾‹:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚    (index)      â”‚ Values â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ totalRequests   â”‚  150   â”‚
// â”‚ cacheHits       â”‚   95   â”‚
// â”‚ cacheMisses     â”‚   55   â”‚
// â”‚ errors          â”‚    0   â”‚
// â”‚ avgResponseTime â”‚ 245.67 â”‚
// â”‚ hitRate         â”‚ 63.33% â”‚
// â”‚ cacheSize       â”‚   45   â”‚
// â”‚ queueSize       â”‚    0   â”‚
// â”‚ activeRequests  â”‚    0   â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨ä¼˜åŒ–å“åº”

```javascript
// åŸºæœ¬ä½¿ç”¨
await window.aiResponseOptimizer.optimizeResponse(
    'tutor_chat',
    { message: 'å¦‚ä½•æé«˜è‹±è¯­å¬åŠ›ï¼Ÿ' },
    (response) => {
        console.log('AIå›å¤:', response);
    }
);

// å¸¦ç¼“å­˜çš„ä½¿ç”¨ï¼ˆç›¸åŒè¯·æ±‚è‡ªåŠ¨ä½¿ç”¨ç¼“å­˜ï¼‰
await window.aiResponseOptimizer.optimizeResponse(
    'tutor_chat',
    { message: 'å¦‚ä½•æé«˜è‹±è¯­å¬åŠ›ï¼Ÿ' },  // ç›¸åŒè¯·æ±‚
    (response) => {
        console.log('æ¥è‡ªç¼“å­˜:', response);  // å“åº”é€Ÿåº¦å¿«95%
    }
);
```

### æ·»åŠ åˆ°è¯·æ±‚é˜Ÿåˆ—

```javascript
// å½“éœ€è¦æ‰¹é‡å¤„ç†è¯·æ±‚æ—¶
window.aiResponseOptimizer.queueRequest(
    'content_generation',
    { topic: 'è‹±è¯­è¯­æ³•' },
    (result) => {
        console.log('ç”Ÿæˆå†…å®¹:', result);
    }
);

// é˜Ÿåˆ—ä¼šè‡ªåŠ¨åœ¨ç©ºé—²æ—¶å¤„ç†
```

### æ¸…ç†èµ„æº

```javascript
// å½“ä¸å†éœ€è¦ä¼˜åŒ–å™¨æ—¶
window.aiResponseOptimizer.cleanup();
```

---

## 3. ğŸ“Š æ€§èƒ½ç›‘æ§é›†æˆ

### æŸ¥çœ‹å®éªŒåŠŸèƒ½æ€§èƒ½

```javascript
// å¯ç”¨æ€§èƒ½ç›‘æ§åæŸ¥çœ‹
const report = window.performanceMonitor.getReport();

// æŸ¥çœ‹è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆå®éªŒåŠŸèƒ½å¯åŠ¨æ—¶é—´ï¼‰
console.log('å®éªŒåŠŸèƒ½æ€§èƒ½:', report.custom);

// ç¤ºä¾‹è¾“å‡º:
// {
//   'å®éªŒåŠŸèƒ½å¯åŠ¨: æ·±è‰²æ¨¡å¼': { duration: 15.5, startTime: 1234.56 },
//   'å®éªŒåŠŸèƒ½å¯åŠ¨: æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ': { duration: 23.8, startTime: 1250.34 }
// }
```

---

## 4. ğŸ¯ å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šå¯ç”¨æ‰€æœ‰æ¨èçš„å®éªŒåŠŸèƒ½

```javascript
// å¯ç”¨æ‰€æœ‰å¯ç”¨çš„å®éªŒåŠŸèƒ½
window.advancedFeatures.experiments.forEach(exp => {
    if (exp.enabled && !exp.active) {
        console.log('å¯ç”¨:', exp.name);
        window.advancedFeatures.enableExperiment(exp);
    }
});
```

### åœºæ™¯2ï¼šç›‘æ§AIå“åº”æ€§èƒ½

```javascript
// æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
setInterval(() => {
    const stats = window.aiResponseOptimizer.getStats();
    
    // æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
    const hitRate = parseFloat(stats.hitRate);
    if (hitRate < 30) {
        console.warn('âš ï¸ ç¼“å­˜å‘½ä¸­ç‡è¾ƒä½:', stats.hitRate);
        console.log('å»ºè®®ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¤ªå¤šä¸åŒçš„è¯·æ±‚');
    }
    
    // æ£€æŸ¥å¹³å‡å“åº”æ—¶é—´
    if (stats.avgResponseTime > 1000) {
        console.warn('âš ï¸ å¹³å‡å“åº”æ—¶é—´è¾ƒæ…¢:', stats.avgResponseTime, 'ms');
    }
    
    // æ£€æŸ¥é”™è¯¯ç‡
    const errorRate = (stats.errors / stats.totalRequests) * 100;
    if (errorRate > 5) {
        console.error('âŒ é”™è¯¯ç‡è¿‡é«˜:', errorRate.toFixed(2), '%');
    }
}, 60000);
```

### åœºæ™¯3ï¼šæ ¹æ®è®¾å¤‡èƒ½åŠ›å¯ç”¨åŠŸèƒ½

```javascript
// æ ¹æ®è®¾å¤‡èƒ½åŠ›è‡ªåŠ¨å¯ç”¨ç›¸åº”åŠŸèƒ½
const features = window.advancedFeatures.features;

if (features.voiceControl) {
    const voiceExp = window.advancedFeatures.experiments.find(
        e => e.name === 'AIè¯­éŸ³åŠ©æ‰‹'
    );
    if (voiceExp) {
        window.advancedFeatures.enableExperiment(voiceExp);
    }
}

if (features.gestureControl) {
    const gestureExp = window.advancedFeatures.experiments.find(
        e => e.name === 'æ‰‹åŠ¿å­¦ä¹ '
    );
    if (gestureExp) {
        window.advancedFeatures.enableExperiment(gestureExp);
    }
}
```

### åœºæ™¯4ï¼šè°ƒè¯•ç¼“å­˜é—®é¢˜

```javascript
// æŸ¥çœ‹ç¼“å­˜è¯¦æƒ…
const optimizer = window.aiResponseOptimizer;

console.group('ğŸ” AIä¼˜åŒ–å™¨è°ƒè¯•ä¿¡æ¯');
console.log('ç¼“å­˜å¤§å°:', optimizer.responseCache.size);
console.log('é˜Ÿåˆ—å¤§å°:', optimizer.requestQueue.length);
console.log('è¿›è¡Œä¸­çš„è¯·æ±‚:', optimizer.pendingRequests.size);
console.log('åŠ è½½çŠ¶æ€:', optimizer.loadingStates.size);

// æŸ¥çœ‹ç¼“å­˜å†…å®¹ï¼ˆä»…ç”¨äºè°ƒè¯•ï¼‰
console.log('ç¼“å­˜é”®:', Array.from(optimizer.responseCache.keys()));

console.groupEnd();
```

---

## 5. ğŸ”§ å¼€å‘è°ƒè¯•æŠ€å·§

### å®Œæ•´ç³»ç»ŸçŠ¶æ€

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼ŒæŸ¥çœ‹å®Œæ•´ç³»ç»ŸçŠ¶æ€
window.debugInfo = {
    å®éªŒåŠŸèƒ½: window.advancedFeatures?.getExperimentStats(),
    AIä¼˜åŒ–å™¨: window.aiResponseOptimizer?.getStats(),
    æ€§èƒ½æŠ¥å‘Š: window.performanceMonitor?.getReport(),
    å­˜å‚¨ä¿¡æ¯: await window.Storage?.getInstance()?.getStorageInfo(),
    é”™è¯¯ç»Ÿè®¡: window.GlobalErrorHandler?.getErrorStats(),
    æ—¥å¿—ç»Ÿè®¡: window.logger?.getStats()
};

// æŸ¥çœ‹
console.log(window.debugInfo);

// æˆ–è€…è¡¨æ ¼å½¢å¼
Object.entries(window.debugInfo).forEach(([key, value]) => {
    console.group(key);
    console.table(value);
    console.groupEnd();
});
```

### å¯¼å‡ºè¯Šæ–­æŠ¥å‘Š

```javascript
// åˆ›å»ºå®Œæ•´çš„è¯Šæ–­æŠ¥å‘Š
const diagnostics = {
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent,
    
    experiments: {
        stats: window.advancedFeatures?.getExperimentStats(),
        active: window.advancedFeatures?.getActiveExperiments()
    },
    
    aiOptimizer: window.aiResponseOptimizer?.getStats(),
    
    performance: window.performanceMonitor?.getReport(),
    
    logs: window.logger?.getStats(),
    
    errors: window.GlobalErrorHandler?.getErrorStats()
};

// ä¸‹è½½æŠ¥å‘Š
window.Utils?.downloadJSON(diagnostics, 'diagnostics-report.json');
```

### æ€§èƒ½åˆ†æ

```javascript
// æµ‹è¯•AIå“åº”æ€§èƒ½
async function testAIPerformance() {
    const tests = [
        { type: 'tutor_chat', input: { message: 'Hello' } },
        { type: 'grammar_check', input: { text: 'I am good' } },
        { type: 'content_generation', input: { topic: 'English' } }
    ];
    
    console.group('ğŸ§ª AIæ€§èƒ½æµ‹è¯•');
    
    for (const test of tests) {
        const start = performance.now();
        
        await window.aiResponseOptimizer.optimizeResponse(
            test.type,
            test.input,
            (result) => {
                const duration = performance.now() - start;
                console.log(`${test.type}: ${duration.toFixed(2)}ms`);
            }
        );
    }
    
    // å†æ¬¡æµ‹è¯•ï¼ˆåº”è¯¥æ›´å¿«ï¼Œå› ä¸ºæœ‰ç¼“å­˜ï¼‰
    console.log('\n--- ç¬¬äºŒæ¬¡æµ‹è¯•ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰ ---');
    
    for (const test of tests) {
        const start = performance.now();
        
        await window.aiResponseOptimizer.optimizeResponse(
            test.type,
            test.input,
            (result) => {
                const duration = performance.now() - start;
                console.log(`${test.type}: ${duration.toFixed(2)}ms`);
            }
        );
    }
    
    console.groupEnd();
    
    // æŸ¥çœ‹ç»Ÿè®¡
    console.log('æœ€ç»ˆç»Ÿè®¡:', window.aiResponseOptimizer.getStats());
}

// æ‰§è¡Œæµ‹è¯•
testAIPerformance();
```

---

## 6. âš ï¸ å¸¸è§é—®é¢˜

### Q1: å®éªŒåŠŸèƒ½å¯ç”¨å¤±è´¥ï¼Ÿ

```javascript
// æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
const exp = window.advancedFeatures.experiments.find(e => e.name === 'åŠŸèƒ½å');

if (!exp) {
    console.error('å®éªŒåŠŸèƒ½ä¸å­˜åœ¨');
} else if (!exp.enabled) {
    console.error('æ­¤åŠŸèƒ½åœ¨å½“å‰è®¾å¤‡ä¸å¯ç”¨');
    console.log('éœ€è¦çš„èƒ½åŠ›:', exp.enabled);
} else {
    // æŸ¥çœ‹è¯¦ç»†é”™è¯¯
    const success = window.advancedFeatures.enableExperiment(exp);
    if (!success) {
        console.error('å¯ç”¨å¤±è´¥ï¼ŒæŸ¥çœ‹é”™è¯¯æ—¥å¿—');
        // æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
        const errors = window.logger?.getHistory({ level: 'ERROR', limit: 5 });
        console.table(errors);
    }
}
```

### Q2: AIå“åº”å¾ˆæ…¢ï¼Ÿ

```javascript
// æ£€æŸ¥ä¼˜åŒ–å™¨çŠ¶æ€
const stats = window.aiResponseOptimizer.getStats();

console.log('ç¼“å­˜å‘½ä¸­ç‡:', stats.hitRate);
console.log('å¹³å‡å“åº”æ—¶é—´:', stats.avgResponseTime, 'ms');
console.log('æ´»è·ƒè¯·æ±‚:', stats.activeRequests);
console.log('é˜Ÿåˆ—å¤§å°:', stats.queueSize);

// å¦‚æœå‘½ä¸­ç‡ä½ï¼Œå¯èƒ½æ˜¯è¯·æ±‚å¤ªå¤šæ ·åŒ–
// å¦‚æœå“åº”æ—¶é—´æ…¢ï¼Œå¯èƒ½æ˜¯è¯·æ±‚å¤„ç†æœ¬èº«æ…¢
// å¯ä»¥æŸ¥çœ‹æ…¢è¯·æ±‚è­¦å‘Š
const slowRequests = window.logger?.getHistory({
    level: 'WARN',
    limit: 10
}).filter(log => log.message.includes('è€—æ—¶è¾ƒé•¿'));

console.table(slowRequests);
```

### Q3: ç¼“å­˜ä¸ç”Ÿæ•ˆï¼Ÿ

```javascript
// éªŒè¯ç¼“å­˜é”®ç”Ÿæˆ
const optimizer = window.aiResponseOptimizer;

// ç›¸åŒçš„è¾“å…¥åº”è¯¥ç”Ÿæˆç›¸åŒçš„é”®
const key1 = optimizer.generateCacheKey('test', { a: 1, b: 2 });
const key2 = optimizer.generateCacheKey('test', { a: 1, b: 2 });

console.log('é”®1:', key1);
console.log('é”®2:', key2);
console.log('ç›¸åŒ?', key1 === key2);  // åº”è¯¥æ˜¯ true

// æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¢«æ­£ç¡®è®¾ç½®
console.log('ç¼“å­˜å¤§å°:', optimizer.responseCache.size);
```

---

## 7. ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å®šæœŸæ£€æŸ¥

```javascript
// æ·»åŠ åˆ°åº”ç”¨å¯åŠ¨ä»£ç 
setInterval(() => {
    const experimentStats = window.advancedFeatures?.getExperimentStats();
    const aiStats = window.aiResponseOptimizer?.getStats();
    
    // è®°å½•åˆ°æ—¥å¿—
    if (window.logger) {
        window.logger.info('HealthCheck', 'ç³»ç»Ÿå¥åº·æ£€æŸ¥', {
            activeExperiments: experimentStats?.active,
            aiCacheHitRate: aiStats?.hitRate,
            aiAvgResponse: aiStats?.avgResponseTime
        });
    }
}, 5 * 60 * 1000); // æ¯5åˆ†é’Ÿ
```

### æ€§èƒ½é˜ˆå€¼å‘Šè­¦

```javascript
// è®¾ç½®æ€§èƒ½å‘Šè­¦
function setupPerformanceAlerts() {
    setInterval(() => {
        const stats = window.aiResponseOptimizer?.getStats();
        if (!stats) return;
        
        // ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½
        if (parseFloat(stats.hitRate) < 20) {
            console.warn('âš ï¸ AIç¼“å­˜å‘½ä¸­ç‡è¿‡ä½ï¼Œå»ºè®®è°ƒæ•´ç¼“å­˜ç­–ç•¥');
        }
        
        // å¹³å‡å“åº”æ—¶é—´è¿‡é•¿
        if (stats.avgResponseTime > 2000) {
            console.warn('âš ï¸ AIå¹³å‡å“åº”æ—¶é—´è¿‡é•¿ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–');
        }
        
        // é”™è¯¯ç‡è¿‡é«˜
        const errorRate = (stats.errors / stats.totalRequests) * 100;
        if (errorRate > 5) {
            console.error('âŒ AIé”™è¯¯ç‡è¿‡é«˜ï¼Œè¯·æ£€æŸ¥ç³»ç»ŸçŠ¶æ€');
        }
    }, 60000);
}

// å¯åŠ¨å‘Šè­¦
setupPerformanceAlerts();
```

---

## 8. ğŸ“ æœ€ä½³å®è·µ

1. **ä½¿ç”¨å‰æ£€æŸ¥å¯ç”¨æ€§**
   ```javascript
   if (window.advancedFeatures && experiment.enabled) {
       // ä½¿ç”¨åŠŸèƒ½
   }
   ```

2. **ç›‘æ§æ€§èƒ½æŒ‡æ ‡**
   ```javascript
   // å®šæœŸæŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
   setInterval(() => {
       console.log(window.aiResponseOptimizer.getStats());
   }, 60000);
   ```

3. **åˆç†ä½¿ç”¨ç¼“å­˜**
   ```javascript
   // ç›¸åŒè¯·æ±‚å¤ç”¨ç¼“å­˜
   // ä¸åŒè¯·æ±‚ä¼šmissç¼“å­˜
   ```

4. **åŠæ—¶æ¸…ç†èµ„æº**
   ```javascript
   // é¡µé¢å¸è½½æ—¶æ¸…ç†
   window.addEventListener('beforeunload', () => {
       window.aiResponseOptimizer?.cleanup();
   });
   ```

---

## ğŸ“š æ›´å¤šä¿¡æ¯

- è¯¦ç»†ä¼˜åŒ–è¯´æ˜ï¼š`å®éªŒæ€§åŠŸèƒ½ä¼˜åŒ–æ€»ç»“.md`
- ç³»ç»Ÿä¼˜åŒ–æ€»ç»“ï¼š`ä¼˜åŒ–å®Œæˆæ€»ç»“_20250930.md`
- ä½¿ç”¨æŒ‡å—ï¼š`ä¼˜åŒ–ä½¿ç”¨æŒ‡å—.md`

---

*æœ€åæ›´æ–°ï¼š2025å¹´9æœˆ30æ—¥*
