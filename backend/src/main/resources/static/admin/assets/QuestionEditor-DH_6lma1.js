import{_ as E,r as T,a1 as k,c as p,o as i,d as t,w as l,e,B as d,g as _,ao as N,ap as C,ak as V,b as m,aI as $,al as g,N as A}from"./index-ZUQ6VXyz.js";import{p as v,q as D,r as P,s as R}from"./Space-B0xu3Oju.js";import{P as f}from"./plus-BdF9TyJ6.js";import{T as b}from"./trash-vn1EJ4oJ.js";import{N as S}from"./Input-DIY420FM.js";const F={class:"question-editor"},G={key:0,class:"empty-state"},L={key:1,class:"questions-list"},j={class:"card-header"},x={class:"q-index"},H={class:"options-section"},K={class:"option-label"},M={__name:"QuestionEditor",props:{value:{type:String,default:"[]"}},emits:["update:value"],setup(O,{emit:w}){const B=O,Q=w,a=T([]);k(()=>B.value,s=>{try{const o=JSON.parse(s||"[]");JSON.stringify(o)!==JSON.stringify(a.value)&&(a.value=Array.isArray(o)?o:[])}catch(o){console.error("Invalid JSON for questions:",o),a.value=[]}},{immediate:!0}),k(a,s=>{Q("update:value",JSON.stringify(s))},{deep:!0});const y=()=>{a.value.push({id:Date.now(),text:"",options:["","","",""],correct:0})},U=s=>{a.value.splice(s,1)},z=s=>{a.value[s].options.push("")},J=(s,o)=>{a.value[s].options.splice(o,1),a.value[s].correct>=a.value[s].options.length&&(a.value[s].correct=0)};return(s,o)=>(i(),p("div",F,[a.value.length===0?(i(),p("div",G,[t(e(D),{description:"暂无题目"},{extra:l(()=>[t(e(d),{type:"primary",dashed:"",onClick:y},{icon:l(()=>[t(e(v),{component:e(f)},null,8,["component"])]),default:l(()=>[o[0]||(o[0]=_(" 添加第一道题 ",-1))]),_:1})]),_:1})])):(i(),p("div",L,[(i(!0),p(N,null,C(a.value,(n,u)=>(i(),V(e(A),{key:u,class:"question-card",size:"small"},{header:l(()=>[m("div",j,[m("span",x,"Q"+g(u+1),1),t(e(S),{value:n.text,"onUpdate:value":c=>n.text=c,placeholder:"输入题目题干...",class:"q-input"},null,8,["value","onUpdate:value"])])]),"header-extra":l(()=>[t(e(d),{text:"",type:"error",onClick:c=>U(u)},{icon:l(()=>[t(e(v),{component:e(b)},null,8,["component"])]),_:1},8,["onClick"])]),default:l(()=>[m("div",H,[t(e(P),{value:n.correct,"onUpdate:value":c=>n.correct=c,name:"correct-answer"},{default:l(()=>[(i(!0),p(N,null,C(n.options,(c,r)=>(i(),p("div",{key:r,class:$(["option-row",{"is-correct":n.correct===r}])},[t(e(R),{value:r,class:"correct-radio",title:"设为正确答案"},null,8,["value"]),m("span",K,g(String.fromCharCode(65+r))+".",1),t(e(S),{value:n.options[r],"onUpdate:value":h=>n.options[r]=h,placeholder:"输入选项内容",size:"small"},null,8,["value","onUpdate:value"]),t(e(d),{text:"",type:"error",size:"tiny",onClick:h=>J(u,r),disabled:n.options.length<=2,class:"del-opt-btn"},{default:l(()=>[t(e(v),{component:e(b)},null,8,["component"])]),_:1},8,["onClick","disabled"])],2))),128))]),_:2},1032,["value","onUpdate:value"]),t(e(d),{dashed:"",size:"small",block:"",class:"add-opt-btn",onClick:c=>z(u)},{icon:l(()=>[t(e(v),{component:e(f)},null,8,["component"])]),default:l(()=>[o[1]||(o[1]=_(" 添加选项 ",-1))]),_:1},8,["onClick"])])]),_:2},1024))),128)),t(e(d),{type:"primary",dashed:"",block:"",class:"add-question-btn",onClick:y},{icon:l(()=>[t(e(v),{component:e(f)},null,8,["component"])]),default:l(()=>[o[2]||(o[2]=_(" 添加题目 ",-1))]),_:1})]))]))}},I=E(M,[["__scopeId","data-v-3c0eac32"]]);export{I as Q};
