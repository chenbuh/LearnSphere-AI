import{X as G,_ as K,a as O,r as s,z as X,an as $,c as z,b as c,d as a,w as o,e as l,B as i,g as y,o as A,ao as H,ap as J,f as Q,N as M,am as W,h as m,n as w}from"./index-ZUQ6VXyz.js";import{P as Y}from"./plus-BdF9TyJ6.js";import{N as Z,a as ee}from"./Tabs-Cju0GC0Y.js";import{S as ae}from"./search-BXEIF-J_.js";import{N as x,i as le,j as te,k as oe}from"./Space-B0xu3Oju.js";import{N as d}from"./Input-DIY420FM.js";import{N as ne,a as p}from"./FormItem-tc1_u1vB.js";import{N as re}from"./Popconfirm-DYvF9uuS.js";import"./Add-DtAJdb8Y.js";import"./get-slot-CI0LBECU.js";const ue=G("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),se={class:"vocabulary-page"},ie={class:"page-header"},de={style:{"margin-top":"16px"}},pe={class:"pagination"},ve={__name:"Vocabulary",setup(fe){const u=O(),h=s(!1),V=s([]),I=s(0),b=s(1),U=s(10),k=s(""),T=s(""),N=s(!1),v=s(!1),g=s(!1),S=s(null),n=s({word:"",phonetic:"",definition:"",translation:"",example:"",exampleTranslation:"",examType:"cet4",difficulty:3,frequency:50}),_=[{label:"全部",value:""},{label:"CET-4",value:"cet4"},{label:"CET-6",value:"cet6"},{label:"IELTS",value:"ielts"},{label:"TOEFL",value:"toefl"},{label:"GRE",value:"gre"}],E=[{title:"ID",key:"id",width:60},{title:"单词",key:"word",width:150},{title:"音标",key:"phonetic",width:120},{title:"翻译",key:"translation",width:200},{title:"考试类型",key:"examType",width:100},{title:"难度",key:"difficulty",width:80},{title:"操作",key:"actions",width:150,render:r=>w(x,null,{default:()=>[w(i,{size:"small",onClick:()=>B(r)},{default:()=>"编辑"}),w(re,{onPositiveClick:()=>D(r.id)},{trigger:()=>w(i,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除吗？"})]})}],f=async()=>{h.value=!0;try{const r=await m.getVocabularyList({page:b.value,size:U.value,keyword:k.value,examType:T.value});V.value=r.data.records,I.value=r.data.total}catch{u.error("获取词汇列表失败")}finally{h.value=!1}},C=()=>{b.value=1,f()},L=r=>{b.value=r,f()},P=()=>{g.value=!1,v.value=!0,n.value={word:"",phonetic:"",definition:"",translation:"",example:"",exampleTranslation:"",examType:"cet4",difficulty:3,frequency:50}},B=r=>{g.value=!0,v.value=!0,n.value={...r}},F=async()=>{try{g.value?(await m.updateVocabulary(n.value.id,n.value),u.success("更新成功")):(await m.addVocabulary(n.value),u.success("添加成功")),v.value=!1,f()}catch{u.error(g.value?"更新失败":"添加失败")}},D=async r=>{try{await m.deleteVocabulary(r),u.success("删除成功"),f()}catch{u.error("删除失败")}},j=async()=>{if(!n.value.word){u.warning("请先输入单词");return}const r=u.loading("AI 正在思考中...",{duration:0});try{const e=await m.generateVocabularyDetails(n.value.id);e.code===200&&(n.value={...e.data},u.success("AI 补全成功"))}catch(e){console.error("AI 补全失败:",e)}finally{r.destroy()}},q=async()=>{N.value=!0;const r=u.loading("正在批量补全数据，请稍候...",{duration:0});try{const e=await m.batchGenerateVocabularyDetails(20);u.success(e.data),f()}catch{u.error("批量补全失败")}finally{r.destroy(),N.value=!1}};return X(()=>{f()}),(r,e)=>{const R=$("n-input-group");return A(),z("div",se,[c("header",ie,[e[14]||(e[14]=c("div",null,[c("h1",null,"词汇库管理"),c("p",null,"管理平台词汇资源")],-1)),a(l(x),null,{default:o(()=>[a(l(i),{loading:N.value,secondary:"",type:"primary",onClick:q},{icon:o(()=>[a(l(ue),{size:16})]),default:o(()=>[e[12]||(e[12]=y(" 批量 AI 补全 (20条) ",-1))]),_:1},8,["loading"]),a(l(i),{type:"primary",onClick:P},{icon:o(()=>[a(l(Y),{size:16})]),default:o(()=>[e[13]||(e[13]=y(" 添加词汇 ",-1))]),_:1})]),_:1})]),a(l(M),{class:"search-card"},{default:o(()=>[a(l(Z),{value:T.value,"onUpdate:value":[e[0]||(e[0]=t=>T.value=t),C],type:"line",animated:""},{default:o(()=>[(A(),z(H,null,J(_,t=>a(l(ee),{key:t.value,name:t.value,tab:t.label},null,8,["name","tab"])),64))]),_:1},8,["value"]),c("div",de,[a(l(x),{align:"center"},{default:o(()=>[a(l(d),{value:k.value,"onUpdate:value":e[1]||(e[1]=t=>k.value=t),placeholder:"搜索单词或翻译",style:{width:"300px"},onKeyup:Q(C,["enter"])},{prefix:o(()=>[a(l(ae),{size:16})]),_:1},8,["value"]),a(l(i),{type:"primary",onClick:C},{default:o(()=>[...e[15]||(e[15]=[y(" 搜索 ",-1)])]),_:1})]),_:1})])]),_:1}),a(l(M),{class:"table-card"},{default:o(()=>[a(l(le),{columns:E,data:V.value,loading:h.value,bordered:!1},null,8,["data","loading"]),c("div",pe,[a(l(te),{page:b.value,"onUpdate:page":[e[2]||(e[2]=t=>b.value=t),L],"page-count":Math.ceil(I.value/U.value)},null,8,["page","page-count"])])]),_:1}),a(l(W),{show:v.value,"onUpdate:show":e[11]||(e[11]=t=>v.value=t),preset:"card",title:g.value?"编辑词汇":"添加词汇",style:{width:"600px"}},{footer:o(()=>[a(l(x),{justify:"end"},{default:o(()=>[a(l(i),{onClick:e[10]||(e[10]=t=>v.value=!1)},{default:o(()=>[...e[17]||(e[17]=[y("取消",-1)])]),_:1}),a(l(i),{type:"primary",onClick:F},{default:o(()=>[...e[18]||(e[18]=[y("确定",-1)])]),_:1})]),_:1})]),default:o(()=>[a(l(ne),{ref_key:"formRef",ref:S,model:n.value,"label-placement":"top"},{default:o(()=>[a(l(p),{label:"单词",path:"word"},{default:o(()=>[a(R,null,{default:o(()=>[a(l(d),{value:n.value.word,"onUpdate:value":e[3]||(e[3]=t=>n.value.word=t),placeholder:"输入单词"},null,8,["value"]),a(l(i),{type:"primary",ghost:"",onClick:j},{default:o(()=>[...e[16]||(e[16]=[y(" AI 补全 ",-1)])]),_:1})]),_:1})]),_:1}),a(l(p),{label:"音标",path:"phonetic"},{default:o(()=>[a(l(d),{value:n.value.phonetic,"onUpdate:value":e[4]||(e[4]=t=>n.value.phonetic=t),placeholder:"输入音标"},null,8,["value"])]),_:1}),a(l(p),{label:"中文翻译",path:"translation"},{default:o(()=>[a(l(d),{value:n.value.translation,"onUpdate:value":e[5]||(e[5]=t=>n.value.translation=t),placeholder:"输入中文翻译",type:"textarea"},null,8,["value"])]),_:1}),a(l(p),{label:"英文释义",path:"definition"},{default:o(()=>[a(l(d),{value:n.value.definition,"onUpdate:value":e[6]||(e[6]=t=>n.value.definition=t),placeholder:"输入英文释义",type:"textarea"},null,8,["value"])]),_:1}),a(l(p),{label:"例句",path:"example"},{default:o(()=>[a(l(d),{value:n.value.example,"onUpdate:value":e[7]||(e[7]=t=>n.value.example=t),placeholder:"输入例句",type:"textarea"},null,8,["value"])]),_:1}),a(l(p),{label:"例句翻译",path:"exampleTranslation"},{default:o(()=>[a(l(d),{value:n.value.exampleTranslation,"onUpdate:value":e[8]||(e[8]=t=>n.value.exampleTranslation=t),placeholder:"输入例句翻译",type:"textarea"},null,8,["value"])]),_:1}),a(l(p),{label:"考试类型",path:"examType"},{default:o(()=>[a(l(oe),{value:n.value.examType,"onUpdate:value":e[9]||(e[9]=t=>n.value.examType=t),options:_.filter(t=>t.value!==null)},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])}}},Ne=K(ve,[["__scopeId","data-v-5b61bee4"]]);export{Ne as default};
