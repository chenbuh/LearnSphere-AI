import{_ as q,a as B,r as o,z as O,c as R,b as r,d as t,w as u,g as h,e as l,B as f,n,N as M,am as F,h as g,o as V}from"./index-ZUQ6VXyz.js";import{P as j}from"./plus-BdF9TyJ6.js";import{S as A,T as J}from"./trash-vn1EJ4oJ.js";import{i as $,j as G,N as x,k as T,l as _}from"./Space-B0xu3Oju.js";import{N as H,a as p}from"./FormItem-tc1_u1vB.js";import{N as k}from"./Input-DIY420FM.js";import{N as K}from"./Popconfirm-DYvF9uuS.js";import"./get-slot-CI0LBECU.js";const Q={class:"speaking-page"},W={class:"page-header"},X={class:"pagination"},Y={style:{display:"flex","justify-content":"flex-end",gap:"12px","margin-top":"24px"}},Z={__name:"Speaking",setup(ee){const v=B(),w=o(!1),N=o([]),b=o(0),y=o(1),S=o(10),d=o(!1),m=o(!1),s=o({id:null,type:"ielts_part1",difficulty:"medium",title:"",question:"",keywords:"[]",tips:"[]"}),z=[{label:"IELTS Part 1",value:"ielts_part1"},{label:"IELTS Part 2",value:"ielts_part2"},{label:"IELTS Part 3",value:"ielts_part3"},{label:"TOEFL Independent",value:"toefl_independent"},{label:"Business English",value:"business"},{label:"Daily Life",value:"daily"}],E=[{label:"简单",value:"easy"},{label:"中等",value:"medium"},{label:"困难",value:"hard"}],L=[{title:"ID",key:"id",width:60},{title:"话题标题",key:"title",width:300},{title:"类型",key:"type",width:150,render:a=>n(_,{type:"info"},{default:()=>a.type})},{title:"难度",key:"difficulty",width:100,render:a=>n(_,{type:a.difficulty==="hard"?"error":a.difficulty==="medium"?"warning":"success"},{default:()=>a.difficulty})},{title:"创建时间",key:"createTime",width:180,render:a=>a.createTime?new Date(a.createTime).toLocaleString("zh-CN"):"-"},{title:"操作",key:"actions",width:120,render:a=>n(x,null,{default:()=>[n(f,{size:"small",type:"primary",ghost:!0,onClick:()=>C(a)},{default:()=>n(A,{size:14})}),n(K,{onPositiveClick:()=>I(a.id)},{trigger:()=>n(f,{size:"small",type:"error",ghost:!0},{default:()=>n(J,{size:14})}),default:()=>"确定要删除此口语话题吗？"})]})}],c=async()=>{w.value=!0;try{const a=await g.getSpeakingList({page:y.value,size:S.value});N.value=a.data.records,b.value=a.data.total}catch{v.error("加载数据失败")}finally{w.value=!1}},P=()=>{m.value=!1,s.value={id:null,type:"ielts_part1",difficulty:"medium",title:"",question:"",keywords:"[]",tips:"[]"},d.value=!0},C=a=>{m.value=!0,s.value={...a},d.value=!0},I=async a=>{try{await g.deleteSpeaking(a),v.success("删除成功"),c()}catch{v.error("删除失败")}},U=async()=>{try{m.value?await g.updateSpeaking(s.value.id,s.value):await g.addSpeaking(s.value),v.success("保存成功"),d.value=!1,c()}catch{v.error("保存失败")}},D=a=>{y.value=a,c()};return O(()=>{c()}),(a,e)=>(V(),R("div",Q,[r("header",W,[e[10]||(e[10]=r("div",null,[r("h1",null,"口语话题管理"),r("p",null,"管理 IELTS、TOEFL 等口语练习话题")],-1)),t(l(f),{type:"primary",onClick:P},{icon:u(()=>[t(l(j))]),default:u(()=>[e[9]||(e[9]=h(" 添加话题 ",-1))]),_:1})]),t(l(M),{class:"content-card"},{default:u(()=>[t(l($),{columns:L,data:N.value,loading:w.value,bordered:!1,"single-line":!1},null,8,["data","loading"]),r("div",X,[t(l(G),{page:y.value,"onUpdate:page":[e[0]||(e[0]=i=>y.value=i),D],"page-count":Math.ceil(b.value/S.value),"show-size-picker":""},null,8,["page","page-count"])])]),_:1}),t(l(F),{show:d.value,"onUpdate:show":e[8]||(e[8]=i=>d.value=i),preset:"card",title:m.value?"编辑口语话题":"添加口语话题",style:{width:"800px"}},{default:u(()=>[t(l(H),{model:s.value,"label-placement":"top"},{default:u(()=>[t(l(p),{label:"话题标题",path:"title"},{default:u(()=>[t(l(k),{value:s.value.title,"onUpdate:value":e[1]||(e[1]=i=>s.value.title=i),placeholder:"输入话题标题"},null,8,["value"])]),_:1}),t(l(x),{"item-style":"flex: 1"},{default:u(()=>[t(l(p),{label:"口语类型",path:"type"},{default:u(()=>[t(l(T),{value:s.value.type,"onUpdate:value":e[2]||(e[2]=i=>s.value.type=i),options:z},null,8,["value"])]),_:1}),t(l(p),{label:"难度",path:"difficulty"},{default:u(()=>[t(l(T),{value:s.value.difficulty,"onUpdate:value":e[3]||(e[3]=i=>s.value.difficulty=i),options:E},null,8,["value"])]),_:1})]),_:1}),t(l(p),{label:"详细问题/话题描述",path:"question"},{default:u(()=>[t(l(k),{value:s.value.question,"onUpdate:value":e[4]||(e[4]=i=>s.value.question=i),type:"textarea",placeholder:"输入详细的口语问题或话题描述",autosize:{minRows:3,maxRows:8}},null,8,["value"])]),_:1}),t(l(p),{label:"关键词 (JSON数组)",path:"keywords"},{default:u(()=>[t(l(k),{value:s.value.keywords,"onUpdate:value":e[5]||(e[5]=i=>s.value.keywords=i),type:"textarea",placeholder:'例如: ["travel", "adventure", "culture"]',autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1}),t(l(p),{label:"提示/建议 (JSON数组)",path:"tips"},{default:u(()=>[t(l(k),{value:s.value.tips,"onUpdate:value":e[6]||(e[6]=i=>s.value.tips=i),type:"textarea",placeholder:'例如: ["使用过去时态", "描述细节"]',autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1}),r("div",Y,[t(l(f),{onClick:e[7]||(e[7]=i=>d.value=!1)},{default:u(()=>[...e[11]||(e[11]=[h("取消",-1)])]),_:1}),t(l(f),{type:"primary",onClick:U},{default:u(()=>[...e[12]||(e[12]=[h("确定保存",-1)])]),_:1})])]),_:1},8,["model"])]),_:1},8,["show","title"])]))}},de=q(Z,[["__scopeId","data-v-08e297cf"]]);export{de as default};
