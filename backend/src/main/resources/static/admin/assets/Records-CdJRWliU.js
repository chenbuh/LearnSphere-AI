import{_ as N,a as T,r as l,z as x,c as C,b as o,d as s,w as u,e as n,N as g,h as z,n as m,o as I}from"./index-ZUQ6VXyz.js";import{N as D,k as M,i as S,j as R,l as f}from"./Space-B0xu3Oju.js";import"./Input-DIY420FM.js";import"./get-slot-CI0LBECU.js";const B={class:"records-page"},L={class:"pagination"},P={__name:"Records",setup(U){const h=T(),c=l(!1),p=l([]),v=l(0),r=l(1),y=l(10),i=l(null),_=[{label:"全部",value:null},{label:"词汇",value:"vocabulary"},{label:"语法",value:"grammar"},{label:"阅读",value:"reading"}],k=[{title:"ID",key:"id",width:60},{title:"用户ID",key:"userId",width:80},{title:"内容类型",key:"contentType",width:100,render:e=>{const a={vocabulary:{text:"词汇",type:"info"},grammar:{text:"语法",type:"success"},reading:{text:"阅读",type:"warning"}}[e.contentType]||{text:e.contentType,type:"default"};return m(f,{type:a.type,size:"small"},{default:()=>a.text})}},{title:"内容ID",key:"contentId",width:80},{title:"是否正确",key:"isCorrect",width:100,render:e=>m(f,{type:e.isCorrect===1?"success":"error",size:"small"},{default:()=>e.isCorrect===1?"正确":"错误"})},{title:"得分",key:"score",width:80},{title:"耗时(秒)",key:"timeSpent",width:100},{title:"掌握程度",key:"masteryLevel",width:100},{title:"学习时间",key:"createTime",width:180,render:e=>e.createTime?new Date(e.createTime).toLocaleString("zh-CN"):"-"}],d=async()=>{c.value=!0;try{const e=await z.getLearningRecords({page:r.value,size:y.value,contentType:i.value});p.value=e.data.records,v.value=e.data.total}catch{h.error("获取学习记录失败")}finally{c.value=!1}},w=e=>{r.value=e,d()},b=()=>{r.value=1,d()};return x(()=>{d()}),(e,t)=>(I(),C("div",B,[t[2]||(t[2]=o("header",{class:"page-header"},[o("div",null,[o("h1",null,"学习记录"),o("p",null,"查看用户学习数据统计")])],-1)),s(n(g),{class:"filter-card"},{default:u(()=>[s(n(D),{align:"center"},{default:u(()=>[s(n(M),{value:i.value,"onUpdate:value":[t[0]||(t[0]=a=>i.value=a),b],options:_,placeholder:"内容类型",style:{width:"150px"}},null,8,["value"])]),_:1})]),_:1}),s(n(g),{class:"table-card"},{default:u(()=>[s(n(S),{columns:k,data:p.value,loading:c.value,bordered:!1},null,8,["data","loading"]),o("div",L,[s(n(R),{page:r.value,"onUpdate:page":[t[1]||(t[1]=a=>r.value=a),w],"page-count":Math.ceil(v.value/y.value)},null,8,["page","page-count"])])]),_:1})]))}},F=N(P,[["__scopeId","data-v-5c3b8fe0"]]);export{F as default};
