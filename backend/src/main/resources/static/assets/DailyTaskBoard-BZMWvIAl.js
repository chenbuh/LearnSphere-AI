import{a6 as Q,r as f,S as Y,j as k,I as i,z as l,F as e,p as b,X as r,u as o,s as n,q as u,K as N,H as d,a1 as v,J as M,a2 as R,a3 as y,aD as ee,a4 as C,aE as te,ad as se,ae,as as oe,aF as le}from"./naive-ui-CN0IOFzZ.js";import{_ as ne,u as re,b as ie,s as A}from"./index-CZUTEx94.js";import{F as V,A as de,v as S,u as T,T as $,n as ce,i as I,Z as E,s as H,b as ue,x as ge}from"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";const pe={class:"daily-task-board"},me={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 animate-fade-in-down"},xe={class:"text-3xl font-black text-white flex items-center gap-3 mb-2"},fe={class:"text-gray-400"},be={class:"mt-4 md:mt-0 flex gap-4"},ve={class:"glass-pill"},ye={class:"glass-pill"},we={class:"font-bold text-white"},he={class:"relative z-20"},_e={key:0,class:"empty-state-glass"},ke={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ce={class:"lg:col-span-2 space-y-6"},Te={class:"week-strip-glass p-4 rounded-2xl flex justify-between items-center mb-6"},ze={key:1},De={class:"flex items-center justify-between mb-4"},je={class:"text-xl font-bold text-white flex items-center gap-2"},Ne={class:"text-sm text-gray-400"},Se={class:"space-y-4"},Be={class:"p-5 w-full flex items-center gap-5 relative z-10"},Pe={class:"flex-1 min-w-0"},Fe={class:"flex flex-wrap items-center gap-2 mb-1"},Le={class:"flex items-center gap-4 text-sm"},Me={class:"text-gray-400 flex items-center gap-1.5"},Re={key:0,class:"text-green-500 flex items-center gap-1"},Ae={class:"shrink-0"},Ve={key:1,class:"w-10 h-10 rounded-full bg-green-500/20 text-green-500 flex items-center justify-center animate-bounce-in border border-green-500/30"},$e={key:0,class:"text-center py-20 bg-white/5 rounded-3xl border border-white/5"},Ie={class:"w-20 h-20 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4"},Ee={class:"space-y-6"},He={class:"stat-glass-card relative overflow-hidden group"},Ze={class:"flex items-center justify-center relative mb-8"},qe={class:"text-center"},Ge={class:"text-4xl font-black text-white block"},Je={class:"grid grid-cols-2 gap-4"},Ke={class:"bg-white/5 rounded-xl p-3 text-center"},Oe={class:"text-2xl font-bold text-white"},Ue={class:"bg-white/5 rounded-xl p-3 text-center"},We={class:"text-2xl font-bold text-white"},Xe={key:0,class:"mt-6 flex items-center justify-center gap-2 text-yellow-400 font-bold bg-yellow-500/10 py-3 rounded-xl animate-pulse"},Qe={class:"stat-glass-card p-6 bg-gradient-to-br from-indigo-500/10 to-purple-500/10"},Ye={class:"flex items-start gap-4"},et={class:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center shrink-0"},tt={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center"},st={class:"relative bg-[#0f172a] border border-purple-500/30 p-10 rounded-3xl shadow-2xl text-center animate-scale-up max-w-sm mx-4"},at={class:"absolute -top-12 left-1/2 transform -translate-x-1/2"},ot={class:"w-24 h-24 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/30 animate-bounce"},lt={class:"mt-10"},nt={class:"flex items-center justify-center gap-2 mb-8 p-4 bg-white/5 rounded-2xl"},rt={class:"text-xl font-bold text-white"},it={__name:"DailyTaskBoard",setup(dt){const B=re(),P=Q(),Z=ie(),w=f(!1),z=f(null),g=f([]);f(null);const F=f([]),q=async()=>{w.value=!0;try{const a=await A.getCurrentPlan();if(z.value=a.data,z.value){const t=await A.getTodayTasks();g.value=t.data||[]}G()}catch(a){console.error("[StudyPlan] Load failed:",a),P.error("åŠ è½½å­¦ä¹ æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{w.value=!1}},G=()=>{const a=[],t=new Date,s=t.getDay()||7,x=new Date(t);x.setDate(t.getDate()-s+1);for(let h=0;h<7;h++){const p=new Date(x);p.setDate(x.getDate()+h);const L=p.toDateString()===t.toDateString(),X=p<t;let _="future";L?_="current":X&&(_=h%2===0?"done":"missed"),p>t&&(_="future"),a.push({date:p,dayName:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][p.getDay()],dayNum:p.getDate(),status:L?"current":_==="done"?"done":"future"})}F.value=a};Y(()=>{q()});const J=a=>{const s={vocabulary:"/vocabulary",reading:"/reading",listening:"/listening",grammar:"/grammar",writing:"/writing",speaking:"/speaking"}[a.taskType];s?B.push(s):P.warning("è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­")},c=k(()=>{if(!g.value.length)return{total:0,completed:0,remaining:0};const a=g.value.filter(t=>t.isCompleted).length;return{total:g.value.length,completed:a,remaining:g.value.length-a}}),D=k(()=>c.value.total===0?0:Math.round(c.value.completed/c.value.total*100)),K=k(()=>new Date().toLocaleDateString("zh-CN",{month:"long",day:"numeric",weekday:"long"})),O=k(()=>{const a=new Date().getHours();return a<6?"å¤œæ·±äº†":a<12?"æ—©ä¸Šå¥½":a<14?"ä¸­åˆå¥½":a<18?"ä¸‹åˆå¥½":"æ™šä¸Šå¥½"}),U=a=>({vocabulary:ue,reading:S,listening:E,grammar:T,writing:H,speaking:V})[a]||ge,m=a=>({vocabulary:"#10b981",reading:"#3b82f6",listening:"#f59e0b",grammar:"#8b5cf6",writing:"#ef4444",speaking:"#f97316"})[a]||"#71717a",W=a=>({vocabulary:"è¯æ±‡",reading:"é˜…è¯»",listening:"å¬åŠ›",grammar:"è¯­æ³•",writing:"å†™ä½œ",speaking:"å£è¯­"})[a]||"é€šç”¨",j=f(!1);return(a,t)=>(l(),i("div",pe,[e("header",me,[e("div",null,[e("h1",xe,[e("span",null,r(O.value)+"ï¼Œ"+r(o(Z).nickname||"å­¦ä¹ è€…"),1),t[3]||(t[3]=e("span",{class:"text-2xl animate-wave"},"ğŸ‘‹",-1))]),e("p",fe," ä»Šå¤©æ˜¯ "+r(K.value)+"ï¼Œä¿æŒä¸“æ³¨ï¼Œç»§ç»­å‰è¿›ï¼ ",1)]),e("div",be,[e("div",ve,[n(o(V),{class:"text-orange-500",size:18}),t[4]||(t[4]=e("span",{class:"font-bold text-white"},"3 å¤©è¿èƒœ",-1))]),e("div",ye,[n(o(de),{class:"text-yellow-400",size:18}),e("span",we,r(c.value.completed*50)+" ç§¯åˆ†",1)])])]),e("div",he,[n(o(oe),{show:w.value},{default:u(()=>[!z.value&&!w.value?(l(),i("div",_e,[n(o(S),{size:64,class:"text-gray-600 mb-6"}),t[6]||(t[6]=e("h3",{class:"text-xl font-bold text-white mb-2"},"æš‚æ— å­¦ä¹ è®¡åˆ’",-1)),t[7]||(t[7]=e("p",{class:"text-gray-400 mb-8"},"åˆ¶å®šä¸€ä¸ªç§‘å­¦çš„è®¡åˆ’æ˜¯æˆåŠŸçš„å¼€å§‹",-1)),n(o(N),{type:"primary",size:"large",round:"",class:"glow-button",onClick:t[0]||(t[0]=s=>o(B).push("/study-plan/create"))},{default:u(()=>[...t[5]||(t[5]=[d(" ç«‹å³åˆ›å»ºè®¡åˆ’ ",-1)])]),_:1})])):(l(),i("div",ke,[e("div",Ce,[e("div",Te,[(l(!0),i(M,null,R(F.value,(s,x)=>(l(),i("div",{key:x,class:y(["day-item flex flex-col items-center gap-2 p-2 rounded-xl transition-all duration-300",{"bg-violet-600 shadow-lg glow-active":s.status==="current","bg-white/5":s.status!=="current"}])},[e("span",{class:y(["text-xs font-medium",s.status==="current"?"text-white":"text-gray-400"])},r(s.dayName),3),e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border",{"border-transparent bg-white text-violet-700":s.status==="current","border-green-500/30 bg-green-500/10 text-green-500":s.status==="done","border-transparent text-gray-500":s.status==="future"}])},[s.status==="done"?(l(),b(o(T),{key:0,size:14})):(l(),i("span",ze,r(s.dayNum),1))],2)],2))),128))]),e("div",De,[e("h2",je,[n(o($),{class:"text-violet-400"}),t[8]||(t[8]=d(" ä»Šæ—¥ä»»åŠ¡ ",-1))]),e("span",Ne,r(c.value.completed)+"/"+r(c.value.total)+" å®Œæˆ",1)]),e("div",Se,[n(ee,{name:"list"},{default:u(()=>[(l(!0),i(M,null,R(g.value,s=>(l(),i("div",{key:s.id,class:y(["task-card group",{completed:s.isCompleted}])},[e("div",{class:"absolute left-0 top-0 bottom-0 w-1 transition-colors duration-300",style:C({backgroundColor:s.isCompleted?"#3f3f46":m(s.taskType)})},null,4),e("div",Be,[e("div",{class:"w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 transition-all duration-300 relative overflow-hidden",style:C({backgroundColor:s.isCompleted?"#27272a":m(s.taskType)+"15",color:s.isCompleted?"#71717a":m(s.taskType)})},[(l(),b(te(U(s.taskType)),{size:24,class:"relative z-10"})),e("div",{class:"absolute inset-0 opacity-20",style:C({backgroundColor:m(s.taskType)})},null,4)],4),e("div",Pe,[e("div",Fe,[e("h3",{class:y(["text-lg font-bold text-white truncate transition-colors",{"text-gray-500 line-through":s.isCompleted}])},r(s.taskName),3),s.isCompleted?v("",!0):(l(),b(o(se),{key:0,size:"small",round:"",bordered:!1,style:C({backgroundColor:m(s.taskType)+"20",color:m(s.taskType)})},{default:u(()=>[d(r(W(s.taskType)),1)]),_:2},1032,["style"]))]),e("div",Le,[e("span",Me,[n(o($),{size:14}),d(" ç›®æ ‡: "+r(s.targetCount),1)]),s.isCompleted?(l(),i("span",Re,[n(o(T),{size:14}),t[9]||(t[9]=d(" å·²å®Œæˆ ",-1))])):v("",!0)])]),e("div",Ae,[s.isCompleted?(l(),i("div",Ve,[n(o(T),{size:20,"stroke-width":"3"})])):(l(),b(o(N),{key:0,color:"#8b5cf6",class:"action-btn",round:"",size:"large",onClick:x=>J(s)},{icon:u(()=>[n(o(ce),{size:18})]),default:u(()=>[t[10]||(t[10]=e("span",{class:"font-bold"},"å¼€å§‹å­¦ä¹ ",-1))]),_:1},8,["onClick"]))])])],2))),128))]),_:1})]),g.value.length===0?(l(),i("div",$e,[e("div",Ie,[n(o(S),{size:32,class:"text-gray-500"})]),t[11]||(t[11]=e("p",{class:"text-gray-400"},"ä»Šæ—¥æš‚æ— ä»»åŠ¡ï¼Œä¼‘æ¯ä¸€ä¸‹å§ â˜•ï¸",-1))])):v("",!0)]),e("div",Ee,[e("div",He,[t[17]||(t[17]=e("div",{class:"absolute top-0 right-0 p-32 bg-purple-600/20 blur-3xl -mr-16 -mt-16 pointer-events-none transition-all duration-500 group-hover:bg-purple-600/30"},null,-1)),t[18]||(t[18]=e("h3",{class:"text-gray-400 font-bold uppercase text-xs tracking-wider mb-6"},"ä»Šæ—¥å®Œæˆåº¦",-1)),e("div",Ze,[n(o(ae),{type:"circle",percentage:D.value,color:"#8b5cf6","rail-color":"rgba(255, 255, 255, 0.1)","stroke-width":10,size:160},{default:u(()=>[e("div",qe,[e("span",Ge,[d(r(D.value),1),t[12]||(t[12]=e("span",{class:"text-lg opacity-60"},"%",-1))]),t[13]||(t[13]=e("span",{class:"text-gray-400 text-xs mt-1 block"},"è¿›åº¦",-1))])]),_:1},8,["percentage"])]),e("div",Je,[e("div",Ke,[e("div",Oe,r(c.value.completed),1),t[14]||(t[14]=e("div",{class:"text-xs text-gray-500 uppercase mt-1"},"å·²å®Œæˆ",-1))]),e("div",Ue,[e("div",We,r(c.value.remaining),1),t[15]||(t[15]=e("div",{class:"text-xs text-gray-500 uppercase mt-1"},"å¾…å®Œæˆ",-1))])]),D.value===100?(l(),i("div",Xe,[n(o(I),{size:20}),t[16]||(t[16]=d(" å…¨éƒ¨å®Œæˆ! ",-1))])):v("",!0)]),e("div",Qe,[e("div",Ye,[e("div",et,[n(o(E),{class:"text-indigo-400",size:20})]),t[19]||(t[19]=e("div",null,[e("h4",{class:"text-white font-bold mb-1"},"æ¯æ—¥ä¸€å¥"),e("p",{class:"text-gray-400 text-sm leading-relaxed italic"},[d(' "The journey of a thousand miles begins with one step." '),e("br"),e("span",{class:"text-gray-500 not-italic mt-1 block"},"- Lao Tzu")])],-1))])])])]))]),_:1},8,["show"])]),(l(),b(le,{to:"body"},[j.value?(l(),i("div",tt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t[1]||(t[1]=s=>j.value=!1)}),e("div",st,[e("div",at,[e("div",ot,[n(o(I),{size:48,class:"text-white"})])]),e("div",lt,[t[21]||(t[21]=e("h2",{class:"text-3xl font-black text-white mb-2 bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-yellow-500"}," å¤ªæ£’äº†! ",-1)),t[22]||(t[22]=e("p",{class:"text-gray-400 mb-8"},[d(" ä½ å®Œæˆäº†ä»Šå¤©æ‰€æœ‰çš„ä»»åŠ¡ï¼"),e("br"),d("ç¦»ç›®æ ‡åˆè¿‘äº†ä¸€æ­¥ã€‚ ")],-1)),e("div",nt,[n(o(H),{class:"text-yellow-400",fill:"currentColor"}),e("span",rt,"+"+r(c.value.total*50)+" ç§¯åˆ†",1)]),n(o(N),{type:"primary",size:"large",round:"",class:"w-full bg-gradient-to-r from-violet-600 to-indigo-600 border-none hover:shadow-lg transition-all",onClick:t[2]||(t[2]=s=>j.value=!1)},{default:u(()=>[...t[20]||(t[20]=[d(" ç»§ç»­ä¿æŒ ",-1)])]),_:1})])])])):v("",!0)]))]))}},mt=ne(it,[["__scopeId","data-v-93c9f077"]]);export{mt as default};
