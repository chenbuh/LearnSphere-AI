import{_ as q}from"./index-CZUTEx94.js";import{a6 as X,r as c,b as K,l as n,I as f,z as p,s,q as a,F as b,H as _,X as T,J as P,a2 as $,p as Q}from"./naive-ui-CN0IOFzZ.js";import"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";const W={class:"debug-container"},Y={class:"status-info"},Z={class:"logs-container"},ee={class:"log-message"},te={key:1},se={__name:"DebugTest",setup(ae){const i=X(),S=c(!1),w=c(!1),k=c(!1),O=c(!1),g=K({type:"default",text:"æœªæµ‹è¯•"}),m=c("http://localhost:8080/api/diagnostic/ping"),h=c("GET"),z=[{label:"GET",value:"GET"},{label:"POST",value:"POST"}],r=c("ç­‰å¾…æµ‹è¯•..."),v=c([]),o=c([]),l=(e,t="info")=>{v.value.unshift({time:new Date().toLocaleTimeString(),message:e,type:t}),v.value.length>50&&(v.value=v.value.slice(0,50))},x=e=>{o.value=[],e.includes("ç½‘ç»œ")&&(o.value.push("æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆIDEAä¸­è¿è¡ŒLearnSphereApplicationï¼‰"),o.value.push("ç¡®è®¤ç«¯å£8080æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨"),o.value.push("æ£€æŸ¥é˜²ç«å¢™è®¾ç½®")),e.includes("500")&&(o.value.push("æŸ¥çœ‹IDEAæ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯æ—¥å¿—"),o.value.push("æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®"),o.value.push("å°è¯•ä½¿ç”¨DebugApplicationå¯åŠ¨ï¼ˆæ’é™¤æ•°æ®åº“ä¾èµ–ï¼‰")),e.includes("404")&&(o.value.push("æ£€æŸ¥æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®"),o.value.push("ç¡®è®¤æ§åˆ¶å™¨æ˜¯å¦æ­£ç¡®æ³¨å†Œ"))},C=async()=>{S.value=!0,l("å¼€å§‹Pingæµ‹è¯•...");try{const e=await fetch("http://localhost:8080/api/diagnostic/ping",{method:"GET",timeout:5e3});if(e.ok){const t=await e.text();r.value=JSON.stringify({status:e.status,statusText:e.statusText,data:t},null,2),g.type="success",g.text="è¿æ¥æ­£å¸¸",l("Pingæµ‹è¯•æˆåŠŸ","success"),i.success("åç«¯è¿æ¥æ­£å¸¸")}else throw new Error(`HTTP ${e.status}: ${e.statusText}`)}catch(e){r.value=JSON.stringify({error:e.message},null,2),g.type="error",g.text="è¿æ¥å¤±è´¥",l(`Pingæµ‹è¯•å¤±è´¥: ${e.message}`,"error"),x(e.message),i.error("åç«¯è¿æ¥å¤±è´¥")}finally{S.value=!1}},D=async()=>{w.value=!0,l("æ£€æŸ¥ç³»ç»ŸçŠ¶æ€...");try{const t=await(await fetch("http://localhost:8080/api/diagnostic/status")).json();r.value=JSON.stringify(t,null,2),l("ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å®Œæˆ","success"),i.success("ç³»ç»ŸçŠ¶æ€è·å–æˆåŠŸ")}catch(e){r.value=JSON.stringify({error:e.message},null,2),l(`ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å¤±è´¥: ${e.message}`,"error"),x(e.message),i.error("ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å¤±è´¥")}finally{w.value=!1}},j=async()=>{k.value=!0,l("æµ‹è¯•åŸå§‹å¥åº·æ£€æŸ¥æ¥å£...");try{const t=await(await fetch("http://localhost:8080/api/health/check")).json();r.value=JSON.stringify(t,null,2),l("åŸå§‹å¥åº·æ£€æŸ¥å®Œæˆ","success"),i.success("å¥åº·æ£€æŸ¥æˆåŠŸ")}catch(e){r.value=JSON.stringify({error:e.message},null,2),l(`å¥åº·æ£€æŸ¥å¤±è´¥: ${e.message}`,"error"),x(e.message),i.error("å¥åº·æ£€æŸ¥å¤±è´¥")}finally{k.value=!1}},U=async()=>{if(!m.value){i.warning("è¯·è¾“å…¥æµ‹è¯•URL");return}O.value=!0,l(`è‡ªå®šä¹‰æµ‹è¯•: ${h.value} ${m.value}`);try{const e=await fetch(m.value,{method:h.value});let t;const d=e.headers.get("content-type");d&&d.includes("application/json")?t=await e.json():t=await e.text(),r.value=JSON.stringify({status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries()),data:t},null,2),l("è‡ªå®šä¹‰æµ‹è¯•å®Œæˆ","success"),i.success("æµ‹è¯•å®Œæˆ")}catch(e){r.value=JSON.stringify({error:e.message},null,2),l(`è‡ªå®šä¹‰æµ‹è¯•å¤±è´¥: ${e.message}`,"error"),x(e.message),i.error("æµ‹è¯•å¤±è´¥")}finally{O.value=!1}};return(e,t)=>{const d=n("n-button"),N=n("n-space"),A=n("n-divider"),E=n("n-tag"),y=n("n-card"),B=n("n-input"),L=n("n-form-item"),G=n("n-select"),I=n("n-form"),H=n("n-code"),J=n("n-tab-pane"),R=n("n-tabs"),V=n("n-alert"),F=n("n-text");return p(),f("div",W,[s(y,{title:"ğŸ”§ åç«¯è°ƒè¯•æµ‹è¯•",class:"debug-card"},{default:a(()=>[s(N,{vertical:"",size:"large"},{default:a(()=>[s(y,{title:"è¿æ¥æµ‹è¯•",size:"small"},{default:a(()=>[s(N,null,{default:a(()=>[s(d,{type:"primary",onClick:C,loading:S.value},{default:a(()=>[...t[2]||(t[2]=[_(" Pingæµ‹è¯• ",-1)])]),_:1},8,["loading"]),s(d,{onClick:D,loading:w.value},{default:a(()=>[...t[3]||(t[3]=[_(" ç³»ç»ŸçŠ¶æ€ ",-1)])]),_:1},8,["loading"]),s(d,{onClick:j,loading:k.value},{default:a(()=>[...t[4]||(t[4]=[_(" åŸå§‹å¥åº·æ£€æŸ¥ ",-1)])]),_:1},8,["loading"])]),_:1}),s(A),b("div",Y,[s(E,{type:g.type},{default:a(()=>[_(T(g.text),1)]),_:1},8,["type"])])]),_:1}),s(y,{title:"æ‰‹åŠ¨æµ‹è¯•",size:"small"},{default:a(()=>[s(I,{inline:""},{default:a(()=>[s(L,{label:"æ¥å£åœ°å€"},{default:a(()=>[s(B,{value:m.value,"onUpdate:value":t[0]||(t[0]=u=>m.value=u),placeholder:"è¾“å…¥å®Œæ•´URL",style:{width:"300px"}},null,8,["value"])]),_:1}),s(L,{label:"è¯·æ±‚æ–¹æ³•"},{default:a(()=>[s(G,{value:h.value,"onUpdate:value":t[1]||(t[1]=u=>h.value=u),options:z,style:{width:"100px"}},null,8,["value"])]),_:1}),s(L,null,{default:a(()=>[s(d,{onClick:U,loading:O.value},{default:a(()=>[...t[5]||(t[5]=[_(" æµ‹è¯• ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),s(y,{title:"æµ‹è¯•ç»“æœ",size:"small"},{default:a(()=>[s(R,null,{default:a(()=>[s(J,{name:"result",tab:"å“åº”ç»“æœ"},{default:a(()=>[s(H,{code:r.value,language:"json"},null,8,["code"])]),_:1}),s(J,{name:"logs",tab:"æµ‹è¯•æ—¥å¿—"},{default:a(()=>[b("div",Z,[(p(!0),f(P,null,$(v.value,(u,M)=>(p(),f("div",{key:M,class:"log-item"},[s(E,{type:u.type,size:"small"},{default:a(()=>[_(T(u.time),1)]),_:2},1032,["type"]),b("span",ee,T(u.message),1)]))),128))])]),_:1})]),_:1})]),_:1}),s(y,{title:"è°ƒè¯•å»ºè®®",size:"small"},{default:a(()=>[o.value.length>0?(p(),Q(V,{key:0,type:"info"},{default:a(()=>[b("ul",null,[(p(!0),f(P,null,$(o.value,u=>(p(),f("li",{key:u},T(u),1))),128))])]),_:1})):(p(),f("div",te,[s(F,{depth:"3"},{default:a(()=>[...t[6]||(t[6]=[_("è¿è¡Œæµ‹è¯•åä¼šæ˜¾ç¤ºè°ƒè¯•å»ºè®®",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1})])}}},ie=q(se,[["__scopeId","data-v-aa417e1a"]]);export{ie as default};
