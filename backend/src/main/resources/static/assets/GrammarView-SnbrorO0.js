import{a as Se}from"./ai-sA4E8Qum.js";import{e as Ye,_ as Ee,l as et}from"./index-CZUTEx94.js";import{r as M,I as y,z as d,F as s,s as r,u as l,aN as ve,J,a2 as te,a6 as Ue,j as le,w as ye,q as b,a1 as U,L as se,X as C,a0 as qe,ad as ge,H as Q,a3 as de,ab as tt,ar as at,at as st,K as ne,n as nt,S as ot,aO as lt,l as rt,$ as ce,U as me,a4 as Ne,_ as Te,p as ue,au as it,V as Oe,ae as ct}from"./naive-ui-CN0IOFzZ.js";import{E as je,I as Ie,J as ut,X as dt,K as vt,c as ft,U as ht,N as pt,p as mt,O as gt,Q as yt,W as bt,Y as _t,_ as wt,$ as De,Z as Re,y as Mt,m as kt,a0 as Ct,b as Le,i as xt,A as Tt,T as Ve,s as It,a1 as St,d as zt,a2 as Et}from"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";var Pe={};(function W(m,w,D,R){var g=!!(m.Worker&&m.Blob&&m.Promise&&m.OffscreenCanvas&&m.OffscreenCanvasRenderingContext2D&&m.HTMLCanvasElement&&m.HTMLCanvasElement.prototype.transferControlToOffscreen&&m.URL&&m.URL.createObjectURL),z=typeof Path2D=="function"&&typeof DOMMatrix=="function",L=(function(){if(!m.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var i=t.transferToImageBitmap();e.createPattern(i,"no-repeat")}catch{return!1}return!0})();function O(){}function j(t){var e=w.exports.Promise,i=e!==void 0?e:m.Promise;return typeof i=="function"?new i(t):(t(O,O),null)}var A=(function(t,e){return{transform:function(i){if(t)return i;if(e.has(i))return e.get(i);var u=new OffscreenCanvas(i.width,i.height),v=u.getContext("2d");return v.drawImage(i,0,0),e.set(i,u),u},clear:function(){e.clear()}}})(L,new Map),x=(function(){var t=Math.floor(16.666666666666668),e,i,u={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var o=Math.random();return u[o]=requestAnimationFrame(function a(c){v===c||v+t-1<c?(v=c,delete u[o],f()):u[o]=requestAnimationFrame(a)}),o},i=function(f){u[f]&&cancelAnimationFrame(u[f])}):(e=function(f){return setTimeout(f,t)},i=function(f){return clearTimeout(f)}),{frame:e,cancel:i}})(),T=(function(){var t,e,i={};function u(v){function f(o,a){v.postMessage({options:o||{},callback:a})}v.init=function(a){var c=a.transferControlToOffscreen();v.postMessage({canvas:c},[c])},v.fire=function(a,c,n){if(e)return f(a,null),e;var h=Math.random().toString(36).slice(2);return e=j(function(k){function S(P){P.data.callback===h&&(delete i[h],v.removeEventListener("message",S),e=null,A.clear(),n(),k())}v.addEventListener("message",S),f(a,h),i[h]=S.bind(null,{data:{callback:h}})}),e},v.reset=function(){v.postMessage({reset:!0});for(var a in i)i[a](),delete i[a]}}return function(){if(t)return t;if(!D&&g){var v=["var CONFETTI, SIZE = {}, module = {};","("+W.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([v])))}catch(f){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ğŸŠ Could not load worker",f),null}u(t)}return t}})(),F={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function B(t,e){return e?e(t):t}function I(t){return t!=null}function p(t,e,i){return B(t&&I(t[e])?t[e]:F[e],i)}function X(t){return t<0?0:Math.floor(t)}function G(t,e){return Math.floor(Math.random()*(e-t))+t}function $(t){return parseInt(t,16)}function E(t){return t.map(V)}function V(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:$(e.substring(0,2)),g:$(e.substring(2,4)),b:$(e.substring(4,6))}}function Y(t){var e=p(t,"origin",Object);return e.x=p(e,"x",Number),e.y=p(e,"y",Number),e}function oe(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function be(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function fe(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function _e(t,e,i,u,v,f,o,a,c){t.save(),t.translate(e,i),t.rotate(f),t.scale(u,v),t.arc(0,0,1,o,a,c),t.restore()}function he(t){var e=t.angle*(Math.PI/180),i=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*i-Math.random()*i),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function we(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var i=e.tick++/e.totalTicks,u=e.x+e.random*e.tiltCos,v=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,o=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-i)+")",t.beginPath(),z&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Me(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(f-u)*.1,Math.abs(o-v)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var a=Math.PI/10*e.wobble,c=Math.abs(f-u)*.1,n=Math.abs(o-v)*.1,h=e.shape.bitmap.width*e.scalar,k=e.shape.bitmap.height*e.scalar,S=new DOMMatrix([Math.cos(a)*c,Math.sin(a)*c,-Math.sin(a)*n,Math.cos(a)*n,e.x,e.y]);S.multiplySelf(new DOMMatrix(e.shape.matrix));var P=t.createPattern(A.transform(e.shape.bitmap),"no-repeat");P.setTransform(S),t.globalAlpha=1-i,t.fillStyle=P,t.fillRect(e.x-h/2,e.y-k/2,h,k),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(f-u)*e.ovalScalar,Math.abs(o-v)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):_e(t,e.x,e.y,Math.abs(f-u)*e.ovalScalar,Math.abs(o-v)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var _=Math.PI/2*3,H=4*e.scalar,Z=8*e.scalar,K=e.x,ae=e.y,ie=5,ee=Math.PI/ie;ie--;)K=e.x+Math.cos(_)*Z,ae=e.y+Math.sin(_)*Z,t.lineTo(K,ae),_+=ee,K=e.x+Math.cos(_)*H,ae=e.y+Math.sin(_)*H,t.lineTo(K,ae),_+=ee;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(v)),t.lineTo(Math.floor(f),Math.floor(o)),t.lineTo(Math.floor(u),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function re(t,e,i,u,v){var f=e.slice(),o=t.getContext("2d"),a,c,n=j(function(h){function k(){a=c=null,o.clearRect(0,0,u.width,u.height),A.clear(),v(),h()}function S(){D&&!(u.width===R.width&&u.height===R.height)&&(u.width=t.width=R.width,u.height=t.height=R.height),!u.width&&!u.height&&(i(t),u.width=t.width,u.height=t.height),o.clearRect(0,0,u.width,u.height),f=f.filter(function(P){return we(o,P)}),f.length?a=x.frame(S):k()}a=x.frame(S),c=k});return{addFettis:function(h){return f=f.concat(h),n},canvas:t,promise:n,reset:function(){a&&x.cancel(a),c&&c()}}}function q(t,e){var i=!t,u=!!p(e||{},"resize"),v=!1,f=p(e,"disableForReducedMotion",Boolean),o=g&&!!p(e||{},"useWorker"),a=o?T():null,c=i?oe:be,n=t&&a?!!t.__confetti_initialized:!1,h=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,k;function S(_,H,Z){for(var K=p(_,"particleCount",X),ae=p(_,"angle",Number),ie=p(_,"spread",Number),ee=p(_,"startVelocity",Number),Qe=p(_,"decay",Number),He=p(_,"gravity",Number),We=p(_,"drift",Number),Ae=p(_,"colors",E),Ge=p(_,"ticks",Number),$e=p(_,"shapes"),Ze=p(_,"scalar"),Ke=!!p(_,"flat"),Fe=Y(_),Be=K,xe=[],Je=t.width*Fe.x,Xe=t.height*Fe.y;Be--;)xe.push(he({x:Je,y:Xe,angle:ae,spread:ie,startVelocity:ee,color:Ae[Be%Ae.length],shape:$e[G(0,$e.length)],ticks:Ge,decay:Qe,gravity:He,drift:We,scalar:Ze,flat:Ke}));return k?k.addFettis(xe):(k=re(t,xe,c,H,Z),k.promise)}function P(_){var H=f||p(_,"disableForReducedMotion",Boolean),Z=p(_,"zIndex",Number);if(H&&h)return j(function(ee){ee()});i&&k?t=k.canvas:i&&!t&&(t=fe(Z),document.body.appendChild(t)),u&&!n&&c(t);var K={width:t.width,height:t.height};a&&!n&&a.init(t),n=!0,a&&(t.__confetti_initialized=!0);function ae(){if(a){var ee={getBoundingClientRect:function(){if(!i)return t.getBoundingClientRect()}};c(ee),a.postMessage({resize:{width:ee.width,height:ee.height}});return}K.width=K.height=null}function ie(){k=null,u&&(v=!1,m.removeEventListener("resize",ae)),i&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,n=!1)}return u&&!v&&(v=!0,m.addEventListener("resize",ae,!1)),a?a.fire(_,K,ie):S(_,K,ie)}return P.reset=function(){a&&a.reset(),k&&k.reset()},P}var N;function pe(){return N||(N=q(null,{useWorker:!0,resize:!0})),N}function Me(t,e,i,u,v,f,o){var a=new Path2D(t),c=new Path2D;c.addPath(a,new DOMMatrix(e));var n=new Path2D;return n.addPath(c,new DOMMatrix([Math.cos(o)*v,Math.sin(o)*v,-Math.sin(o)*f,Math.cos(o)*f,i,u])),n}function ke(t){if(!z)throw new Error("path confetti are not supported in this browser");var e,i;typeof t=="string"?e=t:(e=t.path,i=t.matrix);var u=new Path2D(e),v=document.createElement("canvas"),f=v.getContext("2d");if(!i){for(var o=1e3,a=o,c=o,n=0,h=0,k,S,P=0;P<o;P+=2)for(var _=0;_<o;_+=2)f.isPointInPath(u,P,_,"nonzero")&&(a=Math.min(a,P),c=Math.min(c,_),n=Math.max(n,P),h=Math.max(h,_));k=n-a,S=h-c;var H=10,Z=Math.min(H/k,H/S);i=[Z,0,0,Z,-Math.round(k/2+a)*Z,-Math.round(S/2+c)*Z]}return{type:"path",path:e,matrix:i}}function Ce(t){var e,i=1,u="#000000",v='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,i="scalar"in t?t.scalar:i,v="fontFamily"in t?t.fontFamily:v,u="color"in t?t.color:u);var f=10*i,o=""+f+"px "+v,a=new OffscreenCanvas(f,f),c=a.getContext("2d");c.font=o;var n=c.measureText(e),h=Math.ceil(n.actualBoundingBoxRight+n.actualBoundingBoxLeft),k=Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent),S=2,P=n.actualBoundingBoxLeft+S,_=n.actualBoundingBoxAscent+S;h+=S+S,k+=S+S,a=new OffscreenCanvas(h,k),c=a.getContext("2d"),c.font=o,c.fillStyle=u,c.fillText(e,P,_);var H=1/i;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[H,0,0,H,-h*H/2,-k*H/2]}}w.exports=function(){return pe().apply(this,arguments)},w.exports.reset=function(){pe().reset()},w.exports.create=q,w.exports.shapeFromPath=ke,w.exports.shapeFromText=Ce})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Pe,!1);const ze=Pe.exports;Pe.exports.create;function Pt(){const m={origin:{y:.7}};function w(D,R){ze(Object.assign({},m,R,{particleCount:Math.floor(200*D)}))}w(.25,{spread:26,startVelocity:55}),w(.2,{spread:60}),w(.35,{spread:100,decay:.91,scalar:.8}),w(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),w(.1,{spread:120,startVelocity:45})}function At(){const m=Date.now()+5e3,w={startVelocity:30,spread:360,ticks:60,zIndex:0};function D(g,z){return Math.random()*(z-g)+g}const R=setInterval(function(){const g=m-Date.now();if(g<=0)return clearInterval(R);const z=50*(g/5e3);ze(Object.assign({},w,{particleCount:z,origin:{x:D(.1,.3),y:Math.random()-.2}})),ze(Object.assign({},w,{particleCount:z,origin:{x:D(.7,.9),y:Math.random()-.2}}))},250)}const $t=Ye("grammar",()=>{const W=M(null),m=M("select"),w=M(0),D=M([]),R=M(!1),g=M(Date.now()),z=M(""),L=M("medium"),O=M(10),j=()=>{const I=Date.now(),p=1440*60*1e3;return I-g.value>p};function A(I,p,X,G){W.value=I,z.value=p,L.value=X,O.value=G,m.value="quiz",w.value=0,D.value=new Array(I.questions.length).fill(null),R.value=!1,g.value=Date.now()}function x(I,p){D.value[I]=p}function T(){R.value=!0}function F(){W.value=null,m.value="select",w.value=0,D.value=[],R.value=!1,g.value=Date.now()}function B(){F()}return{currentExercise:W,currentMode:m,currentQuestionIndex:w,userAnswers:D,isSubmitted:R,selectedTopic:z,selectedDifficulty:L,questionCount:O,timestamp:g,isExpired:j,startExercise:A,submitAnswer:x,submitExercise:T,resetExercise:F,clearPersistedState:B}},{persist:{key:"learnsphere-grammar",storage:localStorage,paths:["currentExercise","currentMode","currentQuestionIndex","userAnswers","isSubmitted","selectedTopic","selectedDifficulty","questionCount","timestamp"]}}),Ft={class:"skeleton-container"},Bt={class:"skeleton-question-box"},qt={class:"skeleton-header"},Nt={class:"skeleton-options"},Ot={__name:"GrammarSkeleton",setup(W){return(m,w)=>(d(),y("div",Ft,[s("div",Bt,[s("div",qt,[r(l(ve),{width:80,height:"20px",style:{"border-radius":"4px"}}),r(l(ve),{width:100,height:"16px",style:{"border-radius":"4px"}})]),r(l(ve),{width:"90%",height:"32px",sharp:!1,style:{margin:"24px 0"}}),s("div",Nt,[(d(),y(J,null,te(4,D=>s("div",{key:D,class:"skeleton-option"},[r(l(ve),{circle:"",size:28}),r(l(ve),{width:"calc(100% - 50px)",height:"20px"})])),64))])])]))}},Dt=Ee(Ot,[["__scopeId","data-v-29361fc4"]]),Rt={class:"ai-tutor-wrapper"},Lt={key:0,class:"badge"},Vt={key:0,class:"ai-tutor-panel"},Ut={class:"tutor-header"},jt={class:"header-left"},Qt={class:"header-actions"},Ht={key:0,class:"context-hint"},Wt={key:0,class:"empty-state"},Gt={class:"message-avatar"},Zt={class:"message-content"},Kt=["innerHTML"],Jt={class:"message-time"},Xt={key:1,class:"message assistant"},Yt={class:"message-avatar"},ea={key:1,class:"quick-questions"},ta=["onClick"],aa={class:"chat-input"},sa={__name:"AITutor",props:{context:{type:Object,default:null},autoOpen:{type:Boolean,default:!1}},emits:["close"],setup(W,{emit:m}){const w=W,D=m,R=Ue(),g=M(null),z=M(w.autoOpen),L=M(""),O=M([]),j=M(!1),A=M(0),x=le(()=>w.context?["ä¸ºä»€ä¹ˆæˆ‘çš„ç­”æ¡ˆæ˜¯é”™çš„ï¼Ÿ","è¯·è¯¦ç»†è§£é‡Šä¸€ä¸‹æ­£ç¡®ç­”æ¡ˆ","è¿™ä¸ªè¯­æ³•ç‚¹è¿˜æœ‰å…¶ä»–ä¾‹å¥å—ï¼Ÿ","å¦‚ä½•é¿å…å†çŠ¯ç±»ä¼¼çš„é”™è¯¯ï¼Ÿ"]:[]);function T(){z.value=!z.value,z.value&&(A.value=0,G())}function F(){z.value=!1,D("close")}function B($){L.value=$,I()}async function I(){if(!L.value.trim()||j.value)return;const $=L.value.trim();L.value="",O.value.push({role:"user",content:$,timestamp:Date.now()}),G(),j.value=!0;try{const E=await Se.chatWithTutor({question:$,context:w.context});if(E.code===200)O.value.push({role:"assistant",content:E.data.answer||"æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚",timestamp:Date.now()});else throw new Error(E.message)}catch(E){console.error("AI Tutor error:",E),O.value.push({role:"assistant",content:"æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚è¯·ç¨åå†è¯•ã€‚",timestamp:Date.now()}),R.error("AI åŠ©æ‰‹æš‚æ—¶ä¸å¯ç”¨")}finally{j.value=!1,G()}}function p($){return $.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}function X($){return new Date($).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}function G(){nt(()=>{g.value&&(g.value.scrollTop=g.value.scrollHeight)})}return ye(()=>w.context,$=>{$&&O.value.length===0&&O.value.push({role:"assistant",content:"æˆ‘çœ‹åˆ°ä½ æ­£åœ¨åšè¿™é“é¢˜ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œéšæ—¶é—®æˆ‘ï¼",timestamp:Date.now()})}),ye(O,$=>{!z.value&&$.length>0&&$[$.length-1].role==="assistant"&&A.value++}),($,E)=>(d(),y("div",Rt,[r(qe,{name:"bounce"},{default:b(()=>[z.value?U("",!0):(d(),y("div",{key:0,class:"ai-tutor-fab",onClick:T},[r(l(se),{component:l(je),size:"24"},null,8,["component"]),A.value>0?(d(),y("span",Lt,C(A.value),1)):U("",!0)]))]),_:1}),r(qe,{name:"slide-up"},{default:b(()=>[z.value?(d(),y("div",Vt,[s("div",Ut,[s("div",jt,[r(l(se),{component:l(Ie),size:"20",color:"#10b981"},null,8,["component"]),E[2]||(E[2]=s("span",{class:"header-title"},"AI å­¦ä¹ åŠ©æ‰‹",-1)),r(l(ge),{size:"tiny",type:"success",bordered:!1},{default:b(()=>[...E[1]||(E[1]=[Q("åœ¨çº¿",-1)])]),_:1})]),s("div",Qt,[r(l(se),{component:l(ut),size:"18",class:"action-icon",onClick:T},null,8,["component"]),r(l(se),{component:l(dt),size:"18",class:"action-icon",onClick:F},null,8,["component"])])]),W.context?(d(),y("div",Ht,[r(l(se),{component:l(vt),size:"14"},null,8,["component"]),s("span",null,"æ­£åœ¨è®¨è®ºï¼š"+C(W.context.topic||"å½“å‰é¢˜ç›®"),1)])):U("",!0),s("div",{class:"chat-messages",ref_key:"messagesContainer",ref:g},[O.value.length===0?(d(),y("div",Wt,[r(l(se),{component:l(ft),size:"48",color:"#6b7280"},null,8,["component"]),E[3]||(E[3]=s("p",null,"ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ AI å­¦ä¹ åŠ©æ‰‹",-1)),E[4]||(E[4]=s("p",{class:"hint"},"æœ‰ä»»ä½•ä¸ç†è§£çš„è¯­æ³•ç‚¹ï¼Œéšæ—¶é—®æˆ‘ï¼",-1))])):U("",!0),(d(!0),y(J,null,te(O.value,(V,Y)=>(d(),y("div",{key:Y,class:de(["message",V.role])},[s("div",Gt,[r(l(se),{component:V.role==="user"?l(ht):l(Ie),size:"20",color:V.role==="user"?"#3b82f6":"#10b981"},null,8,["component","color"])]),s("div",Zt,[s("div",{class:"message-text",innerHTML:p(V.content)},null,8,Kt),s("div",Jt,C(X(V.timestamp)),1)])],2))),128)),j.value?(d(),y("div",Xt,[s("div",Yt,[r(l(se),{component:l(Ie),size:"20",color:"#10b981"},null,8,["component"])]),E[5]||(E[5]=s("div",{class:"typing-indicator"},[s("span"),s("span"),s("span")],-1))])):U("",!0)],512),!L.value&&x.value.length>0?(d(),y("div",ea,[(d(!0),y(J,null,te(x.value,(V,Y)=>(d(),y("div",{key:Y,class:"quick-question-btn",onClick:oe=>B(V)},C(V),9,ta))),128))])):U("",!0),s("div",aa,[r(l(tt),{value:L.value,"onUpdate:value":E[0]||(E[0]=V=>L.value=V),type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"é—®æˆ‘ä»»ä½•å…³äºè¿™é“é¢˜çš„é—®é¢˜...",onKeydown:at(st(I,["prevent"]),["enter"])},null,8,["value","onKeydown"]),r(l(ne),{type:"primary",loading:j.value,disabled:!L.value.trim(),onClick:I,circle:""},{icon:b(()=>[r(l(se),{component:l(pt)},null,8,["component"])]),_:1},8,["loading","disabled"])])])):U("",!0)]),_:1})]))}},na=Ee(sa,[["__scopeId","data-v-597bf039"]]),oa={class:"page-container"},la={class:"main-layout"},ra={class:"content-panel"},ia={class:"header-content"},ca={class:"subtitle"},ua={key:0},da={class:"topics-grid-container"},va=["onClick"],fa={class:"card-top"},ha={key:0,class:"check-icon"},pa={class:"card-footer"},ma={key:0,class:"history-section mt-12"},ga={class:"section-title"},ya=["onClick"],ba={class:"history-card-header"},_a={class:"history-card-body"},wa={class:"question-count"},Ma={key:0,class:"pagination-wrapper mt-6"},ka={key:1,class:"question-container"},Ca={class:"progress-bar-wrapper"},xa={class:"question-inner"},Ta={key:0,class:"question-content-wrapper"},Ia={class:"meta-info"},Sa={class:"topic-badge"},za={class:"counter"},Ea={class:"question-text"},Pa={class:"options-list"},Aa=["onClick"],$a={class:"option-index"},Fa={class:"option-content"},Ba={key:1,class:"no-question-message"},qa={key:0,class:"explanation-content"},Na={class:"exp-icon"},Oa={class:"exp-text"},Da={class:"exp-action-footer"},Ra={key:2,class:"result-container"},La={class:"result-icon-wrapper"},Va={class:"result-title"},Ua={class:"result-subtitle"},ja={key:0,class:"stars-row"},Qa={class:"stat-box"},Ha={class:"stat-value correct-rate"},Wa={class:"stat-box"},Ga={class:"stat-value"},Za={class:"dim"},Ka={key:1,class:"xp-reward"},Ja={class:"xp-badge"},Xa={class:"sidebar-panel"},Ya={class:"widget-header"},es={class:"icon-wrap purple"},ts={class:"stats-body"},as={class:"progress-section"},ss={class:"config-group"},ns={class:"mode-list"},os=["onClick"],ls={key:0,class:"radio-dot"},rs={class:"config-group"},is={class:"diff-tabs"},cs=["onClick"],us={class:"sidebar-title-row"},ds={class:"task-info"},vs={class:"info-box"},fs={class:"val"},hs={class:"question-nav"},ps={class:"nav-grid"},ms=["onClick"],gs={__name:"GrammarView",setup(W){const m=Ue(),w=[{id:1,title:"æ—¶æ€è¯­æ€",desc:"ç°åœ¨æ—¶ã€è¿‡å»æ—¶ã€è¢«åŠ¨è¯­æ€ç­‰",count:42,icon:mt,color:"#f472b6",bg:"rgba(244, 114, 182, 0.1)"},{id:2,title:"ä»å¥ç»“æ„",desc:"å®šè¯­ä»å¥ã€çŠ¶è¯­ä»å¥ã€åè¯æ€§ä»å¥",count:36,icon:gt,color:"#818cf8",bg:"rgba(129, 140, 248, 0.1)"},{id:3,title:"ä»‹è¯ç”¨æ³•",desc:"æ—¶é—´ã€åœ°ç‚¹ã€æ–¹ä½ä»‹è¯",count:32,icon:yt,color:"#34d399",bg:"rgba(52, 211, 153, 0.1)"},{id:4,title:"å† è¯ç”¨æ³•",desc:"å®šå† è¯ã€ä¸å®šå† è¯ã€é›¶å† è¯",count:24,icon:bt,color:"#a78bfa",bg:"rgba(167, 139, 250, 0.1)"},{id:5,title:"æƒ…æ€åŠ¨è¯",desc:"can, must, should ç­‰ç”¨æ³•",count:28,icon:_t,color:"#60a5fa",bg:"rgba(96, 165, 250, 0.1)"},{id:6,title:"æ¡ä»¶å¥",desc:"çœŸå®æ¡ä»¶å¥ã€è™šæ‹Ÿæ¡ä»¶å¥",count:30,icon:wt,color:"#fb923c",bg:"rgba(251, 146, 60, 0.1)"},{id:7,title:"å€’è£…å¥",desc:"å®Œå…¨å€’è£…ã€éƒ¨åˆ†å€’è£…",count:18,icon:De,color:"#22d3ee",bg:"rgba(34, 211, 238, 0.1)"},{id:8,title:"éè°“è¯­",desc:"ä¸å®šå¼ã€åŠ¨åè¯ã€åˆ†è¯",count:45,icon:Re,color:"#facc15",bg:"rgba(250, 204, 21, 0.1)"}],D=[{id:"quick",title:"å¿«é€Ÿç»ƒä¹ ",desc:"10é“é¢˜å¿«é€Ÿæµ‹è¯•",icon:Re,color:"#f97316"},{id:"comprehensive",title:"ç»¼åˆç»ƒä¹ ",desc:"20é“é¢˜å…¨é¢æ£€æµ‹",icon:Le,color:"#22c55e"},{id:"exam",title:"è€ƒè¯•æ¨¡æ‹Ÿ",desc:"é™æ—¶æ¨¡æ‹Ÿè€ƒè¯•",icon:Ve,color:"#ef4444"}],R=[{id:"easy",title:"åŸºç¡€",desc:"é€‚åˆåˆå­¦è€…",stars:1,color:"#4ade80"},{id:"medium",title:"ä¸­çº§",desc:"æœ‰ä¸€å®šæŒ‘æˆ˜",stars:2,color:"#facc15"},{id:"hard",title:"é«˜çº§",desc:"æŒ‘æˆ˜é«˜éš¾åº¦",stars:3,color:"#f87171"}],g=$t(),z=M(g.selectedTopic||w[0].id),L=M("comprehensive"),O=M(g.selectedDifficulty||"medium"),j=M(!1),A=M(g.currentMode==="quiz"),x=M(g.isSubmitted),T=M(g.currentQuestionIndex),F=M(g.userAnswers.length>0?g.userAnswers:[]),B=M(g.currentExercise?.questions||[]),I=M(0),p=M(!1),X=M([]),G=M(0),$=M(!1),E=le(()=>!N.value||!N.value.text||!N.value.options?null:{question:N.value.text,options:N.value.options,correctAnswer:N.value.options[N.value.correct]||"",userAnswer:re.value!==null?N.value.options[re.value]:null,explanation:N.value.explanation,topic:w.find(o=>o.id===z.value)?.title||"è¯­æ³•"});ye([T,F,x],()=>{A.value&&B.value.length>0&&(g.currentQuestionIndex=T.value,g.userAnswers=F.value,g.isSubmitted=x.value)});const V=M(1),Y=M(6),oe=M(0);ye([V,Y],()=>{he()});const be=le(()=>A.value&&!x.value);g.currentExercise&&g.currentMode==="quiz"&&!g.isSubmitted&&(g.isExpired()?(m.warning("æ£€æµ‹åˆ°ç»ƒä¹ æ•°æ®å·²è¿‡æœŸï¼ˆè¶…è¿‡24å°æ—¶ï¼‰ï¼Œå·²ä¸ºæ‚¨æ¸…é™¤"),g.clearPersistedState(),A.value=!1):m.info("æ£€æµ‹åˆ°æœªå®Œæˆçš„ç»ƒä¹ ï¼Œå·²ä¸ºæ‚¨æ¢å¤è¿›åº¦"));const fe=o=>{if(be.value)return o.preventDefault(),o.returnValue="ç»ƒä¹ æ­£åœ¨è¿›è¡Œä¸­ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿä½ çš„ç­”é¢˜è¿›åº¦å°†ä¼šä¸¢å¤±ã€‚",o.returnValue};ot(()=>{window.addEventListener("beforeunload",fe),he()}),lt(()=>{window.removeEventListener("beforeunload",fe)});const _e=le(()=>X.value),he=async()=>{try{const o=await Se.getGrammarHistory(V.value,Y.value);o.code===200&&(o.data.records?(X.value=o.data.records,oe.value=o.data.total):(X.value=o.data||[],oe.value=X.value.length))}catch(o){console.error("Failed to fetch grammar history",o)}},we=o=>{if(B.value=o.questions||[],B.value.length===0){m.warning("æ­¤ç»ƒä¹ æ²¡æœ‰é¢˜ç›®");return}A.value=!0,x.value=!1,T.value=0,F.value=new Array(B.value.length).fill(null).map(()=>({selected:null,correct:null})),I.value=0,p.value=!1,m.success(`å·²åŠ è½½: ${o.topic}`)},re=le({get:()=>F.value[T.value]?.selected??null,set:o=>{x.value||(F.value[T.value]?F.value[T.value].selected=o:F.value[T.value]={selected:o,correct:null})}});le(()=>F.value[T.value]?.selected!==void 0&&F.value[T.value]?.selected!==null);const q=le(()=>B.value.length),N=le(()=>B.value[T.value]||{}),pe=o=>z.value=o,Me=o=>L.value=o,ke=o=>O.value=o,Ce=async()=>{j.value=!0;try{const o=w.find(c=>c.id===z.value)?.title,a=await Se.generateGrammar({topic:o,difficulty:O.value});a.code===200&&a.data?(B.value=a.data.questions||[],B.value.length===0&&(m.warning("æœªç”Ÿæˆé¢˜ç›®ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®"),B.value=[{id:1,text:"By the time he arrives, we ______ having dinner.",options:["will finish","will have finished","are finishing","have finished"],correct:1,explanation:"'By the time' å¼•å¯¼çš„æ—¶é—´çŠ¶è¯­ä»å¥é€šå¸¸ä¸å°†æ¥å®Œæˆæ—¶è¿ç”¨ï¼Œè¡¨ç¤ºåœ¨å°†æ¥æŸæ—¶ä¹‹å‰å·²ç»å®Œæˆçš„åŠ¨ä½œã€‚"}]),A.value=!0,x.value=!1,T.value=0,F.value=new Array(B.value.length).fill(null).map(()=>({selected:null,correct:null})),I.value=0,p.value=!1,g.startExercise({questions:B.value},o,O.value,B.value.length),m.success("ç»ƒä¹ ç”ŸæˆæˆåŠŸ")):m.error("ç”Ÿæˆå¤±è´¥")}catch(o){console.error(o),m.error("ç½‘ç»œè¯·æ±‚å¤±è´¥")}finally{j.value=!1}},t=o=>{x.value||(re.value=o)},e=o=>{o>=0&&o<q.value&&(T.value=o)},i=async()=>{if(x.value)return;const o=F.value.filter(n=>n.selected===null).length;o>0&&m.warning(`è¿˜æœ‰ ${o} é“é¢˜æœªå®Œæˆï¼Œè¯·ç¡®è®¤åæäº¤`);let a=0;for(let n=0;n<B.value.length;n++){const h=B.value[n],k=F.value[n],S=k.selected===h.correct;k.correct=S,S&&correctCount++;try{const P=await et.createRecord({contentId:h.id||n,contentType:"grammar",isCorrect:S?1:0,answer:String(k.selected),correctAnswer:String(h.correct),masteryLevel:S?3:1,originalContent:JSON.stringify(h)});P.code===200&&P.data&&P.data.points&&(a+=P.data.points)}catch(P){console.error("Failed to save record",P)}}I.value=correctCount,G.value=a,x.value=!0,p.value=!0;const c=correctCount/q.value;c===1?(At(),m.success("å®Œç¾é€šå…³ï¼å¤ªæ£’äº†ï¼")):c>=.6?(Pt(),m.success("æ­å–œå®Œæˆï¼ç»§ç»­ä¿æŒï¼")):m.info("æ‰¹æ”¹å®Œæˆ"+(a>0?`ï¼Œè·å¾— ${a} ç§¯åˆ†`:""))},u=()=>{T.value<q.value-1?T.value++:x.value?p.value=!0:i()},v=()=>{A.value=!1,x.value=!1,p.value=!1,B.value=[],g.clearPersistedState()},f=()=>{$.value=!0};return(o,a)=>{const c=rt("n-icon");return d(),y("div",oa,[s("div",la,[s("div",ra,[r(l(ce),{class:"header-card",bordered:!1},{default:b(()=>[s("div",ia,[s("div",null,[s("h1",null,C(A.value?p.value?"ç»ƒä¹ æŠ¥å‘Š":"è¯­æ³•ç‰¹è®­ä¸­":"è¯­æ³•ä¸“é¡¹ç‰¹è®­"),1),s("p",ca,C(A.value?"ä¿æŒä¸“æ³¨ï¼Œæ”»å…‹éš¾ç‚¹":"ç³»ç»ŸåŒ–æ¢³ç†è¯­æ³•è„‰ç»œ"),1)]),A.value&&!p.value?(d(),y("div",ua,[r(l(ne),{secondary:"",onClick:a[0]||(a[0]=n=>A.value=!1)},{icon:b(()=>[r(c,{component:l(Mt)},null,8,["component"])]),default:b(()=>[a[6]||(a[6]=Q(" é€€å‡ºç»ƒä¹  ",-1))]),_:1})])):U("",!0)])]),_:1}),A.value?p.value?(d(),y("div",Ra,[r(l(ce),{class:"result-card",bordered:!1},{default:b(()=>[s("div",La,[r(c,{component:I.value/q.value>=.8?l(xt):I.value/q.value>=.6?l(Tt):l(Ve),size:"100",color:I.value/q.value>=.6?"#f59e0b":"#9ca3af"},null,8,["component","color"])]),s("h2",Va,C(I.value/q.value>=.9?"å®Œç¾è¡¨ç°ï¼":I.value/q.value>=.6?"ç»ƒä¹ å®Œæˆ!":"ç»§ç»­åŠ æ²¹ï¼"),1),s("p",Ua,C(I.value/q.value>=.8?"ä½ çš„è¯­æ³•æ°´å¹³ç®€ç›´ä¸å¯æ€è®®ï¼":"æŒæ¡åº¦ç¨³æ­¥æå‡ä¸­ï¼Œå†æ¥å†å‰"),1),I.value>0?(d(),y("div",ja,[(d(),y(J,null,te(3,n=>r(c,{key:n,component:l(It),size:32,color:n<=Math.ceil(I.value/q.value*3)?"#f59e0b":"#3f3f46",class:de({"star-filled":n<=Math.ceil(I.value/q.value*3)})},null,8,["component","color","class"])),64))])):U("",!0),r(l(Te),{"x-gap":"24",cols:"2",class:"stats-grid"},{default:b(()=>[r(l(me),null,{default:b(()=>[s("div",Qa,[s("div",Ha,C(Math.round(I.value/q.value*100))+"%",1),a[12]||(a[12]=s("div",{class:"stat-label"},"æ­£ç¡®ç‡",-1))])]),_:1}),r(l(me),null,{default:b(()=>[s("div",Wa,[s("div",Ga,[Q(C(I.value)+" ",1),s("span",Za,"/"+C(q.value),1)]),a[13]||(a[13]=s("div",{class:"stat-label"},"å¾—åˆ†",-1))])]),_:1})]),_:1}),G.value>0?(d(),y("div",Ka,[s("div",Ja,"+"+C(G.value)+" XP",1),a[14]||(a[14]=s("div",{class:"xp-label"},"è·å¾—ç»éªŒå€¼",-1))])):U("",!0),r(l(Oe),{justify:"center",size:"large"},{default:b(()=>[r(l(ne),{size:"large",onClick:v},{icon:b(()=>[r(c,{component:l(De)},null,8,["component"])]),default:b(()=>[a[15]||(a[15]=Q(" è¿”å›é¦–é¡µ ",-1))]),_:1}),r(l(ne),{type:"primary",color:"#db2777",size:"large",onClick:a[4]||(a[4]=n=>p.value=!1)},{default:b(()=>[...a[16]||(a[16]=[Q(" å›é¡¾è¯¦ç»†è§£æ ",-1)])]),_:1})]),_:1})]),_:1})])):(d(),y("div",ka,[j.value?(d(),ue(Dt,{key:0})):(d(),ue(l(ce),{key:1,class:"question-box",bordered:!1,size:"huge"},{default:b(()=>[s("div",Ca,[s("div",{class:"progress-fill",style:Ne({width:(T.value+1)/q.value*100+"%"})},null,4)]),s("div",xa,[N.value&&N.value.text?(d(),y("div",Ta,[s("div",Ia,[s("span",Sa,C(w.find(n=>n.id===z.value)?.title),1),s("span",za,"Question "+C(T.value+1)+" of "+C(q.value),1)]),s("h2",Ea,C(N.value.text),1),s("div",Pa,[(d(!0),y(J,null,te(N.value.options,(n,h)=>(d(),y("div",{key:h,class:de(["option-item",{correct:x.value&&h===N.value.correct,wrong:x.value&&re.value===h&&h!==N.value.correct,disabled:x.value,selected:re.value===h}]),onClick:k=>t(h)},[s("div",$a,C(["A","B","C","D"][h]),1),s("span",Fa,C(n),1)],10,Aa))),128))])])):(d(),y("div",Ba,[...a[8]||(a[8]=[s("p",null,"é¢˜ç›®åŠ è½½ä¸­æˆ–æœªç”Ÿæˆ...",-1),s("p",{style:{"font-size":"0.9rem",color:"#71717a"}},"è¯·è¿”å›é‡æ–°ç”Ÿæˆç»ƒä¹ ",-1)])]))])]),_:1})),r(l(ce),{class:"explanation-card",bordered:!1,size:"large"},{default:b(()=>[x.value?(d(),y("div",qa,[s("div",Na,[r(c,{component:l(Le)},null,8,["component"])]),s("div",Oa,[a[10]||(a[10]=s("h4",null,"è¯­æ³•è§£æ",-1)),s("p",null,C(N.value.explanation),1),r(l(ne),{onClick:f,type:"primary",ghost:"",size:"medium",style:{"margin-top":"12px"}},{icon:b(()=>[r(c,{component:l(je)},null,8,["component"])]),default:b(()=>[a[9]||(a[9]=Q(" è¿˜æœ‰ç–‘é—®ï¼Ÿé—®é—® AI åŠ©æ‰‹ ",-1))]),_:1})])])):U("",!0),s("div",Da,[r(l(Oe),{justify:"end"},{default:b(()=>[T.value>0?(d(),ue(l(ne),{key:0,secondary:"",onClick:a[3]||(a[3]=n=>e(T.value-1))},{default:b(()=>[...a[11]||(a[11]=[Q("ä¸Šä¸€é¢˜",-1)])]),_:1})):U("",!0),r(l(ne),{type:"primary",color:"#db2777",size:"large",onClick:u},{default:b(()=>[Q(C(T.value===q.value-1?x.value?"æŸ¥çœ‹ç»“æœ":"æ£€æŸ¥å¹¶æäº¤":"ä¸‹ä¸€é¢˜"),1)]),_:1})]),_:1})])]),_:1})])):(d(),y(J,{key:0},[s("div",da,[r(l(Te),{"x-gap":"20","y-gap":"20",cols:"1 800:2 1200:3",responsive:"screen"},{default:b(()=>[(d(),y(J,null,te(w,n=>r(l(me),{key:n.id},{default:b(()=>[s("div",{class:de(["topic-card",{active:z.value===n.id}]),onClick:h=>pe(n.id)},[s("div",fa,[s("div",{class:"icon-box",style:Ne({backgroundColor:n.bg,color:n.color})},[r(c,{component:n.icon,size:"24"},null,8,["component"])],4),z.value===n.id?(d(),y("div",ha,[r(c,{component:l(kt),color:"#ec4899"},null,8,["component"])])):U("",!0)]),s("h3",null,C(n.title),1),s("p",null,C(n.desc),1),s("div",pa,[r(l(ge),{size:"small",round:"",bordered:!1,type:"default"},{default:b(()=>[Q(C(n.count)+" Questions ",1)]),_:2},1024)])],10,va)]),_:2},1024)),64))]),_:1})]),oe.value>0?(d(),y("div",ma,[s("div",ga,[r(c,{component:l(Ct)},null,8,["component"]),a[7]||(a[7]=Q(" æœ€è¿‘ç”Ÿæˆç»ƒä¹  ",-1))]),r(l(Te),{"x-gap":"20","y-gap":"20",cols:"1 600:2 1200:3"},{default:b(()=>[(d(!0),y(J,null,te(_e.value,n=>(d(),ue(l(me),{key:n.id},{default:b(()=>[s("div",{class:"history-card",onClick:h=>we(n)},[s("div",ba,[r(l(ge),{size:"small",type:"warning",bordered:!1},{default:b(()=>[Q(C(n.topic||"Grammar"),1)]),_:2},1024),r(l(ge),{size:"tiny",bordered:!1},{default:b(()=>[Q(C(n.difficulty||"medium"),1)]),_:2},1024)]),s("div",_a,[s("span",wa,C(n.questions?.length||0)+" é¢˜",1)])],8,ya)]),_:2},1024))),128))]),_:1}),oe.value>0?(d(),y("div",Ma,[r(l(it),{page:V.value,"onUpdate:page":a[1]||(a[1]=n=>V.value=n),"item-count":oe.value,"page-size":Y.value,"show-size-picker":"","page-sizes":[6,12,18],"onUpdate:pageSize":a[2]||(a[2]=n=>Y.value=n)},null,8,["page","item-count","page-size"])])):U("",!0)])):U("",!0)],64))]),s("div",Xa,[r(l(ce),{class:"sidebar-card user-stats",bordered:!1,size:"small"},{default:b(()=>[s("div",Ya,[s("div",es,[r(c,{component:l(St)},null,8,["component"])]),a[17]||(a[17]=s("div",null,[s("h3",null,"å­¦ä¹ çŠ¶æ€"),s("p",null,"ä»Šæ—¥å·²ç»ƒä¹  15 åˆ†é’Ÿ")],-1))]),s("div",ts,[s("div",as,[a[18]||(a[18]=s("div",{class:"labels"},[s("span",null,"è¯­æ³•æŒæ¡åº¦"),s("span",null,"Level 3")],-1)),r(l(ct),{type:"line",percentage:65,height:6,color:"#d946ef","rail-color":"rgba(255,255,255,0.1)","show-indicator":!1})]),a[19]||(a[19]=s("div",{class:"mini-stats"},[s("div",{class:"mini-stat"},[s("div",{class:"num"},"128"),s("div",{class:"lbl"},"ç´¯è®¡ç­”é¢˜")]),s("div",{class:"mini-stat"},[s("div",{class:"num success"},"92%"),s("div",{class:"lbl"},"å¹³å‡æ­£ç¡®ç‡")])],-1))])]),_:1}),A.value?(d(),ue(l(ce),{key:1,class:"sidebar-card current-task",bordered:!1,size:"small"},{default:b(()=>[s("div",us,[s("h3",null,[r(c,{component:l(Et),class:"title-icon"},null,8,["component"]),a[24]||(a[24]=Q(" å½“å‰ä»»åŠ¡ ",-1))]),!x.value&&!p.value?(d(),ue(l(ne),{key:0,size:"tiny",type:"primary",color:"#db2777",onClick:i},{default:b(()=>[...a[25]||(a[25]=[Q(" æäº¤æ‰¹æ”¹ ",-1)])]),_:1})):U("",!0)]),s("div",ds,[s("div",vs,[a[26]||(a[26]=s("span",{class:"lbl"},"æ­£åœ¨æ”»å…‹çŸ¥è¯†ç‚¹",-1)),s("span",fs,C(w.find(n=>n.id===z.value)?.title),1)]),s("div",hs,[a[27]||(a[27]=s("span",{class:"lbl"},"æœ¬ç»„é¢˜ç›®",-1)),s("div",ps,[(d(!0),y(J,null,te(q.value,n=>(d(),y("div",{key:n,class:de(["nav-item",{active:n-1===T.value,answered:F.value[n-1]?.selected!==null,"is-correct":x.value&&F.value[n-1]?.correct===!0,"is-wrong":x.value&&F.value[n-1]?.correct===!1}]),onClick:h=>e(n-1)},C(n),11,ms))),128))])])])]),_:1})):(d(),ue(l(ce),{key:0,class:"sidebar-card config-panel",bordered:!1,size:"small"},{default:b(()=>[s("h3",null,[r(c,{component:l(zt),class:"title-icon"},null,8,["component"]),a[20]||(a[20]=Q(" ç»ƒä¹ é…ç½® ",-1))]),s("div",ss,[a[21]||(a[21]=s("label",null,"æ¨¡å¼é€‰æ‹©",-1)),s("div",ns,[(d(),y(J,null,te(D,n=>s("div",{key:n.id,class:de(["mode-item",{active:L.value===n.id}]),onClick:h=>Me(n.id)},[r(c,{component:n.icon,color:n.color},null,8,["component","color"]),s("span",null,C(n.title),1),L.value===n.id?(d(),y("div",ls)):U("",!0)],10,os)),64))])]),s("div",rs,[a[22]||(a[22]=s("label",null,"éš¾åº¦è®¾å®š",-1)),s("div",is,[(d(),y(J,null,te(R,n=>s("div",{key:n.id,class:de(["diff-tab",{active:O.value===n.id}]),onClick:h=>ke(n.id)},C(n.title),11,cs)),64))])]),r(l(ne),{block:"",type:"primary",color:"#db2777",size:"large",class:"start-btn",loading:j.value,onClick:Ce},{default:b(()=>[...a[23]||(a[23]=[Q(" å¼€å§‹ç»ƒä¹  ",-1)])]),_:1},8,["loading"])]),_:1}))])]),r(na,{context:E.value,"auto-open":$.value,onClose:a[5]||(a[5]=n=>$.value=!1)},null,8,["context","auto-open"])])}}},ks=Ee(gs,[["__scopeId","data-v-092c259d"]]);export{ks as default};
