import{_ as B,g as D,v as x,l as z}from"./index-CZUTEx94.js";import{a6 as N,b as _,l as r,I as v,z as i,s as a,q as t,p as b,a1 as k,H as o,X as m,J as F,a2 as R}from"./naive-ui-CN0IOFzZ.js";import"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";const U={class:"integration-test"},W={__name:"IntegrationTest",setup(q){const u=N(),d=_({username:"admin",password:"chen20040209"}),n=_({login:!1,vocabulary:!1,daily:!1,record:!1,statistics:!1}),e=_({}),I=async()=>{n.login=!0;try{const s=await D.login(d);e.login={success:!0,message:`ç™»å½•æˆåŠŸï¼Token: ${s.data.satoken.substring(0,20)}...`},localStorage.setItem("satoken",s.data.satoken),u.success("ç™»å½•æˆåŠŸ")}catch(s){e.login={success:!1,message:`ç™»å½•å¤±è´¥: ${s.message}`}}finally{n.login=!1}},T=async()=>{n.vocabulary=!0;try{const s=await x.getVocabularyList({examType:"cet4",page:1,pageSize:10});e.vocabulary={success:!0,message:`è·å–æˆåŠŸï¼å…± ${s.data.total} ä¸ªè¯æ±‡ï¼Œå½“å‰é¡µ ${s.data.records.length} ä¸ª`},u.success("è¯æ±‡åˆ—è¡¨è·å–æˆåŠŸ")}catch(s){e.vocabulary={success:!1,message:`è·å–å¤±è´¥: ${s.message}`}}finally{n.vocabulary=!1}},S=async()=>{n.daily=!0;try{const s=await x.getDailyWords({examType:"cet4",count:5});e.vocabulary={success:!0,message:`è·å–æˆåŠŸï¼æ¯æ—¥å•è¯ ${s.data.records.length} ä¸ª`},u.success("æ¯æ—¥å•è¯è·å–æˆåŠŸ")}catch(s){e.vocabulary={success:!1,message:`è·å–å¤±è´¥: ${s.message}`}}finally{n.daily=!1}},A=async()=>{n.record=!0;try{await z.createRecord({contentId:1,contentType:"vocabulary",isCorrect:1,timeSpent:30,score:100,answer:"test",correctAnswer:"test",masteryLevel:3}),e.learning={success:!0,message:"å­¦ä¹ è®°å½•åˆ›å»ºæˆåŠŸï¼"},u.success("å­¦ä¹ è®°å½•åˆ›å»ºæˆåŠŸ")}catch(s){e.learning={success:!1,message:`åˆ›å»ºå¤±è´¥: ${s.message}`}}finally{n.record=!1}},L=async()=>{n.statistics=!0;try{const s=await z.getStatistics();e.learning={success:!0,message:`ç»Ÿè®¡è·å–æˆåŠŸï¼æ€»è®°å½•: ${s.data.overall.totalCount||0}`},u.success("å­¦ä¹ ç»Ÿè®¡è·å–æˆåŠŸ")}catch(s){e.learning={success:!1,message:`è·å–å¤±è´¥: ${s.message}`}}finally{n.statistics=!1}};return(s,l)=>{const w=r("n-input"),g=r("n-button"),f=r("n-alert"),p=r("n-space"),y=r("n-card"),C=r("n-divider"),V=r("n-tag");return i(),v("div",U,[a(y,{title:"ğŸ”— å‰åç«¯é›†æˆæµ‹è¯•",class:"test-card"},{default:t(()=>[a(p,{vertical:"",size:"large"},{default:t(()=>[a(y,{title:"1. ç”¨æˆ·ç™»å½•æµ‹è¯•",size:"small"},{default:t(()=>[a(p,{vertical:""},{default:t(()=>[a(w,{value:d.username,"onUpdate:value":l[0]||(l[0]=c=>d.username=c),placeholder:"ç”¨æˆ·å"},null,8,["value"]),a(w,{value:d.password,"onUpdate:value":l[1]||(l[1]=c=>d.password=c),type:"password",placeholder:"å¯†ç "},null,8,["value"]),a(g,{type:"primary",onClick:I,loading:n.login},{default:t(()=>[...l[2]||(l[2]=[o(" æµ‹è¯•ç™»å½• ",-1)])]),_:1},8,["loading"]),e.login?(i(),b(f,{key:0,type:e.login.success?"success":"error"},{default:t(()=>[o(m(e.login.message),1)]),_:1},8,["type"])):k("",!0)]),_:1})]),_:1}),a(y,{title:"2. è¯æ±‡APIæµ‹è¯•",size:"small"},{default:t(()=>[a(p,null,{default:t(()=>[a(g,{onClick:T,loading:n.vocabulary},{default:t(()=>[...l[3]||(l[3]=[o(" æµ‹è¯•è¯æ±‡åˆ—è¡¨ ",-1)])]),_:1},8,["loading"]),a(g,{onClick:S,loading:n.daily},{default:t(()=>[...l[4]||(l[4]=[o(" æµ‹è¯•æ¯æ—¥å•è¯ ",-1)])]),_:1},8,["loading"])]),_:1}),a(C),e.vocabulary?(i(),b(f,{key:0,type:e.vocabulary.success?"success":"error"},{default:t(()=>[o(m(e.vocabulary.message),1)]),_:1},8,["type"])):k("",!0)]),_:1}),a(y,{title:"3. å­¦ä¹ è®°å½•æµ‹è¯•",size:"small"},{default:t(()=>[a(p,null,{default:t(()=>[a(g,{onClick:A,loading:n.record},{default:t(()=>[...l[5]||(l[5]=[o(" åˆ›å»ºå­¦ä¹ è®°å½• ",-1)])]),_:1},8,["loading"]),a(g,{onClick:L,loading:n.statistics},{default:t(()=>[...l[6]||(l[6]=[o(" è·å–å­¦ä¹ ç»Ÿè®¡ ",-1)])]),_:1},8,["loading"])]),_:1}),a(C),e.learning?(i(),b(f,{key:0,type:e.learning.success?"success":"error"},{default:t(()=>[o(m(e.learning.message),1)]),_:1},8,["type"])):k("",!0)]),_:1}),a(y,{title:"æµ‹è¯•ç»“æœæ±‡æ€»",size:"small"},{default:t(()=>[a(p,{vertical:""},{default:t(()=>[(i(!0),v(F,null,R(e,(c,$)=>(i(),v("div",{key:$},[a(V,{type:c.success?"success":"error"},{default:t(()=>[o(m($)+": "+m(c.success?"âœ… é€šè¿‡":"âŒ å¤±è´¥"),1)]),_:2},1032,["type"])]))),128))]),_:1})]),_:1})]),_:1})]),_:1})])}}},M=B(W,[["__scopeId","data-v-2fe72b70"]]);export{M as default};
