import{_ as W,g as _,v as x}from"./index-CZUTEx94.js";import{a6 as B,b as h,r as u,l as c,I as D,z as H,s as e,q as s,H as g}from"./naive-ui-CN0IOFzZ.js";import"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";const P={class:"api-test-container"},M={__name:"ApiTest",setup(K){const r=B(),o=h({username:"testuser3",password:"123456",email:"test3@example.com",nickname:"测试用户3"}),p=h({username:"testuser3",password:"123456"}),b=u(!1),w=u(!1),k=u(!1),S=u(!1),N=u(!1),O=u(!1),J=u(!1),v=u("cet4"),L=[{label:"CET-4",value:"cet4"},{label:"CET-6",value:"cet6"},{label:"考研",value:"kaoyan"},{label:"托福",value:"toefl"},{label:"雅思",value:"ielts"}],t=u("等待测试..."),I={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6位",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]},T={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},U=async()=>{O.value=!0;try{const l=await(await fetch("http://localhost:8080/api/health/check")).json();t.value=JSON.stringify(l,null,2),r.success("健康检查成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("健康检查失败")}finally{O.value=!1}},z=async()=>{J.value=!0;try{const l=await(await fetch("http://localhost:8080/api/health/version")).json();t.value=JSON.stringify(l,null,2),r.success("获取版本信息成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("获取版本信息失败")}finally{J.value=!1}},q=async()=>{b.value=!0;try{const a=await _.register(o);t.value=JSON.stringify(a,null,2),r.success("注册测试成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("注册测试失败")}finally{b.value=!1}},A=async()=>{w.value=!0;try{const a=await _.login(p);t.value=JSON.stringify(a,null,2),r.success("登录测试成功"),a.data&&a.data.satoken&&localStorage.setItem("satoken",a.data.satoken)}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("登录测试失败")}finally{w.value=!1}},R=async()=>{k.value=!0;try{const a=await _.getUserInfo();t.value=JSON.stringify(a,null,2),r.success("获取用户信息成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("获取用户信息失败")}finally{k.value=!1}},V=async()=>{try{const a=await _.logout();t.value=JSON.stringify(a,null,2),r.success("登出测试成功"),localStorage.removeItem("satoken")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("登出测试失败")}},F=async()=>{S.value=!0;try{const a=await x.getVocabularyList({examType:v.value,page:1,pageSize:10});t.value=JSON.stringify(a,null,2),r.success("获取词汇列表成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("获取词汇列表失败")}finally{S.value=!1}},j=async()=>{N.value=!0;try{const a=await x.getDailyWords({examType:v.value,count:20});t.value=JSON.stringify(a,null,2),r.success("获取每日单词成功")}catch(a){t.value=JSON.stringify({error:a.message},null,2),r.error("获取每日单词失败")}finally{N.value=!1}};return(a,l)=>{const i=c("n-button"),y=c("n-space"),f=c("n-card"),m=c("n-input"),d=c("n-form-item"),C=c("n-form"),E=c("n-select"),G=c("n-code");return H(),D("div",P,[e(f,{title:"API接口测试",class:"test-card"},{default:s(()=>[e(y,{vertical:"",size:"large"},{default:s(()=>[e(f,{title:"健康检查",size:"small"},{default:s(()=>[e(y,null,{default:s(()=>[e(i,{onClick:U,loading:O.value},{default:s(()=>[...l[7]||(l[7]=[g(" 健康检查 ",-1)])]),_:1},8,["loading"]),e(i,{onClick:z,loading:J.value},{default:s(()=>[...l[8]||(l[8]=[g(" 版本信息 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(f,{title:"用户注册",size:"small"},{default:s(()=>[e(C,{ref:"registerFormRef",model:o,rules:I},{default:s(()=>[e(d,{label:"用户名",path:"username"},{default:s(()=>[e(m,{value:o.username,"onUpdate:value":l[0]||(l[0]=n=>o.username=n),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),e(d,{label:"密码",path:"password"},{default:s(()=>[e(m,{value:o.password,"onUpdate:value":l[1]||(l[1]=n=>o.password=n),type:"password",placeholder:"请输入密码"},null,8,["value"])]),_:1}),e(d,{label:"邮箱",path:"email"},{default:s(()=>[e(m,{value:o.email,"onUpdate:value":l[2]||(l[2]=n=>o.email=n),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),e(d,{label:"昵称"},{default:s(()=>[e(m,{value:o.nickname,"onUpdate:value":l[3]||(l[3]=n=>o.nickname=n),placeholder:"请输入昵称（可选）"},null,8,["value"])]),_:1}),e(d,null,{default:s(()=>[e(i,{type:"primary",onClick:q,loading:b.value},{default:s(()=>[...l[9]||(l[9]=[g(" 测试注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),e(f,{title:"用户登录",size:"small"},{default:s(()=>[e(C,{ref:"loginFormRef",model:p,rules:T},{default:s(()=>[e(d,{label:"用户名",path:"username"},{default:s(()=>[e(m,{value:p.username,"onUpdate:value":l[4]||(l[4]=n=>p.username=n),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),e(d,{label:"密码",path:"password"},{default:s(()=>[e(m,{value:p.password,"onUpdate:value":l[5]||(l[5]=n=>p.password=n),type:"password",placeholder:"请输入密码"},null,8,["value"])]),_:1}),e(d,null,{default:s(()=>[e(y,null,{default:s(()=>[e(i,{type:"primary",onClick:A,loading:w.value},{default:s(()=>[...l[10]||(l[10]=[g(" 测试登录 ",-1)])]),_:1},8,["loading"]),e(i,{onClick:R,loading:k.value},{default:s(()=>[...l[11]||(l[11]=[g(" 获取用户信息 ",-1)])]),_:1},8,["loading"]),e(i,{onClick:V},{default:s(()=>[...l[12]||(l[12]=[g(" 测试登出 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(f,{title:"词汇API测试",size:"small"},{default:s(()=>[e(y,null,{default:s(()=>[e(E,{value:v.value,"onUpdate:value":l[6]||(l[6]=n=>v.value=n),options:L,placeholder:"选择考试类型",style:{width:"150px"}},null,8,["value"]),e(i,{onClick:F,loading:S.value},{default:s(()=>[...l[13]||(l[13]=[g(" 获取词汇列表 ",-1)])]),_:1},8,["loading"]),e(i,{onClick:j,loading:N.value},{default:s(()=>[...l[14]||(l[14]=[g(" 获取每日单词 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(f,{title:"测试结果",size:"small"},{default:s(()=>[e(G,{code:t.value,language:"json"},null,8,["code"])]),_:1})]),_:1})]),_:1})])}}},$=W(M,[["__scopeId","data-v-c5aa7388"]]);export{$ as default};
