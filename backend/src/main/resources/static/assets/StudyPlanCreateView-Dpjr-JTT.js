import{a6 as F,r as m,I as T,z as d,F as t,s,q as l,H as u,u as a,K as v,aH as g,aI as G,aJ as b,aa as _,J as R,a2 as q,a3 as h,p,aE as M,X as c,aK as S,aL as H,al as J,V as K,aM as f,aG as O,a9 as U,a1 as D}from"./naive-ui-CN0IOFzZ.js";import{_ as X,u as $,s as j}from"./index-CZUTEx94.js";import{y as Q,b as W,G as Y,z as Z,A as ee,D as te}from"./lucide-DtS2HtB5.js";import"./echarts-5QPu3XI4.js";const ae={class:"study-plan-create-container"},se={class:"max-w-4xl mx-auto"},le={class:"header-section mb-8"},oe={class:"form-card"},re={class:"step-content"},ne={class:"exam-type-grid"},ie=["onClick"],ue={class:"text-lg font-bold mb-1"},de={class:"text-sm text-gray-400"},ce={class:"step-content"},me={class:"step-content"},ve={class:"confirm-card"},pe={class:"confirm-item"},fe={class:"value"},ye={class:"confirm-item"},xe={class:"value"},ge={class:"confirm-item"},be={class:"value"},_e={class:"confirm-item"},Se={class:"value"},De={class:"action-buttons"},ke={__name:"StudyPlanCreateView",setup(we){const k=$(),w=F(),C=m(null),n=m(1),y=m(!1),o=m({examType:"",targetScore:425,durationDays:60}),x=[{value:"cet4",label:"英语四级",description:"大学英语四级考试",icon:W,maxScore:710},{value:"cet6",label:"英语六级",description:"大学英语六级考试",icon:Y,maxScore:710},{value:"ielts",label:"雅思",description:"IELTS 国际英语测试",icon:Z,maxScore:9},{value:"toefl",label:"托福",description:"TOEFL 托福考试",icon:ee,maxScore:120}],z={examType:{required:!0,message:"请选择考试类型",trigger:"change"},targetScore:{required:!0,type:"number",message:"请输入目标分数",trigger:"blur"},durationDays:{required:!0,type:"number",message:"请选择学习时长",trigger:"change"}},L=()=>{const r=x.find(e=>e.value===o.value.examType);return r?r.maxScore:710},B=()=>{const r=x.find(e=>e.value===o.value.examType);return r?r.label:""},V=()=>{const r=new Date;return r.setDate(r.getDate()+o.value.durationDays),r.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},N=()=>n.value===1?o.value.examType!=="":n.value===2?o.value.targetScore>0&&o.value.durationDays>0:!0,E=()=>{N()&&n.value++},I=()=>{n.value--},P=()=>{k.back()},A=async()=>{y.value=!0;try{await j.createPlan({examType:o.value.examType,targetScore:o.value.targetScore,durationDays:o.value.durationDays}),w.success("学习计划创建成功！"),setTimeout(()=>{k.push("/daily-tasks")},1e3)}catch(r){console.error("创建计划失败:",r),w.error(r.response?.data?.message||"创建失败，请重试")}finally{y.value=!1}};return(r,e)=>(d(),T("div",ae,[t("div",se,[t("div",le,[s(a(v),{text:"",onClick:P,class:"mb-4"},{icon:l(()=>[s(a(Q),{size:20})]),default:l(()=>[e[2]||(e[2]=u(" 返回 ",-1))]),_:1}),e[3]||(e[3]=t("h1",{class:"text-3xl font-bold text-white mb-2"},"创建学习计划",-1)),e[4]||(e[4]=t("p",{class:"text-gray-400"},"制定一个科学的学习计划，让备考更高效",-1))]),s(a(G),{current:n.value,class:"mb-8"},{default:l(()=>[s(a(g),{title:"选择考试",description:"选择你要备考的考试类型"}),s(a(g),{title:"设置目标",description:"设定目标分数和学习时长"}),s(a(g),{title:"确认创建",description:"确认计划并开始学习"})]),_:1},8,["current"]),t("div",oe,[s(a(U),{ref_key:"formRef",ref:C,model:o.value,rules:z,"label-placement":"top"},{default:l(()=>[b(t("div",re,[e[5]||(e[5]=t("h3",{class:"text-xl font-bold text-white mb-6"},"选择考试类型",-1)),s(a(_),{label:"考试类型",path:"examType"},{default:l(()=>[t("div",ne,[(d(),T(R,null,q(x,i=>t("div",{key:i.value,class:h(["exam-card",{active:o.value.examType===i.value}]),onClick:Ne=>o.value.examType=i.value},[(d(),p(M(i.icon),{size:32,class:"mb-3"})),t("h4",ue,c(i.label),1),t("p",de,c(i.description),1)],10,ie)),64))])]),_:1})],512),[[S,n.value===1]]),b(t("div",ce,[e[11]||(e[11]=t("h3",{class:"text-xl font-bold text-white mb-6"},"设置学习目标",-1)),s(a(_),{label:"目标分数",path:"targetScore"},{default:l(()=>[s(a(H),{value:o.value.targetScore,"onUpdate:value":e[0]||(e[0]=i=>o.value.targetScore=i),min:0,max:L(),step:10,size:"large",class:"w-full"},{suffix:l(()=>[...e[6]||(e[6]=[u("分",-1)])]),_:1},8,["value","max"])]),_:1}),s(a(_),{label:"学习时长",path:"durationDays"},{default:l(()=>[s(a(J),{value:o.value.durationDays,"onUpdate:value":e[1]||(e[1]=i=>o.value.durationDays=i),size:"large"},{default:l(()=>[s(a(K),{vertical:""},{default:l(()=>[s(a(f),{value:30},{default:l(()=>[...e[7]||(e[7]=[u("30 天冲刺（适合基础较好）",-1)])]),_:1}),s(a(f),{value:60},{default:l(()=>[...e[8]||(e[8]=[u("60 天进阶（推荐）",-1)])]),_:1}),s(a(f),{value:90},{default:l(()=>[...e[9]||(e[9]=[u("90 天稳扎稳打（适合零基础）",-1)])]),_:1}),s(a(f),{value:180},{default:l(()=>[...e[10]||(e[10]=[u("180 天长期规划",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})],512),[[S,n.value===2]]),b(t("div",me,[e[17]||(e[17]=t("h3",{class:"text-xl font-bold text-white mb-6"},"确认计划信息",-1)),t("div",ve,[t("div",pe,[e[12]||(e[12]=t("span",{class:"label"},"考试类型",-1)),t("span",fe,c(B()),1)]),t("div",ye,[e[13]||(e[13]=t("span",{class:"label"},"目标分数",-1)),t("span",xe,c(o.value.targetScore)+" 分",1)]),t("div",ge,[e[14]||(e[14]=t("span",{class:"label"},"学习时长",-1)),t("span",be,c(o.value.durationDays)+" 天",1)]),t("div",_e,[e[15]||(e[15]=t("span",{class:"label"},"预计完成日期",-1)),t("span",Se,c(V()),1)])]),s(a(O),{type:"info",class:"mt-6"},{icon:l(()=>[s(a(te),{size:20})]),default:l(()=>[e[16]||(e[16]=u(" 系统将根据你的目标自动生成每日学习任务，包括词汇、语法、听力、阅读等模块的练习。 ",-1))]),_:1})],512),[[S,n.value===3]])]),_:1},8,["model"]),t("div",De,[n.value>1?(d(),p(a(v),{key:0,size:"large",onClick:I},{default:l(()=>[...e[18]||(e[18]=[u(" 上一步 ",-1)])]),_:1})):D("",!0),n.value<3?(d(),p(a(v),{key:1,type:"primary",size:"large",onClick:E,disabled:!N()},{default:l(()=>[...e[19]||(e[19]=[u(" 下一步 ",-1)])]),_:1},8,["disabled"])):D("",!0),n.value===3?(d(),p(a(v),{key:2,type:"primary",size:"large",loading:y.value,onClick:A},{default:l(()=>[...e[20]||(e[20]=[u(" 创建计划 ",-1)])]),_:1},8,["loading"])):D("",!0)])])])]))}},Be=X(ke,[["__scopeId","data-v-3dca4fa6"]]);export{Be as default};
