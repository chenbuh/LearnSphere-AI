import{Y as Q,_ as X,$ as ee,af as te,a0 as se,r as f,o as ae,V as k,g as i,b as l,e,c as b,t as r,u as o,d as n,a5 as M,av as oe,w as u,i as N,j as d,k as v,F as R,x as V,n as y,h as $,aw as le,ax as C,ay as ne,ad as re,al as ie,a8 as F,Z as I,ac as de,az as ce,aA as Z,ak as ue}from"./index-DxUHCA-q.js";import{a as S,C as z}from"./circle-check-big-qasVjenE.js";import{A as ge}from"./arrow-right-JQGnGWoQ.js";import{S as E}from"./star-fpd1vxRY.js";const pe=Q("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),me={class:"daily-task-board"},xe={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 animate-fade-in-down"},fe={class:"text-3xl font-black text-white flex items-center gap-3 mb-2"},be={class:"text-gray-400"},ve={class:"mt-4 md:mt-0 flex gap-4"},ye={class:"glass-pill"},we={class:"glass-pill"},he={class:"font-bold text-white"},_e={class:"relative z-20"},ke={key:0,class:"empty-state-glass"},Ce={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ze={class:"lg:col-span-2 space-y-6"},Te={class:"week-strip-glass p-4 rounded-2xl flex justify-between items-center mb-6"},De={key:1},je={class:"flex items-center justify-between mb-4"},Ne={class:"text-xl font-bold text-white flex items-center gap-2"},Se={class:"text-sm text-gray-400"},Be={class:"space-y-4"},Le={class:"p-5 w-full flex items-center gap-5 relative z-10"},Pe={class:"flex-1 min-w-0"},Ae={class:"flex flex-wrap items-center gap-2 mb-1"},Me={class:"flex items-center gap-4 text-sm"},Re={class:"text-gray-400 flex items-center gap-1.5"},Ve={key:0,class:"text-green-500 flex items-center gap-1"},$e={class:"shrink-0"},Fe={key:1,class:"w-10 h-10 rounded-full bg-green-500/20 text-green-500 flex items-center justify-center animate-bounce-in border border-green-500/30"},Ie={key:0,class:"text-center py-20 bg-white/5 rounded-3xl border border-white/5"},Ze={class:"w-20 h-20 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4"},Ee={class:"space-y-6"},Ge={class:"stat-glass-card relative overflow-hidden group"},He={class:"flex items-center justify-center relative mb-8"},Oe={class:"text-center"},Ue={class:"text-4xl font-black text-white block"},We={class:"grid grid-cols-2 gap-4"},Ye={class:"bg-white/5 rounded-xl p-3 text-center"},qe={class:"text-2xl font-bold text-white"},Je={class:"bg-white/5 rounded-xl p-3 text-center"},Ke={class:"text-2xl font-bold text-white"},Qe={key:0,class:"mt-6 flex items-center justify-center gap-2 text-yellow-400 font-bold bg-yellow-500/10 py-3 rounded-xl animate-pulse"},Xe={class:"stat-glass-card p-6 bg-gradient-to-br from-indigo-500/10 to-purple-500/10"},et={class:"flex items-start gap-4"},tt={class:"w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center shrink-0"},st={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center"},at={class:"relative bg-[#0f172a] border border-purple-500/30 p-10 rounded-3xl shadow-2xl text-center animate-scale-up max-w-sm mx-4"},ot={class:"absolute -top-12 left-1/2 transform -translate-x-1/2"},lt={class:"w-24 h-24 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center shadow-lg shadow-orange-500/30 animate-bounce"},nt={class:"mt-10"},rt={class:"flex items-center justify-center gap-2 mb-8 p-4 bg-white/5 rounded-2xl"},it={class:"text-xl font-bold text-white"},dt={__name:"DailyTaskBoard",setup(ct){const B=ee(),L=te(),G=se(),w=f(!1),T=f(null),g=f([]);f(null);const P=f([]),H=async()=>{w.value=!0;try{const a=await Z.getCurrentPlan();if(T.value=a.data,T.value){const t=await Z.getTodayTasks();g.value=t.data||[]}O()}catch(a){console.error("[StudyPlan] Load failed:",a),L.error("åŠ è½½å­¦ä¹ æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{w.value=!1}},O=()=>{const a=[],t=new Date,s=t.getDay()||7,x=new Date(t);x.setDate(t.getDate()-s+1);for(let h=0;h<7;h++){const p=new Date(x);p.setDate(x.getDate()+h);const A=p.toDateString()===t.toDateString(),K=p<t;let _="future";A?_="current":K&&(_=h%2===0?"done":"missed"),p>t&&(_="future"),a.push({date:p,dayName:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][p.getDay()],dayNum:p.getDate(),status:A?"current":_==="done"?"done":"future"})}P.value=a};ae(()=>{H()});const U=a=>{const s={vocabulary:"/vocabulary",reading:"/reading",listening:"/listening",grammar:"/grammar",writing:"/writing",speaking:"/speaking"}[a.taskType];s?B.push(s):L.warning("è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­")},c=k(()=>{if(!g.value.length)return{total:0,completed:0,remaining:0};const a=g.value.filter(t=>t.isCompleted).length;return{total:g.value.length,completed:a,remaining:g.value.length-a}}),D=k(()=>c.value.total===0?0:Math.round(c.value.completed/c.value.total*100)),W=k(()=>new Date().toLocaleDateString("zh-CN",{month:"long",day:"numeric",weekday:"long"})),Y=k(()=>{const a=new Date().getHours();return a<6?"å¤œæ·±äº†":a<12?"æ—©ä¸Šå¥½":a<14?"ä¸­åˆå¥½":a<18?"ä¸‹åˆå¥½":"æ™šä¸Šå¥½"}),q=a=>({vocabulary:ue,reading:S,listening:I,grammar:z,writing:E,speaking:M})[a]||pe,m=a=>({vocabulary:"#10b981",reading:"#3b82f6",listening:"#f59e0b",grammar:"#8b5cf6",writing:"#ef4444",speaking:"#f97316"})[a]||"#71717a",J=a=>({vocabulary:"è¯æ±‡",reading:"é˜…è¯»",listening:"å¬åŠ›",grammar:"è¯­æ³•",writing:"å†™ä½œ",speaking:"å£è¯­"})[a]||"é€šç”¨",j=f(!1);return(a,t)=>(l(),i("div",me,[e("header",xe,[e("div",null,[e("h1",fe,[e("span",null,r(Y.value)+"ï¼Œ"+r(o(G).nickname||"å­¦ä¹ è€…"),1),t[3]||(t[3]=e("span",{class:"text-2xl animate-wave"},"ğŸ‘‹",-1))]),e("p",be," ä»Šå¤©æ˜¯ "+r(W.value)+"ï¼Œä¿æŒä¸“æ³¨ï¼Œç»§ç»­å‰è¿›ï¼ ",1)]),e("div",ve,[e("div",ye,[n(o(M),{class:"text-orange-500",size:18}),t[4]||(t[4]=e("span",{class:"font-bold text-white"},"3 å¤©è¿èƒœ",-1))]),e("div",we,[n(o(oe),{class:"text-yellow-400",size:18}),e("span",he,r(c.value.completed*50)+" ç§¯åˆ†",1)])])]),e("div",_e,[n(o(de),{show:w.value},{default:u(()=>[!T.value&&!w.value?(l(),i("div",ke,[n(o(S),{size:64,class:"text-gray-600 mb-6"}),t[6]||(t[6]=e("h3",{class:"text-xl font-bold text-white mb-2"},"æš‚æ— å­¦ä¹ è®¡åˆ’",-1)),t[7]||(t[7]=e("p",{class:"text-gray-400 mb-8"},"åˆ¶å®šä¸€ä¸ªç§‘å­¦çš„è®¡åˆ’æ˜¯æˆåŠŸçš„å¼€å§‹",-1)),n(o(N),{type:"primary",size:"large",round:"",class:"glow-button",onClick:t[0]||(t[0]=s=>o(B).push("/study-plan/create"))},{default:u(()=>[...t[5]||(t[5]=[d(" ç«‹å³åˆ›å»ºè®¡åˆ’ ",-1)])]),_:1})])):(l(),i("div",Ce,[e("div",ze,[e("div",Te,[(l(!0),i(R,null,V(P.value,(s,x)=>(l(),i("div",{key:x,class:y(["day-item flex flex-col items-center gap-2 p-2 rounded-xl transition-all duration-300",{"bg-violet-600 shadow-lg glow-active":s.status==="current","bg-white/5":s.status!=="current"}])},[e("span",{class:y(["text-xs font-medium",s.status==="current"?"text-white":"text-gray-400"])},r(s.dayName),3),e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border",{"border-transparent bg-white text-violet-700":s.status==="current","border-green-500/30 bg-green-500/10 text-green-500":s.status==="done","border-transparent text-gray-500":s.status==="future"}])},[s.status==="done"?(l(),b(o(z),{key:0,size:14})):(l(),i("span",De,r(s.dayNum),1))],2)],2))),128))]),e("div",je,[e("h2",Ne,[n(o($),{class:"text-violet-400"}),t[8]||(t[8]=d(" ä»Šæ—¥ä»»åŠ¡ ",-1))]),e("span",Se,r(c.value.completed)+"/"+r(c.value.total)+" å®Œæˆ",1)]),e("div",Be,[n(le,{name:"list"},{default:u(()=>[(l(!0),i(R,null,V(g.value,s=>(l(),i("div",{key:s.id,class:y(["task-card group",{completed:s.isCompleted}])},[e("div",{class:"absolute left-0 top-0 bottom-0 w-1 transition-colors duration-300",style:C({backgroundColor:s.isCompleted?"#3f3f46":m(s.taskType)})},null,4),e("div",Le,[e("div",{class:"w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 transition-all duration-300 relative overflow-hidden",style:C({backgroundColor:s.isCompleted?"#27272a":m(s.taskType)+"15",color:s.isCompleted?"#71717a":m(s.taskType)})},[(l(),b(ne(q(s.taskType)),{size:24,class:"relative z-10"})),e("div",{class:"absolute inset-0 opacity-20",style:C({backgroundColor:m(s.taskType)})},null,4)],4),e("div",Pe,[e("div",Ae,[e("h3",{class:y(["text-lg font-bold text-white truncate transition-colors",{"text-gray-500 line-through":s.isCompleted}])},r(s.taskName),3),s.isCompleted?v("",!0):(l(),b(o(re),{key:0,size:"small",round:"",bordered:!1,style:C({backgroundColor:m(s.taskType)+"20",color:m(s.taskType)})},{default:u(()=>[d(r(J(s.taskType)),1)]),_:2},1032,["style"]))]),e("div",Me,[e("span",Re,[n(o($),{size:14}),d(" ç›®æ ‡: "+r(s.targetCount),1)]),s.isCompleted?(l(),i("span",Ve,[n(o(z),{size:14}),t[9]||(t[9]=d(" å·²å®Œæˆ ",-1))])):v("",!0)])]),e("div",$e,[s.isCompleted?(l(),i("div",Fe,[n(o(z),{size:20,"stroke-width":"3"})])):(l(),b(o(N),{key:0,color:"#8b5cf6",class:"action-btn",round:"",size:"large",onClick:x=>U(s)},{icon:u(()=>[n(o(ge),{size:18})]),default:u(()=>[t[10]||(t[10]=e("span",{class:"font-bold"},"å¼€å§‹å­¦ä¹ ",-1))]),_:1},8,["onClick"]))])])],2))),128))]),_:1})]),g.value.length===0?(l(),i("div",Ie,[e("div",Ze,[n(o(S),{size:32,class:"text-gray-500"})]),t[11]||(t[11]=e("p",{class:"text-gray-400"},"ä»Šæ—¥æš‚æ— ä»»åŠ¡ï¼Œä¼‘æ¯ä¸€ä¸‹å§ â˜•ï¸",-1))])):v("",!0)]),e("div",Ee,[e("div",Ge,[t[17]||(t[17]=e("div",{class:"absolute top-0 right-0 p-32 bg-purple-600/20 blur-3xl -mr-16 -mt-16 pointer-events-none transition-all duration-500 group-hover:bg-purple-600/30"},null,-1)),t[18]||(t[18]=e("h3",{class:"text-gray-400 font-bold uppercase text-xs tracking-wider mb-6"},"ä»Šæ—¥å®Œæˆåº¦",-1)),e("div",He,[n(o(ie),{type:"circle",percentage:D.value,color:"#8b5cf6","rail-color":"rgba(255, 255, 255, 0.1)","stroke-width":10,size:160},{default:u(()=>[e("div",Oe,[e("span",Ue,[d(r(D.value),1),t[12]||(t[12]=e("span",{class:"text-lg opacity-60"},"%",-1))]),t[13]||(t[13]=e("span",{class:"text-gray-400 text-xs mt-1 block"},"è¿›åº¦",-1))])]),_:1},8,["percentage"])]),e("div",We,[e("div",Ye,[e("div",qe,r(c.value.completed),1),t[14]||(t[14]=e("div",{class:"text-xs text-gray-500 uppercase mt-1"},"å·²å®Œæˆ",-1))]),e("div",Je,[e("div",Ke,r(c.value.remaining),1),t[15]||(t[15]=e("div",{class:"text-xs text-gray-500 uppercase mt-1"},"å¾…å®Œæˆ",-1))])]),D.value===100?(l(),i("div",Qe,[n(o(F),{size:20}),t[16]||(t[16]=d(" å…¨éƒ¨å®Œæˆ! ",-1))])):v("",!0)]),e("div",Xe,[e("div",et,[e("div",tt,[n(o(I),{class:"text-indigo-400",size:20})]),t[19]||(t[19]=e("div",null,[e("h4",{class:"text-white font-bold mb-1"},"æ¯æ—¥ä¸€å¥"),e("p",{class:"text-gray-400 text-sm leading-relaxed italic"},[d(' "The journey of a thousand miles begins with one step." '),e("br"),e("span",{class:"text-gray-500 not-italic mt-1 block"},"- Lao Tzu")])],-1))])])])]))]),_:1},8,["show"])]),(l(),b(ce,{to:"body"},[j.value?(l(),i("div",st,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t[1]||(t[1]=s=>j.value=!1)}),e("div",at,[e("div",ot,[e("div",lt,[n(o(F),{size:48,class:"text-white"})])]),e("div",nt,[t[21]||(t[21]=e("h2",{class:"text-3xl font-black text-white mb-2 bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-yellow-500"}," å¤ªæ£’äº†! ",-1)),t[22]||(t[22]=e("p",{class:"text-gray-400 mb-8"},[d(" ä½ å®Œæˆäº†ä»Šå¤©æ‰€æœ‰çš„ä»»åŠ¡ï¼"),e("br"),d("ç¦»ç›®æ ‡åˆè¿‘äº†ä¸€æ­¥ã€‚ ")],-1)),e("div",rt,[n(o(E),{class:"text-yellow-400",fill:"currentColor"}),e("span",it,"+"+r(c.value.total*50)+" ç§¯åˆ†",1)]),n(o(N),{type:"primary",size:"large",round:"",class:"w-full bg-gradient-to-r from-violet-600 to-indigo-600 border-none hover:shadow-lg transition-all",onClick:t[2]||(t[2]=s=>j.value=!1)},{default:u(()=>[...t[20]||(t[20]=[d(" ç»§ç»­ä¿æŒ ",-1)])]),_:1})])])])):v("",!0)]))]))}},xt=X(dt,[["__scopeId","data-v-97d1cbe1"]]);export{xt as default};
