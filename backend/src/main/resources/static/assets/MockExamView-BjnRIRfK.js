import{Y as F,_ as fe,af as ge,r as f,V as b,aN as me,o as _e,bm as ye,g as c,b as u,k as z,e as s,d as n,w as o,u as t,a2 as $,a3 as E,j as d,f as D,F as N,x as B,n as M,ax as he,t as i,B as be,a1 as G,i as _,y as w,c as I,ad as O,h as ke,bn as xe,al as we,ah as Ce,ab as Se,am as Te,a8 as ze,z as Ee,D as Ne,ao as q}from"./index-DxUHCA-q.js";import{G as Be}from"./graduation-cap-BUyCR4-R.js";import{C as Ie}from"./clock-BMOIfxbi.js";import{R as Ae}from"./rocket-BIuDXovD.js";import{H as Le}from"./history-DU2rBN7r.js";import{C as Ve}from"./circle-stop-ChkWTsNT.js";import{N as De}from"./Thing-C1BPltNf.js";const Z=F("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Me=F("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Qe=F("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),qe={class:"page-container"},Re={key:0,class:"setup-view"},Ue={class:"setting-section"},Pe={class:"grid-options exam-grid"},$e=["onClick"],Ge={class:"card-info"},Oe={class:"label"},Fe={class:"desc"},je={class:"setting-section mt-8"},He={class:"side-panel"},Xe={class:"setting-section"},Ye={class:"pill-options"},Je=["onClick"],Ke={class:"setting-section mt-8"},We={key:0,class:"history-section mt-12"},Ze={class:"section-title"},es={class:"h-card-header"},ss={class:"exam-date"},ts={class:"exam-title"},as={class:"h-card-footer"},ls={key:0,class:"pagination-wrapper mt-6"},ns={key:1,class:"testing-view"},os={class:"testing-layout"},is={class:"test-sidebar"},us={class:"active-exam-info"},rs={class:"exam-name"},cs={class:"progress-container"},ds={class:"prog-labels"},vs={class:"question-map"},ps={class:"map-grid"},fs=["onClick"],gs={class:"main-question-panel"},ms={class:"question-header"},_s={key:0,class:"listening-section mb-4"},ys={class:"passage-label"},hs={class:"audio-player"},bs={key:1,class:"reading-passage mb-4"},ks={class:"question-text"},xs={key:0,class:"options-container"},ws=["onClick"],Cs={class:"letter"},Ss={class:"text"},Ts={key:1,class:"text-input-container"},zs={class:"action-footer"},Es={class:"status-msg"},Ns={key:2,class:"result-view"},Bs={class:"score-header"},Is={class:"score-circle-container"},As={class:"score-circle"},Ls={class:"score-val"},Vs={class:"stat-box"},Ds={class:"v success"},Ms={class:"stat-box"},Qs={class:"v error"},qs={class:"stat-box"},Rs={class:"v"},Us={class:"result-actions"},Ps={key:3,class:"review-view"},$s={class:"back-bar mb-6"},Gs={class:"question-text-review"},Os={class:"review-body"},Fs={class:"ans-grid"},js={class:"ans-item"},Hs={class:"ans-item"},Xs={class:"success"},Ys={key:0,class:"explanation-box"},Js={__name:"MockExamView",setup(Ks){const A=ge(),k=f(!1),Q=f(null),ee=a=>{if(!a)return;if(k.value){window.speechSynthesis.cancel(),k.value=!1,Q.value=null;return}const e=new SpeechSynthesisUtterance(a);e.lang="en-US",e.rate=.9,e.onend=()=>{k.value=!1,Q.value=null},k.value=!0,Q.value=a,window.speechSynthesis.speak(e)},j=()=>{k.value&&(window.speechSynthesis.cancel(),k.value=!1,Q.value=null)},g=f("setup"),x=f(!1),R=f(!1),L=f([]),C=f(null),p=f([]),v=f(0),m=f([]),H=f(null),y=f(null),U=f(1),S=f(6),V=f({examType:"cet4",difficulty:"medium",duration:120}),se=[{label:"å¤§å­¦è‹±è¯­å››çº§",value:"cet4",icon:"4",desc:"College English Test Band 4",color:"#10b981",bg:"rgba(16, 185, 129, 0.1)"},{label:"å¤§å­¦è‹±è¯­å…­çº§",value:"cet6",icon:"6",desc:"College English Test Band 6",color:"#6366f1",bg:"rgba(99, 102, 241, 0.1)"},{label:"é›…æ€å­¦æœ¯ç±»",value:"ielts",icon:"I",desc:"International English Language Testing System",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},{label:"æ‰˜ç¦è€ƒè¯•",value:"toefl",icon:"T",desc:"Test of English as a Foreign Language",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"},{label:"GRE è€ƒè¯•",value:"gre",icon:"G",desc:"Graduate Record Examination",color:"#8b5cf6",bg:"rgba(139, 92, 246, 0.1)"}],te=[{label:"åˆçº§",value:"easy",icon:"ğŸŒ±"},{label:"ä¸­çº§",value:"medium",icon:"ğŸ”¥"},{label:"é«˜çº§",value:"hard",icon:"ğŸ’€"}],h=b(()=>p.value[v.value]),X=b(()=>{const a=h.value;if(!a||a.type!=="reading")return null;if(a.passage)return a.passage;if(a.text&&a.text.includes(`

`)){const e=a.text.split(`

`);if(e.length>=2)return e.slice(0,-1).join(`

`)}return null}),ae=b(()=>{const a=h.value;if(!a)return"";if(a.type==="reading"&&a.text&&a.text.includes(`

`)&&!a.passage){const e=a.text.split(`

`);return e[e.length-1]}return a.text}),le=b(()=>{const a=(U.value-1)*S.value,e=a+S.value;return L.value.slice(a,e)}),ne=b(()=>{const a=h.value;if(!a||a.type!=="listening"||!a.audioScript)return null;const e=p.value.filter(T=>T.type==="listening"),l=[],r=new Map;return e.forEach(T=>{r.has(T.audioScript)||(r.set(T.audioScript,l.length+1),l.push(T.audioScript))}),r.get(a.audioScript)||1}),oe=b(()=>p.value.length===0?0:Math.round((v.value+1)/p.value.length*100)),ie=b(()=>m.value.filter(a=>a!==null).length),ue=b(()=>g.value==="testing"&&C.value!==null),Y=a=>{if(ue.value)return a.preventDefault(),a.returnValue="è€ƒè¯•æ­£åœ¨è¿›è¡Œä¸­ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿä½ çš„ç­”é¢˜è¿›åº¦å°†ä¼šä¸¢å¤±ã€‚",a.returnValue},J=(a,e)=>{V.value[a]=e},P=async()=>{x.value=!0;try{const a=await q.get("/exam/list",{params:{examType:""}});a.code===200&&(L.value=a.data||[])}catch(a){console.error("åŠ è½½è€ƒè¯•åˆ—è¡¨å¤±è´¥",a)}finally{x.value=!1}},re=async()=>{R.value=!0;try{const a=await q.post("/exam/generate",{examType:V.value.examType,difficulty:V.value.difficulty});a.code===200&&(A.success("æ–°è€ƒå·å·²ç”Ÿæˆ"),await P(),a.data&&a.data.id&&K(a.data))}catch{A.error("ç”Ÿæˆè€ƒå·å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{R.value=!1}},K=async a=>{x.value=!0;try{const e=await q.get(`/exam/detail/${a.id}`);e.code===200&&e.data&&(C.value=e.data,p.value=e.data.questions||[],m.value=new Array(p.value.length).fill(null),v.value=0,H.value=Date.now(),y.value=null,g.value="testing")}catch{A.error("æ— æ³•åŠ è½½è€ƒè¯•è¯¦æƒ…")}finally{x.value=!1}},ce=a=>{g.value==="testing"&&(m.value[v.value]=a)},de=()=>{v.value>0&&v.value--},ve=()=>{v.value<p.value.length-1&&v.value++};me(v,(a,e)=>{const l=p.value[a],r=p.value[e];if(l?.type!=="listening"){j();return}r?.type==="listening"&&l?.type==="listening"&&r.audioScript!==l.audioScript&&j()});const pe=async()=>{const a=Math.round((Date.now()-H.value)/1e3);x.value=!0;try{const e=await q.post("/exam/submit",{examId:C.value.id,answers:m.value.map(l=>l===null?-1:l),timeSpent:a});e.code===200&&(y.value=e.data,g.value="result",A.success("æäº¤æˆåŠŸï¼æˆç»©å·²å­˜å…¥æ¡£æ¡ˆ"))}catch{A.error("æäº¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ")}finally{x.value=!1}},W=()=>{g.value="setup",C.value=null,p.value=[],y.value=null,P()};return _e(()=>{P(),window.addEventListener("beforeunload",Y)}),ye(()=>{window.removeEventListener("beforeunload",Y)}),(a,e)=>(u(),c("div",qe,[g.value==="setup"?(u(),c("div",Re,[e[14]||(e[14]=s("div",{class:"page-header"},[s("h1",null,"å…¨çœŸæ¨¡æ‹Ÿè€ƒè¯•"),s("p",null,"ç”± AI é©±åŠ¨çš„é«˜ä¿çœŸè€ƒåœºæ¨¡æ‹Ÿï¼Œå…¨æ–¹ä½æ£€æµ‹å­¦ä¹ æˆæ•ˆ")],-1)),n(t(w),{class:"setup-card",bordered:!1},{default:o(()=>[n(t($),{"x-gap":"40","y-gap":"40",cols:"1 900:3",responsive:"screen"},{default:o(()=>[n(t(E),{span:"2"},{default:o(()=>[s("div",Ue,[s("h3",null,[n(t(D),{component:t(Be),color:"#6366f1"},null,8,["component"]),e[6]||(e[6]=d(" é€‰æ‹©è€ƒè¯•é¡¹ç›®",-1))]),s("div",Pe,[(u(),c(N,null,B(se,l=>s("div",{key:l.value,class:M(["option-card",{active:V.value.examType===l.value}]),onClick:r=>J("examType",l.value)},[s("div",{class:"card-icon",style:he({backgroundColor:l.bg,color:l.color})},i(l.icon),5),s("div",Ge,[s("div",Oe,i(l.label),1),s("div",Fe,i(l.desc),1)])],10,$e)),64))])]),s("div",je,[s("h3",null,[n(t(D),{component:t(Me),color:"#10b981"},null,8,["component"]),e[7]||(e[7]=d(" è€ƒåœºçºªå¾‹è¯´æ˜",-1))]),e[8]||(e[8]=s("div",{class:"rules-box"},[s("div",{class:"rule-item"},"æ¨¡æ‹Ÿè€ƒè¯•å¼€å¯åå°†è¿›å…¥å…¨å±/æ²‰æµ¸æ¨¡å¼ã€‚"),s("div",{class:"rule-item"},"ä¸­é€”ç¦»å¼€é¡µé¢æˆ–åˆ·æ–°å°†å¯¼è‡´è€ƒè¯•å¼ºåˆ¶ç»“æŸå¹¶ä¸è®¡åˆ†ã€‚"),s("div",{class:"rule-item"},"AI æ ¹æ®æ‚¨çš„æ°´å¹³åŠ¨æ€å‡ºé¢˜ï¼ˆå«çŸ­ç¯‡é˜…è¯»ï¼‰ã€‚"),s("div",{class:"rule-item",style:{color:"#fbbf24"}},"æ³¨ï¼šå¬åŠ›ä¸å£è¯­è€ƒè¯•è¯·å‰å¾€å¯¹åº”çš„ä¸“é¡¹è®­ç»ƒæ¨¡å—ã€‚")],-1))])]),_:1}),n(t(E),null,{default:o(()=>[s("div",He,[s("div",Xe,[s("h3",null,[n(t(D),{component:t(be),color:"#f59e0b"},null,8,["component"]),e[9]||(e[9]=d(" éš¾åº¦é€‰æ‹©",-1))]),s("div",Ye,[(u(),c(N,null,B(te,l=>s("div",{key:l.value,class:M(["pill-option",{active:V.value.difficulty===l.value}]),onClick:r=>J("difficulty",l.value)},i(l.icon)+" "+i(l.label),11,Je)),64))])]),s("div",Ke,[s("h3",null,[n(t(D),{component:t(Ie),color:"#ef4444"},null,8,["component"]),e[10]||(e[10]=d(" æ—¶é—´è®¾å®š",-1))]),e[11]||(e[11]=s("div",{class:"duration-selector"},[s("div",{class:"val"},"120 åˆ†é’Ÿ"),s("p",{class:"desc"},"æ ‡å‡†è€ƒè¯•æ—¶é•¿ï¼Œè¯·ç¡®ä¿æœ‰å……è¶³æ—¶é—´ã€‚")],-1))]),n(t(G)),n(t(_),{type:"primary",size:"large",block:"",round:"",class:"start-btn",loading:R.value,onClick:re},{icon:o(()=>[n(t(Ae),{size:20})]),default:o(()=>[e[12]||(e[12]=d(" è¿›å…¥æ¨¡æ‹Ÿè€ƒåœº ",-1))]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1}),L.value.length>0?(u(),c("div",We,[s("div",Ze,[n(t(D),{component:t(Le)},null,8,["component"]),e[13]||(e[13]=d(" æœ€è¿‘ç”Ÿæˆè€ƒå· ",-1))]),n(t($),{"x-gap":"20","y-gap":"20",cols:"1 600:2 1200:3"},{default:o(()=>[(u(!0),c(N,null,B(le.value,l=>(u(),I(t(E),{key:l.id},{default:o(()=>[n(t(w),{class:"history-card",hoverable:"",onClick:r=>K(l)},{default:o(()=>[s("div",es,[n(t(O),{size:"small",bordered:!1,round:"",color:{color:"#6366f1",textColor:"#fff"}},{default:o(()=>[d(i(l.examType?.toUpperCase()),1)]),_:2},1024),s("span",ss,i(new Date().toLocaleDateString()),1)]),s("h4",ts,i(l.title),1),s("div",as,[s("span",null,[n(t(Qe),{size:14}),d(" "+i(l.duration)+"m",1)]),s("span",null,[n(t(ke),{size:14}),d(" "+i(l.totalQuestions)+" é¢˜",1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),L.value.length>S.value?(u(),c("div",ls,[n(t(xe),{page:U.value,"onUpdate:page":e[0]||(e[0]=l=>U.value=l),"page-count":Math.ceil(L.value.length/S.value),"page-size":S.value,"show-size-picker":"","page-sizes":[6,12,18,24],"onUpdate:pageSize":e[1]||(e[1]=l=>S.value=l)},null,8,["page","page-count","page-size"])])):z("",!0)])):z("",!0)])):g.value==="testing"?(u(),c("div",ns,[s("div",os,[s("div",is,[n(t(w),{class:"info-widget",bordered:!1},{default:o(()=>[s("div",us,[s("div",rs,i(C.value.title),1),n(t(O),{type:"info",size:"small"},{default:o(()=>[d(i(C.value.examType?.toUpperCase())+" PRO",1)]),_:1})]),n(t(G)),s("div",cs,[s("div",ds,[e[15]||(e[15]=s("span",null,"è€ƒè¯•è¿›åº¦",-1)),s("span",null,i(v.value+1)+" / "+i(p.value.length),1)]),n(t(we),{type:"line",percentage:oe.value,color:"#6366f1","show-indicator":!1,circle:""},null,8,["percentage"])]),s("div",vs,[e[16]||(e[16]=s("div",{class:"map-label"},"ç­”é¢˜å¡",-1)),s("div",ps,[(u(!0),c(N,null,B(p.value.length,l=>(u(),c("div",{key:l,class:M(["map-item",{active:l-1===v.value,filled:m.value[l-1]!==null}]),onClick:r=>v.value=l-1},i(l),11,fs))),128))])]),n(t(_),{block:"",secondary:"",class:"mt-8",onClick:W},{default:o(()=>[...e[17]||(e[17]=[d("æ”¾å¼ƒæ­¤æ¬¡è€ƒè¯•",-1)])]),_:1})]),_:1})]),s("div",gs,[n(t(w),{class:"question-card",bordered:!1},{default:o(()=>[s("div",ms,[n(t(O),{type:"primary",size:"small",class:"mb-4"},{default:o(()=>[d(i(h.value?.section||"Section"),1)]),_:1}),h.value?.type==="listening"?(u(),c("div",_s,[s("div",ys,"ğŸ“» Listening Passage "+i(ne.value),1),s("div",hs,[n(t(_),{secondary:"",circle:"",type:"primary",size:"large",onClick:e[2]||(e[2]=l=>ee(h.value.audioScript))},{icon:o(()=>[k.value?(u(),I(t(Ve),{key:1})):(u(),I(t(Ce),{key:0}))]),_:1}),e[18]||(e[18]=s("span",{class:"ml-4 text-gray-400"},"ç‚¹å‡»æ’­æ”¾å¬åŠ›ææ–™ (TTS)",-1))])])):z("",!0),X.value?(u(),c("div",bs,[n(t(w),{embedded:"",bordered:!1,class:"passage-card"},{default:o(()=>[d(i(X.value),1)]),_:1})])):z("",!0),s("h3",ks,i(ae.value),1)]),["vocabulary","grammar","reading","listening"].includes(h.value?.type||"vocabulary")?(u(),c("div",xs,[(u(!0),c(N,null,B(h.value?.options,(l,r)=>(u(),c("div",{key:r,class:M(["option-item",{selected:m.value[v.value]===r}]),onClick:T=>ce(r)},[s("div",Cs,i(["A","B","C","D"][r]),1),s("div",Ss,i(l),1)],10,ws))),128))])):(u(),c("div",Ts,[n(t(Se),{value:m.value[v.value],"onUpdate:value":e[3]||(e[3]=l=>m.value[v.value]=l),type:"textarea",placeholder:"è¯·è¾“å…¥æ‚¨çš„ç­”æ¡ˆ...",autosize:{minRows:10,maxRows:20},class:"essay-input"},null,8,["value"])])),s("div",zs,[n(t(_),{disabled:v.value===0,quaternary:"",onClick:de},{icon:o(()=>[n(t(Z))]),default:o(()=>[e[19]||(e[19]=d(" PREV ",-1))]),_:1},8,["disabled"]),n(t(Te),null,{default:o(()=>[s("span",Es,"å·²ç­” "+i(ie.value)+" / "+i(p.value.length),1),v.value<p.value.length-1?(u(),I(t(_),{key:0,type:"primary",color:"#6366f1",size:"large",onClick:ve},{default:o(()=>[...e[20]||(e[20]=[d(" NEXT QUESTION ",-1)])]),_:1})):(u(),I(t(_),{key:1,type:"error",size:"large",loading:x.value,onClick:pe},{default:o(()=>[...e[21]||(e[21]=[d(" æäº¤è¯•å· ",-1)])]),_:1},8,["loading"]))]),_:1})])]),_:1})])])])):g.value==="result"?(u(),c("div",Ns,[n(t(w),{class:"result-card",bordered:!1},{header:o(()=>[s("div",Bs,[n(t(ze),{size:80,color:"#f59e0b"}),e[22]||(e[22]=s("h2",null,"è€ƒè¯•æˆç»©æŠ¥å‘Š",-1))])]),default:o(()=>[s("div",Is,[s("div",As,[s("div",Ls,i(y.value.score),1),e[23]||(e[23]=s("div",{class:"score-unit"},"TOTAL SCORE",-1))])]),n(t($),{cols:"3","x-gap":"20",class:"stat-summary"},{default:o(()=>[n(t(E),null,{default:o(()=>[s("div",Vs,[s("div",Ds,i(y.value.correctCount),1),e[24]||(e[24]=s("div",{class:"l"},"æ­£ç¡®é¢˜ç›®",-1))])]),_:1}),n(t(E),null,{default:o(()=>[s("div",Ms,[s("div",Qs,i(y.value.totalCount-y.value.correctCount),1),e[25]||(e[25]=s("div",{class:"l"},"é”™è¯¯é¢˜ç›®",-1))])]),_:1}),n(t(E),null,{default:o(()=>[s("div",qs,[s("div",Rs,i(Math.floor(y.value.timeSpent/60))+"m",1),e[26]||(e[26]=s("div",{class:"l"},"æ‰€ç”¨æ—¶é—´",-1))])]),_:1})]),_:1}),n(t(G)),s("div",Us,[n(t(_),{type:"primary",color:"#6366f1",size:"large",round:"",onClick:W},{default:o(()=>[...e[27]||(e[27]=[d(" è¿”å›åˆ—è¡¨ ",-1)])]),_:1}),n(t(_),{secondary:"",size:"large",round:"",onClick:e[4]||(e[4]=l=>g.value="review")},{default:o(()=>[...e[28]||(e[28]=[d(" è¯¦ç»†è§£æ ",-1)])]),_:1})])]),_:1})])):g.value==="review"?(u(),c("div",Ps,[s("div",$s,[n(t(_),{secondary:"",round:"",onClick:e[5]||(e[5]=l=>g.value="result")},{icon:o(()=>[n(t(Z))]),default:o(()=>[e[29]||(e[29]=d(" è¿”å›æŠ¥å‘Š ",-1))]),_:1})]),n(t(w),{class:"review-card",title:"è€ƒè¯•é¢˜ç›®å›é¡¾",bordered:!1},{default:o(()=>[n(t(Ee),null,{default:o(()=>[(u(!0),c(N,null,B(p.value,(l,r)=>(u(),I(t(Ne),{key:r},{default:o(()=>[n(t(De),{title:"ç¬¬ "+(r+1)+" é¢˜"},{description:o(()=>[s("p",Gs,i(l.text),1)]),default:o(()=>[s("div",Os,[s("div",Fs,[s("div",js,[e[30]||(e[30]=s("span",{class:"lbl"},"ä½ çš„ç­”æ¡ˆï¼š",-1)),s("span",{class:M(m.value[r]===l.correct?"success":"error")},i(m.value[r]!==null?["A","B","C","D"][m.value[r]]:"æœªä½œç­”"),3)]),s("div",Hs,[e[31]||(e[31]=s("span",{class:"lbl"},"æ­£ç¡®ç­”æ¡ˆï¼š",-1)),s("span",Xs,i(["A","B","C","D"][l.correct]),1)])]),l.explanation?(u(),c("div",Ys,[e[32]||(e[32]=s("strong",null,"è§£æï¼š",-1)),d(" "+i(l.explanation),1)])):z("",!0)])]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1})])):z("",!0)]))}},nt=fe(Js,[["__scopeId","data-v-7b3b8390"]]);export{nt as default};
