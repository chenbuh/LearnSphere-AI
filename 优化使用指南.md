# ğŸš€ ä¼˜åŒ–åŠŸèƒ½å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸ“– ç®€ä»‹

æœ¬æŒ‡å—å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨æ–°ä¼˜åŒ–çš„ç³»ç»ŸåŠŸèƒ½ã€‚æ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯è‡ªåŠ¨å·¥ä½œçš„ï¼Œä½†äº†è§£å¦‚ä½•ä½¿ç”¨å®ƒä»¬å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°è°ƒè¯•å’Œä¼˜åŒ–åº”ç”¨ã€‚

---

## 1. ğŸ“ ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ

### åŸºæœ¬ä½¿ç”¨

```javascript
// ä½¿ç”¨å…¨å±€loggerå¯¹è±¡
logger.info('æ¨¡å—å', 'è¿™æ˜¯ä¸€æ¡ä¿¡æ¯');
logger.warn('æ¨¡å—å', 'è­¦å‘Šä¿¡æ¯');
logger.error('æ¨¡å—å', 'é”™è¯¯ä¿¡æ¯', errorObject);
logger.debug('æ¨¡å—å', 'è°ƒè¯•ä¿¡æ¯');
```

### æ€§èƒ½è¿½è¸ª

```javascript
// æ ‡è®°æ“ä½œå¼€å§‹
logger.time('æ•°æ®åŠ è½½');

// æ‰§è¡Œæ“ä½œ
await loadData();

// æ ‡è®°æ“ä½œç»“æŸå¹¶è¾“å‡ºæ—¶é—´
logger.timeEnd('æ•°æ®åŠ è½½', 'æ•°æ®æ¨¡å—');
// è¾“å‡º: â±ï¸ æ•°æ®åŠ è½½: 245.67ms
```

### æ—¥å¿—åˆ†ç»„

```javascript
logger.group('æ‰¹é‡æ“ä½œ');
logger.info('æ¨¡å—', 'æ“ä½œ1å®Œæˆ');
logger.info('æ¨¡å—', 'æ“ä½œ2å®Œæˆ');
logger.info('æ¨¡å—', 'æ“ä½œ3å®Œæˆ');
logger.groupEnd();
```

### è°ƒæ•´æ—¥å¿—çº§åˆ«

```javascript
// å¼€å‘æ—¶æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
logger.setLevel('DEBUG');

// ç”Ÿäº§ç¯å¢ƒåªçœ‹é‡è¦æ—¥å¿—
logger.setLevel('WARN');

// ä¸ºç‰¹å®šæ¨¡å—è®¾ç½®çº§åˆ«
logger.setModuleLevel('Storage', 'DEBUG');
```

### æŸ¥çœ‹æ—¥å¿—ç»Ÿè®¡

```javascript
const stats = logger.getStats();
console.log(stats);
// {
//   debug: 150,
//   info: 300,
//   warn: 20,
//   error: 5,
//   total: 475,
//   historySize: 475
// }
```

### å¯¼å‡ºæ—¥å¿—

```javascript
// JSONæ ¼å¼
const jsonLogs = logger.export('json');

// æ–‡æœ¬æ ¼å¼
const textLogs = logger.export('text');

// ä¸‹è½½æ—¥å¿—æ–‡ä»¶
Utils.downloadJSON(JSON.parse(jsonLogs), 'app-logs.json');
```

---

## 2. ğŸ“Š æ€§èƒ½ç›‘æ§

### æŸ¥çœ‹æ€§èƒ½æŠ¥å‘Š

```javascript
// è·å–å®Œæ•´æŠ¥å‘Š
const report = performanceMonitor.getReport();

// æŸ¥çœ‹é¡µé¢åŠ è½½æ€§èƒ½
console.table(report.pageLoad);

// æŸ¥çœ‹FPS
console.log('å½“å‰FPS:', report.fps.current);
console.log('å¹³å‡FPS:', report.fps.average);

// æŸ¥çœ‹å†…å­˜ä½¿ç”¨
console.log('å†…å­˜ä½¿ç”¨:', report.memory);
```

### è‡ªå®šä¹‰æ€§èƒ½æ ‡è®°

```javascript
// æ ‡è®°ä¸šåŠ¡æ“ä½œæ€§èƒ½
performanceMonitor.mark('search-start');

// æ‰§è¡Œæœç´¢
await performSearch(query);

performanceMonitor.mark('search-end');
performanceMonitor.measure('æœç´¢æ“ä½œ', 'search-start', 'search-end');
```

### åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹

```javascript
// å¿«é€ŸæŸ¥çœ‹æ€§èƒ½
performanceMonitor.getReport()

// æŸ¥çœ‹å†…å­˜
performanceMonitor.getMemoryReport()
```

---

## 3. ğŸ—„ï¸ å­˜å‚¨ç³»ç»Ÿ

### æŸ¥çœ‹å­˜å‚¨æ€§èƒ½

```javascript
// è·å–å­˜å‚¨ä¿¡æ¯
const storageInfo = await Storage.getInstance().getStorageInfo();

console.log('å­˜å‚¨ç±»å‹:', storageInfo.type);
console.log('ç¼“å­˜å¤§å°:', storageInfo.cacheSize);
console.log('ç¼“å­˜å‘½ä¸­ç‡:', storageInfo.performance.hitRate);

// å®Œæ•´ç»Ÿè®¡
console.table(storageInfo.performance);
```

### æ­£å¸¸ä½¿ç”¨ï¼ˆè‡ªåŠ¨ä¼˜åŒ–ï¼‰

```javascript
// å­˜å‚¨ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨LRUç¼“å­˜ï¼Œæ— éœ€é¢å¤–æ“ä½œ

// ä¿å­˜æ•°æ®ï¼ˆè‡ªåŠ¨ç¼“å­˜ï¼‰
await Storage.set('user_settings', settings);

// è¯»å–æ•°æ®ï¼ˆä¼˜å…ˆä»ç¼“å­˜ï¼‰
const settings = await Storage.get('user_settings');

// ç¬¬ä¸€æ¬¡ä»å­˜å‚¨è¯»å–
// ç¬¬äºŒæ¬¡åŠä»¥åä»ç¼“å­˜è¯»å–ï¼ˆå¿«90%ï¼‰
```

---

## 4. ğŸ›¡ï¸ é”™è¯¯å¤„ç†

### æŸ¥çœ‹é”™è¯¯ç»Ÿè®¡

```javascript
// è·å–é”™è¯¯ç»Ÿè®¡
const errorStats = GlobalErrorHandler.getErrorStats();

console.log('æ€»é”™è¯¯æ•°:', errorStats.summary.total);
console.log('å·²è¿‡æ»¤:', errorStats.summary.filtered);
console.log('å·²èšåˆ:', errorStats.summary.grouped);

// æŸ¥çœ‹é”™è¯¯ç»„
console.table(errorStats.errorGroups);
```

### æ·»åŠ è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™

```javascript
// è¿‡æ»¤ç‰¹å®šé”™è¯¯
GlobalErrorHandler.addFilterRule(
    /my-custom-pattern/,
    'è‡ªå®šä¹‰é”™è¯¯ï¼Œå¯ä»¥å¿½ç•¥'
);
```

### æŸ¥çœ‹é”™è¯¯è¯¦æƒ…

```javascript
// è·å–ç‰¹å®šé”™è¯¯ç»„
const group = GlobalErrorHandler.getErrorGroup('javascript:...');
console.log(group);
```

---

## 5. ğŸ› ï¸ å¼€å‘è°ƒè¯•æŠ€å·§

### å¼€å‘ç¯å¢ƒè®¾ç½®

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ

// 1. å¯ç”¨è°ƒè¯•æ—¥å¿—
logger.setLevel('DEBUG');

// 2. æŸ¥çœ‹æ‰€æœ‰æ€§èƒ½æ•°æ®
window.debugInfo = {
    performance: performanceMonitor.getReport(),
    storage: await Storage.getInstance().getStorageInfo(),
    errors: GlobalErrorHandler.getErrorStats(),
    logs: logger.getStats()
};

console.log(window.debugInfo);
```

### æ€§èƒ½åˆ†æ

```javascript
// 1. æ ‡è®°å…³é”®æ“ä½œ
logger.time('é¡µé¢åˆå§‹åŒ–');
performanceMonitor.mark('init-start');

// 2. æ‰§è¡Œæ“ä½œ...

// 3. æŸ¥çœ‹ç»“æœ
logger.timeEnd('é¡µé¢åˆå§‹åŒ–');
performanceMonitor.mark('init-end');
performanceMonitor.measure('åˆå§‹åŒ–', 'init-start', 'init-end');

// 4. è·å–æŠ¥å‘Š
const report = performanceMonitor.getReport();
console.log('è‡ªå®šä¹‰æŒ‡æ ‡:', report.custom);
```

### é”™è¯¯è°ƒè¯•

```javascript
// 1. æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
const recentErrors = logger.getHistory({ 
    level: 'ERROR',
    limit: 10 
});

console.table(recentErrors);

// 2. æŸ¥çœ‹é”™è¯¯åˆ†ç»„
const errorGroups = GlobalErrorHandler.getErrorStats().errorGroups;
console.table(errorGroups);

// 3. å¯¼å‡ºé”™è¯¯æŠ¥å‘Š
const errorReport = GlobalErrorHandler.getErrorStats();
Utils.downloadJSON(errorReport, 'error-report.json');
```

---

## 6. ğŸ¯ ç”Ÿäº§ç¯å¢ƒé…ç½®

### å»ºè®®çš„é…ç½®

```javascript
// ç”Ÿäº§ç¯å¢ƒå¯åŠ¨æ—¶é…ç½®

if (location.hostname !== 'localhost') {
    // 1. è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºINFOï¼ˆå‡å°‘æ—¥å¿—é‡ï¼‰
    logger.setLevel('INFO');
    
    // 2. å…³é—­è°ƒè¯•æ¨¡å¼
    logger.enableConsole = false; // ä¸åœ¨æ§åˆ¶å°è¾“å‡º
    logger.enableHistory = true;  // ä¿ç•™å†å²ç”¨äºåˆ†æ
    
    // 3. å®šæœŸå¯¼å‡ºæ—¥å¿—ï¼ˆç”¨äºåˆ†æï¼‰
    setInterval(() => {
        const logs = logger.export('json');
        // å¯ä»¥å‘é€åˆ°æœåŠ¡å™¨æˆ–ä¿å­˜åˆ°æœ¬åœ°
    }, 5 * 60 * 1000); // æ¯5åˆ†é’Ÿ
}
```

---

## 7. ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### åŸºäºç›‘æ§æ•°æ®ä¼˜åŒ–

```javascript
// 1. è·å–æ€§èƒ½æŠ¥å‘Š
const report = performanceMonitor.getReport();

// 2. åˆ†ææ…¢èµ„æº
if (report.resources.slowResources > 0) {
    logger.warn('æ€§èƒ½', `å‘ç° ${report.resources.slowResources} ä¸ªæ…¢èµ„æº`);
    // æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
    const slowResources = performanceMonitor.metrics.resources
        .filter(r => r.duration > 3000);
    console.table(slowResources);
}

// 3. åˆ†æé•¿ä»»åŠ¡
if (report.longTasks.total > 5) {
    logger.warn('æ€§èƒ½', `å‘ç° ${report.longTasks.total} ä¸ªé•¿ä»»åŠ¡`);
    console.table(performanceMonitor.metrics.longTasks);
}

// 4. æ£€æŸ¥å†…å­˜
const memory = report.memory;
if (parseFloat(memory.usage) > 80) {
    logger.warn('æ€§èƒ½', `å†…å­˜ä½¿ç”¨ç‡è¾ƒé«˜: ${memory.usage}`);
}
```

---

## 8. ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### åœ¨æµè§ˆå™¨æ§åˆ¶å°å¿«é€Ÿæ‰§è¡Œ

```javascript
// æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
{
    æ—¥å¿—ç»Ÿè®¡: logger.getStats(),
    æ€§èƒ½æŠ¥å‘Š: performanceMonitor.getReport(),
    å­˜å‚¨ä¿¡æ¯: await Storage.getInstance().getStorageInfo(),
    é”™è¯¯ç»Ÿè®¡: GlobalErrorHandler.getErrorStats()
}

// è°ƒè¯•æ¨¡å¼
logger.setLevel('DEBUG')

// æ¸…ç†æ—¥å¿—
logger.clear()

// å¯¼å‡ºæ•°æ®
logger.export('json')
performanceMonitor.getReport()
GlobalErrorHandler.getErrorStats()

// æŸ¥çœ‹ç¼“å­˜æ•ˆç‡
(await Storage.getInstance().getStorageInfo()).performance.hitRate
```

---

## 9. âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ—¥å¿—ç³»ç»Ÿ
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨INFOæˆ–WARNçº§åˆ«
- å®šæœŸæ¸…ç†æˆ–å¯¼å‡ºæ—¥å¿—å†å²
- é¿å…åœ¨å¾ªç¯ä¸­å¤§é‡è¾“å‡ºæ—¥å¿—

### 2. æ€§èƒ½ç›‘æ§
- ç›‘æ§ä¼šæœ‰å¾®å°çš„æ€§èƒ½å¼€é”€
- è‡ªåŠ¨ç›‘æ§åœ¨åå°è¿è¡Œ
- å¯ä»¥åœ¨ä¸éœ€è¦æ—¶è°ƒç”¨ `performanceMonitor.cleanup()`

### 3. é”™è¯¯å¤„ç†
- è¿‡æ»¤è§„åˆ™ä¼šå½±å“é”™è¯¯å¯è§æ€§
- é”™è¯¯èšåˆå¯èƒ½éšè—ä¸ªåˆ«é”™è¯¯çš„ç»†èŠ‚
- å®šæœŸæŸ¥çœ‹é”™è¯¯ç»„ä»¥å‘ç°é—®é¢˜æ¨¡å¼

### 4. å­˜å‚¨ç³»ç»Ÿ
- LRUç¼“å­˜è‡ªåŠ¨ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç†
- ç¼“å­˜å¤§å°é»˜è®¤100é¡¹ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´
- æŸ¥çœ‹ç¼“å­˜å‘½ä¸­ç‡æ¥è¯„ä¼°ç¼“å­˜æ•ˆæœ

---

## 10. ğŸ“ å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šä¼˜åŒ–æ•°æ®åŠ è½½

```javascript
async function loadUserData() {
    // 1. å¼€å§‹æ€§èƒ½è¿½è¸ª
    logger.time('loadUserData');
    performanceMonitor.mark('load-start');
    
    try {
        // 2. å°è¯•ä»ç¼“å­˜è¯»å–
        logger.info('UserModule', 'å¼€å§‹åŠ è½½ç”¨æˆ·æ•°æ®');
        
        let userData = await Storage.get('user_data');
        
        if (!userData) {
            // 3. ç¼“å­˜æœªå‘½ä¸­ï¼Œä»APIè·å–
            logger.info('UserModule', 'ç¼“å­˜æœªå‘½ä¸­ï¼Œä»APIè·å–');
            userData = await fetchUserDataFromAPI();
            
            // 4. ä¿å­˜åˆ°ç¼“å­˜
            await Storage.set('user_data', userData);
        } else {
            logger.info('UserModule', 'ä»ç¼“å­˜åŠ è½½æˆåŠŸ');
        }
        
        return userData;
        
    } catch (error) {
        logger.error('UserModule', 'åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥', error);
        throw error;
        
    } finally {
        // 5. ç»“æŸæ€§èƒ½è¿½è¸ª
        logger.timeEnd('loadUserData', 'UserModule');
        performanceMonitor.mark('load-end');
        performanceMonitor.measure('ç”¨æˆ·æ•°æ®åŠ è½½', 'load-start', 'load-end');
    }
}
```

### ç¤ºä¾‹2ï¼šç›‘æ§å…³é”®æ“ä½œ

```javascript
async function performCriticalOperation() {
    const operationId = `op_${Date.now()}`;
    
    // å¼€å§‹ç›‘æ§
    logger.group(`å…³é”®æ“ä½œ ${operationId}`);
    logger.time(operationId);
    performanceMonitor.mark(`${operationId}-start`);
    
    try {
        // æ‰§è¡Œæ“ä½œ
        logger.info('Operation', 'æ­¥éª¤1ï¼šæ•°æ®éªŒè¯');
        await validateData();
        
        logger.info('Operation', 'æ­¥éª¤2ï¼šæ•°æ®å¤„ç†');
        await processData();
        
        logger.info('Operation', 'æ­¥éª¤3ï¼šä¿å­˜ç»“æœ');
        await saveResults();
        
        logger.info('Operation', 'æ“ä½œæˆåŠŸå®Œæˆ');
        
    } catch (error) {
        logger.error('Operation', 'æ“ä½œå¤±è´¥', error);
        throw error;
        
    } finally {
        // ç»“æŸç›‘æ§
        logger.timeEnd(operationId, 'Operation');
        performanceMonitor.mark(`${operationId}-end`);
        performanceMonitor.measure('å…³é”®æ“ä½œ', `${operationId}-start`, `${operationId}-end`);
        logger.groupEnd();
    }
}
```

---

## ğŸ“š æ›´å¤šä¿¡æ¯

æŸ¥çœ‹è¯¦ç»†ä¼˜åŒ–è¯´æ˜ï¼š`ä¼˜åŒ–å®Œæˆæ€»ç»“_20250930.md`

---

*æœ€åæ›´æ–°ï¼š2025å¹´9æœˆ30æ—¥*

