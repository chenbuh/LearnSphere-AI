/* ==================================
   全局移动端适配样式
   适用于所有页面 - Vue 3 + Naive UI
   ==================================

/* 安卓系统通用优化 */
@supports (-webkit-touch-callout: none) {
    * {
        -webkit-tap-highlight-color: rgba(99, 102, 241, 0.15);
        -webkit-touch-callout: none;
    }

    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    /* 滚动优化 */
    * {
        -webkit-overflow-scrolling: touch;
    }
}

/* 全局触摸反馈 */
* {
    touch-action: manipulation;
}

/* 安卓安全区域适配 */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
    body {
        padding-bottom: env(safe-area-inset-bottom);
    }
}

/* ==================================
   超小屏手机 (320px - 360px)
   iPhone 4/5, 小屏安卓
   ================================== */
@media (max-width: 360px) {
    :deep(.n-card) {
        border-radius: 12px !important;
    }

    :deep(.n-button) {
        padding: 0 16px !important;
        font-size: 0.85rem !important;
        height: 36px !important;
    }

    :deep(.n-input) {
        font-size: 0.9rem !important;
    }

    :deep(.n-select) {
        font-size: 0.9rem !important;
    }

    /* 卡片标题 */
    :deep(.n-card-header) {
        padding: 12px 16px !important;
    }

    :deep(.n-card-header__main) {
        font-size: 0.95rem !important;
    }

    /* 网格布局 */
    :deep(.n-grid) {
        gap: 8px !important;
    }

    /* 标签 */
    :deep(.n-tag) {
        font-size: 0.75rem !important;
        height: 20px !important;
        padding: 0 6px !important;
    }

    /* 分割线 */
    :deep(.n-divider) {
        margin: 12px 0 !important;
    }

    /* 进度条 */
    :deep(.n-progress) {
        height: 6px !important;
    }

    /* 统计卡片 */
    .stat-card,
    .score-card {
        padding: 12px !important;
    }

    .stat-value {
        font-size: 1.2rem !important;
    }

    .stat-label {
        font-size: 0.75rem !important;
    }
}

/* ==================================
   安卓小屏 (360px - 375px)
   Samsung A系列, Xiaomi Redmi, iPhone SE
   ================================== */
@media (min-width: 360px) and (max-width: 375px) {
    :deep(.n-card) {
        border-radius: 14px !important;
    }

    :deep(.n-button) {
        padding: 0 18px !important;
        font-size: 0.9rem !important;
        height: 38px !important;
    }

    :deep(.n-card-header__main) {
        font-size: 1rem !important;
    }

    :deep(.n-grid) {
        gap: 10px !important;
    }

    :deep(.n-tag) {
        font-size: 0.8rem !important;
        height: 22px !important;
    }
}

/* ==================================
   标准手机 (375px - 390px)
   iPhone 12/13/14, Samsung S22
   ================================== */
@media (min-width: 375px) and (max-width: 390px) {
    :deep(.n-button) {
        padding: 0 20px !important;
        font-size: 0.95rem !important;
        height: 40px !important;
    }

    :deep(.n-card-header__main) {
        font-size: 1.05rem !important;
    }

    :deep(.n-grid) {
        gap: 12px !important;
    }
}

/* ==================================
   大屏手机 (390px - 414px)
   iPhone Pro Max, OnePlus, Xiaomi 12
   ================================== */
@media (min-width: 390px) and (max-width: 414px) {
    :deep(.n-button) {
        padding: 0 22px !important;
        font-size: 1rem !important;
    }

    :deep(.n-card-header__main) {
        font-size: 1.1rem !important;
    }
}

/* ==================================
   超大屏手机 (414px - 480px)
   Samsung S23 Ultra, OnePlus 11
   ================================== */
@media (min-width: 414px) and (max-width: 480px) {
    :deep(.n-button) {
        padding: 0 24px !important;
        font-size: 1.02rem !important;
    }

    :deep(.n-card-header__main) {
        font-size: 1.12rem !important;
    }
}

/* ==================================
   平板设备 (480px - 768px)
   iPad Mini, 安卓平板
   ================================== */
@media (min-width: 480px) and (max-width: 768px) {
    :deep(.n-button) {
        padding: 0 26px !important;
    }

    :deep(.n-card-header) {
        padding: 16px 20px !important;
    }

    /* 横屏优化 */
    @media (orientation: landscape) {
        :deep(.n-card) {
            margin-bottom: 12px !important;
        }
    }
}

/* ==================================
   通用移动端优化
   所有移动设备
   ================================== */
@media (max-width: 768px) {
    /* 页面容器 */
    .page-container {
        padding: 12px !important;
        box-sizing: border-box !important;
    }

    /* 卡片通用样式 */
    :deep(.n-card) {
        margin-bottom: 12px !important;
    }

    :deep(.n-card__content) {
        padding: 16px !important;
    }

    /* 按钮全宽 */
    .action-btn,
    .primary-btn {
        width: 100% !important;
        margin-bottom: 10px !important;
    }

    /* 表单优化 */
    :deep(.n-form-item) {
        margin-bottom: 16px !important;
    }

    :deep(.n-form-item-label) {
        font-size: 0.9rem !important;
        padding-bottom: 6px !important;
    }

    /* 输入框 */
    :deep(.n-input),
    :deep(.n-input-number) {
        font-size: 1rem !important;
    }

    /* 下拉选择 */
    :deep(.n-select) {
        font-size: 1rem !important;
    }

    /* 单选框和复选框 */
    :deep(.n-radio),
    :deep(.n-checkbox) {
        font-size: 0.9rem !important;
    }

    /* 标签页 */
    :deep(.n-tabs) {
        font-size: 0.9rem !important;
    }

    :deep(.n-tab-pane) {
        padding: 12px 0 !important;
    }

    /* 表格 */
    :deep(.n-data-table) {
        font-size: 0.85rem !important;
    }

    :deep(.n-data-table__th) {
        padding: 10px 8px !important;
    }

    :deep(.n-data-table__td) {
        padding: 10px 8px !important;
    }

    /* 分页 */
    :deep(.n-pagination) {
        font-size: 0.85rem !important;
    }

    :deep(.n-pagination-item) {
        min-width: 32px !important;
        height: 32px !important;
    }

    /* 模态框 */
    :deep(.n-modal) {
        max-width: 95vw !important;
        margin: auto !important;
    }

    /* 抽屉 */
    :deep(.n-drawer) {
        max-width: 100vw !important;
    }

    /* 消息提示 */
    :deep(.n-message) {
        font-size: 0.9rem !important;
    }

    /* 通知 */
    :deep(.n-notification) {
        max-width: 90vw !important;
    }

    /* 对话框 */
    :deep(.n-dialog) {
        max-width: 90vw !important;
    }

    /* 弹出框 */
    :deep(.n-popover) {
        max-width: 90vw !important;
    }

    /* 下拉菜单 */
    :deep(.n-dropdown-menu) {
        max-width: 90vw !important;
    }

    /* 工具提示 */
    :deep(.n-tooltip) {
        font-size: 0.8rem !important;
    }

    /* 空状态 */
    :deep(.n-empty) {
        padding: 40px 20px !important;
    }

    :deep(.n-empty__description) {
        font-size: 0.9rem !important;
    }

    /* 结果页 */
    :deep(.n-result) {
        padding: 40px 20px !important;
    }

    :deep(.n-result__title) {
        font-size: 1.2rem !important;
    }

    :deep(.n-result__description) {
        font-size: 0.9rem !important;
    }

    /* 进度圈 */
    :deep(.n-progress-graph-circle) {
        width: 120px !important;
        height: 120px !important;
    }

    /* 头像 */
    :deep(.n-avatar) {
        width: 40px !important;
        height: 40px !important;
    }

    /* 徽章 */
    :deep(.n-badge) {
        font-size: 0.75rem !important;
    }

    /* 时间轴 */
    :deep(.n-timeline-item) {
        font-size: 0.9rem !important;
    }

    /* 列表 */
    :deep(.n-list-item) {
        padding: 12px !important;
    }

    :deep(.n-list-item__header) {
        font-size: 0.95rem !important;
    }

    /* 面包屑 */
    :deep(.n-breadcrumb) {
        font-size: 0.85rem !important;
    }

    /* 步骤条 */
    :deep(.n-steps) {
        font-size: 0.85rem !important;
    }

    /* 滑块 */
    :deep(.n-slider) {
        height: 4px !important;
    }

    /* 开关 */
    :deep(.n-switch) {
        transform: scale(0.9);
    }

    /* 空间 */
    :deep(.n-space) {
        gap: 8px !important;
    }

    /* 分割线 */
    :deep(.n-divider) {
        margin: 16px 0 !important;
    }

    /* 代码块 */
    :deep(.n-code) {
        font-size: 0.85rem !important;
    }

    /* 引用 */
    :deep(.n-blockquote) {
        font-size: 0.9rem !important;
    }

    /* 折叠面板 */
    :deep(.n-collapse-item__header) {
        font-size: 0.95rem !important;
        padding: 12px 16px !important;
    }

    /* 日历 */
    :deep(.n-calendar) {
        font-size: 0.85rem !important;
    }

    /* 树形控件 */
    :deep(.n-tree) {
        font-size: 0.9rem !important;
    }

    /* 传输列表 */
    :deep(.n-upload) {
        font-size: 0.9rem !important;
    }

    /* 评分 */
    :deep(.n-rate) {
        font-size: 1.2rem !important;
    }

    /* 滑动条 */
    :deep(.n-scrollbar) {
        width: 6px !important;
    }

    /* 滑动条轨道 */
    :deep(.n-scrollbar-rail) {
        width: 6px !important;
    }

    /* 文本 */
    h1, h2, h3, h4, h5, h6 {
        line-height: 1.3 !important;
    }

    p, span, div {
        line-height: 1.5 !important;
    }

    /* 表格横向滚动 */
    :deep(.n-data-table-wrapper) {
        overflow-x: auto !important;
    }

    /* 卡片网格布局 */
    :deep(.n-grid) {
        display: grid !important;
    }
}

/* ==================================
   横屏模式优化
   适用于所有支持横屏的设备
   ================================== */
@media (max-width: 768px) and (orientation: landscape) {
    /* 减少垂直空间占用 */
    .page-container {
        padding-top: 8px !important;
        padding-bottom: 8px !important;
    }

    :deep(.n-card) {
        margin-bottom: 8px !important;
    }

    :deep(.n-card__content) {
        padding: 12px !important;
    }

    :deep(.n-modal) {
        max-height: 90vh !important;
    }

    /* 隐藏非必要元素 */
    .subtitle,
    .description {
        display: none !important;
    }

    /* 压缩按钮高度 */
    :deep(.n-button) {
        height: 32px !important;
        font-size: 0.85rem !important;
    }
}

/* ==================================
   高对比度/深色模式优化
   ================================== */
@media (prefers-color-scheme: dark) {
    @media (max-width: 768px) {
        /* 深色模式下增加对比度 */
        :deep(.n-card) {
            background: rgba(30, 30, 35, 0.95) !important;
        }

        :deep(.n-button) {
            --n-text-color: #fff !important;
        }
    }
}

/* ==================================
   减少动画模式 (用户偏好设置)
   ================================== */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ==================================
   打印样式优化
   ================================== */
@media print {
    .action-btn,
    :deep(.n-button),
    :deep(.n-pagination) {
        display: none !important;
    }

    .page-container {
        padding: 0 !important;
    }
}
