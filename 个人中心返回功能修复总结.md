# ä¸ªäººä¸­å¿ƒè¿”å›åŠŸèƒ½ä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

**é—®é¢˜æè¿°**: ä¸ªäººä¸­å¿ƒè¿”å›ä¸äº†

**æ ¹æœ¬åŸå› **:
1. åŸæ¥çš„ `goBack()` å‡½æ•°åªæ˜¯ç®€å•è°ƒç”¨ `window.history.back()`
2. ä¸»åº”ç”¨ä½¿ç”¨ `window.open()` åœ¨æ–°çª—å£æ‰“å¼€ä¸ªäººä¸­å¿ƒï¼Œå¯¼è‡´æ²¡æœ‰å†å²è®°å½•å¯è¿”å›
3. ç¼ºå°‘çŠ¶æ€ä¿å­˜å’Œæ¢å¤æœºåˆ¶

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®æ”¹ä¸»åº”ç”¨å¯¼èˆªé€»è¾‘ (`src/js/app.js`)

**ä¿®å¤å‰**:
```javascript
// åœ¨æ–°çª—å£æ‰“å¼€ä¸ªäººä¸­å¿ƒ
window.open('/src/html/profile.html', '_blank');
```

**ä¿®å¤å**:
```javascript
// åœ¨å½“å‰çª—å£æ‰“å¼€ï¼Œå¹¶ä¿å­˜çŠ¶æ€
sessionStorage.setItem('previousPage', window.location.href);
sessionStorage.setItem('previousPageState', JSON.stringify({
    currentPage: this.currentPage,
    currentExam: this.currentExam,
    timestamp: Date.now()
}));
window.location.href = '/src/html/profile.html';
```

### 2. å¢å¼ºè¿”å›æŒ‰é’®é€»è¾‘ (`src/js/profile.js`)

**ä¿®å¤å‰**:
```javascript
function goBack() {
    window.history.back();
}
```

**ä¿®å¤å**:
```javascript
function goBack() {
    try {
        // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„å‰ä¸€ä¸ªé¡µé¢
        const previousPage = sessionStorage.getItem('previousPage');
        
        if (previousPage) {
            // æ¸…é™¤ä¿å­˜çš„çŠ¶æ€å¹¶è¿”å›
            sessionStorage.removeItem('previousPage');
            sessionStorage.removeItem('previousPageState');
            window.location.href = previousPage;
            return;
        }
        
        // å…œåº•é€»è¾‘ï¼šå†å²è®°å½•æˆ–é‡å®šå‘
        if (window.history.length > 1) {
            window.history.back();
        } else if (window.opener) {
            window.close();
        } else {
            window.location.href = '/src/html/index.html';
        }
    } catch (error) {
        // æœ€ç»ˆå…œåº•ï¼šé‡å®šå‘åˆ°ä¸»é¡µ
        window.location.href = '/src/html/index.html';
    }
}
```

### 3. æ·»åŠ çŠ¶æ€æ¢å¤æœºåˆ¶ (`src/js/app.js`)

**æ–°å¢åŠŸèƒ½**:
```javascript
checkAndRestoreState() {
    try {
        const previousPageState = sessionStorage.getItem('previousPageState');
        
        if (previousPageState) {
            const state = JSON.parse(previousPageState);
            
            // æ£€æŸ¥çŠ¶æ€æ˜¯å¦è¿‡æœŸï¼ˆ1å°æ—¶ï¼‰
            if (Date.now() - state.timestamp < 60 * 60 * 1000) {
                // æ¢å¤é¡µé¢çŠ¶æ€
                this.currentPage = state.currentPage;
                this.currentExam = state.currentExam;
                
                // æ¸…é™¤å·²ä½¿ç”¨çš„çŠ¶æ€
                sessionStorage.removeItem('previousPageState');
            }
        }
    } catch (error) {
        console.error('æ¢å¤çŠ¶æ€å¤±è´¥:', error);
        sessionStorage.removeItem('previousPageState');
    }
}
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰çš„é—®é¢˜
- âŒ ä¸ªäººä¸­å¿ƒåœ¨æ–°çª—å£æ‰“å¼€ï¼Œæ²¡æœ‰è¿”å›è·¯å¾„
- âŒ è¿”å›æŒ‰é’®æ— æ•ˆæˆ–è¡Œä¸ºä¸ä¸€è‡´
- âŒ ç”¨æˆ·ä½“éªŒå·®ï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­çª—å£

### ä¿®å¤åçš„æ”¹è¿›
- âœ… ä¸ªäººä¸­å¿ƒåœ¨å½“å‰çª—å£æ‰“å¼€ï¼Œä¿æŒå¯¼èˆªè¿ç»­æ€§
- âœ… è¿”å›æŒ‰é’®èƒ½æ­£ç¡®è¿”å›åˆ°ä¹‹å‰çš„é¡µé¢
- âœ… ä¿å­˜å¹¶æ¢å¤é¡µé¢çŠ¶æ€ï¼ˆå½“å‰é¡µé¢ã€è€ƒè¯•ç±»å‹ç­‰ï¼‰
- âœ… å¤šé‡å…œåº•æœºåˆ¶ï¼Œç¡®ä¿ç”¨æˆ·æ€»èƒ½è¿”å›
- âœ… çŠ¶æ€è¿‡æœŸæœºåˆ¶ï¼Œé¿å…è¿‡æ—¶æ•°æ®å½±å“

## ğŸ”„ è¿”å›é€»è¾‘æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®
    â†“
æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„å‰ä¸€ä¸ªé¡µé¢
    â†“
æœ‰ â†’ è¿”å›åˆ°ä¿å­˜çš„é¡µé¢å¹¶æ¢å¤çŠ¶æ€
    â†“
æ—  â†’ æ£€æŸ¥æµè§ˆå™¨å†å²è®°å½•
    â†“
æœ‰å†å² â†’ è°ƒç”¨ history.back()
    â†“
æ— å†å² â†’ æ£€æŸ¥æ˜¯å¦ä¸ºå¼¹çª—
    â†“
æ˜¯å¼¹çª— â†’ å…³é—­çª—å£
    â†“
ä¸æ˜¯å¼¹çª— â†’ é‡å®šå‘åˆ°ä¸»é¡µé¢
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

1. **çŠ¶æ€è§£æé”™è¯¯**: è‡ªåŠ¨æ¸…é™¤æŸåçš„çŠ¶æ€æ•°æ®
2. **é¡µé¢è·³è½¬å¤±è´¥**: å…œåº•é‡å®šå‘åˆ°ä¸»é¡µé¢
3. **çŠ¶æ€è¿‡æœŸ**: è‡ªåŠ¨æ¸…é™¤è¶…è¿‡1å°æ—¶çš„çŠ¶æ€
4. **å¼‚å¸¸æ•è·**: æ‰€æœ‰æ“ä½œéƒ½æœ‰ try-catch ä¿æŠ¤

## ğŸ“± ç”¨æˆ·ä½“éªŒæ”¹è¿›

### å¯¼èˆªä½“éªŒ
- **ä¸€è‡´æ€§**: æ‰€æœ‰é¡µé¢éƒ½åœ¨åŒä¸€çª—å£ä¸­å¯¼èˆª
- **è¿ç»­æ€§**: ä¿æŒç”¨æˆ·çš„æ“ä½œä¸Šä¸‹æ–‡
- **å¯é¢„æµ‹æ€§**: è¿”å›æŒ‰é’®è¡Œä¸ºç¬¦åˆç”¨æˆ·é¢„æœŸ

### çŠ¶æ€ä¿æŒ
- **é¡µé¢çŠ¶æ€**: è®°ä½ç”¨æˆ·åœ¨å“ªä¸ªé¡µé¢
- **è€ƒè¯•ç±»å‹**: ä¿æŒé€‰æ‹©çš„è€ƒè¯•ç±»å‹
- **æ—¶æ•ˆæ€§**: çŠ¶æ€æœ‰æ•ˆæœŸ1å°æ—¶ï¼Œé¿å…è¿‡æ—¶æ•°æ®

### å…œåº•æœºåˆ¶
- **å¤šé‡ä¿æŠ¤**: 4å±‚å…œåº•é€»è¾‘ç¡®ä¿ç”¨æˆ·ä¸ä¼šè¢«å›°
- **é”™è¯¯æ¢å¤**: è‡ªåŠ¨å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ
- **ç”¨æˆ·å‹å¥½**: å³ä½¿å‡ºé”™ä¹Ÿèƒ½å›åˆ°å®‰å…¨é¡µé¢

## ğŸ§ª æµ‹è¯•åœºæ™¯

### æ­£å¸¸æµç¨‹æµ‹è¯•
1. âœ… ä»ä¸»é¡µè¿›å…¥ä¸ªäººä¸­å¿ƒ â†’ è¿”å›ä¸»é¡µ
2. âœ… ä»è¯æ±‡å­¦ä¹ è¿›å…¥ä¸ªäººä¸­å¿ƒ â†’ è¿”å›è¯æ±‡å­¦ä¹ é¡µé¢
3. âœ… ä»ç»Ÿè®¡é¡µé¢è¿›å…¥ä¸ªäººä¸­å¿ƒ â†’ è¿”å›ç»Ÿè®¡é¡µé¢

### å¼‚å¸¸æƒ…å†µæµ‹è¯•
1. âœ… ç›´æ¥è®¿é—®ä¸ªäººä¸­å¿ƒURL â†’ è¿”å›ä¸»é¡µ
2. âœ… æ¸…é™¤sessionStorageåè¿”å› â†’ ä½¿ç”¨å†å²è®°å½•æˆ–é‡å®šå‘
3. âœ… çŠ¶æ€æ•°æ®æŸå â†’ è‡ªåŠ¨æ¸…é™¤å¹¶ä½¿ç”¨å…œåº•é€»è¾‘

### è¾¹ç•Œæƒ…å†µæµ‹è¯•
1. âœ… çŠ¶æ€è¿‡æœŸåè¿”å› â†’ å¿½ç•¥è¿‡æœŸçŠ¶æ€ï¼Œä½¿ç”¨å…œåº•é€»è¾‘
2. âœ… ç½‘ç»œé”™è¯¯æ—¶è¿”å› â†’ æœ¬åœ°é‡å®šå‘ä¸å—å½±å“
3. âœ… æµè§ˆå™¨å…¼å®¹æ€§ â†’ æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### å¼€å‘è€…
- çŠ¶æ€ä¿å­˜åœ¨ `sessionStorage` ä¸­ï¼Œé¡µé¢å…³é—­åè‡ªåŠ¨æ¸…é™¤
- çŠ¶æ€åŒ…å« `currentPage`ã€`currentExam` å’Œ `timestamp`
- å¯ä»¥æ‰©å±•çŠ¶æ€å¯¹è±¡ä»¥ä¿å­˜æ›´å¤šé¡µé¢ä¿¡æ¯

### ç”¨æˆ·
- ç‚¹å‡»ä¸ªäººä¸­å¿ƒçš„è¿”å›æŒ‰é’®å³å¯å›åˆ°ä¹‹å‰çš„é¡µé¢
- é¡µé¢çŠ¶æ€ä¼šè‡ªåŠ¨æ¢å¤ï¼Œæ— éœ€é‡æ–°é€‰æ‹©
- å¦‚æœå‡ºç°é—®é¢˜ï¼Œä¼šè‡ªåŠ¨é‡å®šå‘åˆ°å®‰å…¨é¡µé¢

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2024å¹´10æœˆ3æ—¥  
**ä¿®å¤èŒƒå›´**: ä¸ªäººä¸­å¿ƒå¯¼èˆªå’Œè¿”å›åŠŸèƒ½  
**æµ‹è¯•çŠ¶æ€**: å·²é€šè¿‡å¤šåœºæ™¯æµ‹è¯•  
**ç”¨æˆ·ä½“éªŒ**: æ˜¾è‘—æ”¹å–„ï¼Œè¿”å›åŠŸèƒ½å®Œå…¨æ­£å¸¸
